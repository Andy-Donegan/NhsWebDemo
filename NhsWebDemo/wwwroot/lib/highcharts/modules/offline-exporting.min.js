"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/offline-exporting",["highcharts","highcharts/modules/exporting"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){function t(e,t,n,o){e.hasOwnProperty(t)||(e[t]=o.apply(null,n))}t(e=e?e._modules:{},"Extensions/DownloadURL.js",[e["Core/Globals.js"]],function(e){var i=e.isSafari,a=e.win,l=a.document,r=a.URL||a.webkitURL||a,c=e.dataURLtoBlob=function(e){if((e=e.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/))&&3<e.length&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&a.Blob&&r.createObjectURL){for(var t=a.atob(e[3]),n=new a.ArrayBuffer(t.length),n=new a.Uint8Array(n),o=0;o<n.length;++o)n[o]=t.charCodeAt(o);return e=new a.Blob([n],{type:e[1]}),r.createObjectURL(e)}};return e=e.downloadURL=function(t,e){var n=a.navigator,o=l.createElement("a");if("string"==typeof t||t instanceof String||!n.msSaveOrOpenBlob){if(t=""+t,n=/Edge\/\d+/.test(n.userAgent),(i&&"string"==typeof t&&0===t.indexOf("data:application/pdf")||n||2e6<t.length)&&!(t=c(t)||""))throw Error("Failed to convert to blob");if(void 0!==o.download)o.href=t,o.download=e,l.body.appendChild(o),o.click(),l.body.removeChild(o);else try{var r=a.open(t,"chart");if(null==r)throw Error("Failed to open window")}catch(e){a.location.href=t}}else n.msSaveOrOpenBlob(t,e)},{dataURLtoBlob:c,downloadURL:e}}),t(e,"Extensions/OfflineExporting/OfflineExportingDefaults.js",[],function(){return{libURL:"https://code.highcharts.com/9.3.3/lib/",menuItemDefinitions:{downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChartLocal({type:"application/pdf"})}}}}}),t(e,"Extensions/OfflineExporting/OfflineExporting.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Chart/Chart.js"],e["Core/DefaultOptions.js"],e["Extensions/DownloadURL.js"],e["Extensions/Exporting/Exporting.js"],e["Core/Globals.js"],e["Extensions/OfflineExporting/OfflineExportingDefaults.js"],e["Core/Utilities.js"]],function(h,e,t,n,i,a,o,r){var u=t.defaultOptions,m=n.downloadURL,v=a.win,y=a.doc,x=r.addEvent,l=r.error,c=r.extend,s=r.fireEvent,f=r.merge;h.allowedAttributes.push("data-z-index","fill-opacity","rx","ry","stroke-dasharray","stroke-linejoin","text-anchor","transform","version","viewBox","visibility","xmlns","xmlns:xlink"),h.allowedTags.push("desc","clippath","g");var d,b,g=[];function p(e,t){function n(e){!1===r.fallbackToExportServer?r.error?r.error(r,e):l(28,!0):o.exportChart(r)}var o=this,r=f(o.options.exporting,e);e=function(){return[].some.call(o.container.getElementsByTagName("image"),function(e){return""!==(e=e.getAttribute("href"))&&"string"==typeof e&&0!==e.indexOf("data:")})},a.isMS&&o.styledMode&&!i.inlineWhitelist.length&&i.inlineWhitelist.push(/^blockSize/,/^border/,/^caretColor/,/^color/,/^columnRule/,/^columnRuleColor/,/^cssFloat/,/^cursor/,/^fill$/,/^fillOpacity/,/^font/,/^inlineSize/,/^length/,/^lineHeight/,/^opacity/,/^outline/,/^parentRule/,/^rx$/,/^ry$/,/^stroke/,/^textAlign/,/^textAnchor/,/^textDecoration/,/^transform/,/^vectorEffect/,/^visibility/,/^x$/,/^y$/),a.isMS&&("application/pdf"===r.type||o.container.getElementsByTagName("image").length&&"image/svg+xml"!==r.type)||"application/pdf"===r.type&&e()?n(Error("Image type not supported for this chart/browser.")):o.getSVGForLocalExport(r,t||{},n,function(e){-1<e.indexOf("<foreignObject")&&"image/svg+xml"!==r.type&&(a.isMS||"application/pdf"===r.type)?n(Error("Image type not supported for charts with embedded HTML")):b.downloadSVGLocal(e,c({filename:o.getFilename()},r),n,function(){return s(o,"exportChartLocalSuccess")})})}function w(e,t){var n=y.getElementsByTagName("head")[0],o=y.createElement("script");o.type="text/javascript",o.src=e,o.onload=t,o.onerror=function(){l("Error loading script "+e)},n.appendChild(o)}function E(e,t,n,o){function r(e,t,n){++g,n.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",e),f()}var i,a,l,c,s=this,f=function(){c&&g===d&&o(s.sanitizeSVG(i.innerHTML,a))},d=0,g=0;s.unbindGetSVG=x(s,"getSVG",function(e){a=e.chartCopy.options,c=(i=e.chartCopy.container.cloneNode(!0))&&i.getElementsByTagName("image")||[],d=c.length}),s.getSVGForExport(e,t);try{if(!c||!c.length)return void o(s.sanitizeSVG(i.innerHTML,a));for(t=0;t<c.length;t++){var p=c[t];(l=p.getAttributeNS("http://www.w3.org/1999/xlink","href"))?b.imageToDataUrl(l,"image/png",{imageElement:p},e.scale,r,n,n,n):(g++,p.parentNode.removeChild(p),t--,f())}}catch(e){n(e)}s.unbindGetSVG()}function C(o,r,i,a,l,e,c,t,s){var f=new v.Image,n=function(){setTimeout(function(){var e=y.createElement("canvas"),t=e.getContext&&e.getContext("2d");try{if(t){e.height=f.height*a,e.width=f.width*a,t.drawImage(f,0,0,e.width,e.height);try{var n=e.toDataURL(r);l(n,r,i,a)}catch(e){g(o,r,i,a)}}else c(o,r,i,a)}finally{s&&s(o,r,i,a)}},b.loadEventDeferDelay)},d=function(){t(o,r,i,a),s&&s(o,r,i,a)},g=function(){f=new v.Image,g=e,f.crossOrigin="Anonymous",f.onload=n,f.onerror=d,f.src=o};f.onload=n,f.onerror=d,f.src=o}function S(e){var t=-1<(t=v.navigator.userAgent).indexOf("WebKit")&&t.indexOf("Chrome")<0;try{if(!t&&-1===e.indexOf("<foreignObject"))return b.domurl.createObjectURL(new v.Blob([e],{type:"image/svg+xml;charset-utf-16"}))}catch(e){}return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(e)}function L(e,t){var n=e.width.baseVal.value+2*t;t=e.height.baseVal.value+2*t,n=new v.jsPDF(n<t?"p":"l","pt",[n,t]),[].forEach.call(e.querySelectorAll('*[visibility="hidden"]'),function(e){e.parentNode.removeChild(e)}),t=e.querySelectorAll("linearGradient");for(var o=0;o<t.length;o++)for(var r=t[o].querySelectorAll("stop"),i=0;i<r.length&&"0"===r[i].getAttribute("offset")&&"0"===r[i+1].getAttribute("offset");)r[i].remove(),i++;return[].forEach.call(e.querySelectorAll("tspan"),function(e){"â€‹"===e.textContent&&(e.textContent=" ",e.setAttribute("dx",-5))}),v.svg2pdf(e,n,{removeInvalid:!0}),n.output("datauristring")}return(b=d=d||{}).CanVGRenderer={},b.domurl=v.URL||v.webkitURL||v,b.loadEventDeferDelay=a.isMS?150:0,b.compose=function(e){var t;return-1===g.indexOf(e)&&(g.push(e),(t=e.prototype).getSVGForLocalExport=E,t.exportChartLocal=p,f(!0,u.exporting,o)),e},b.downloadSVGLocal=function(i,e,a,l){function t(){h.setElementHTML(o,i);var e,t=o.getElementsByTagName("text");[].forEach.call(t,function(n){["font-family","font-size"].forEach(function(e){for(var t=n;t&&t!==o;){if(t.style[e]){n.style[e]=t.style[e];break}t=t.parentNode}}),n.style["font-family"]=n.style["font-family"]&&n.style["font-family"].split(" ").splice(-1),e=n.getElementsByTagName("title"),[].forEach.call(e,function(e){n.removeChild(e)})}),t=L(o.firstChild,0);try{m(t,f),l&&l()}catch(e){a(e)}}var c,o=y.createElement("div"),s=e.type||"image/png",f=(e.filename||"chart")+"."+("image/svg+xml"===s?"svg":s.split("/")[1]),d=e.scale||1,g=e.libURL||u.exporting.libURL,p=!0,g="/"!==g.slice(-1)?g+"/":g;if("image/svg+xml"===s)try{var n,r=void 0!==v.navigator.msSaveOrOpenBlob?((n=new MSBlobBuilder).append(i),n.getBlob("image/svg+xml")):S(i);m(r,f),l&&l()}catch(e){a(e)}else"application/pdf"===s?v.jsPDF&&v.svg2pdf?t():(p=!0,w(g+"jspdf.js",function(){w(g+"svg2pdf.js",function(){t()})})):(r=S(i),c=function(){try{b.domurl.revokeObjectURL(r)}catch(e){}},C(r,s,{},d,function(e){try{m(e,f),l&&l()}catch(e){a(e)}},function(){function e(){v.canvg.Canvg.fromString(n,i).start();try{m(v.navigator.msSaveOrOpenBlob?t.msToBlob():t.toDataURL(s),f),l&&l()}catch(e){a(e)}finally{c()}}var t=y.createElement("canvas"),n=t.getContext("2d"),o=i.match(/^<svg[^>]*width\s*=\s*"?(\d+)"?[^>]*>/)[1]*d,r=i.match(/^<svg[^>]*height\s*=\s*"?(\d+)"?[^>]*>/)[1]*d;t.width=o,t.height=r,v.canvg?e():(p=!0,w(g+"canvg.js",function(){e()}))},a,a,function(){p&&c()}))},b.getScript=w,b.imageToDataUrl=C,b.svgToDataUrl=S,b.svgToPdf=L,d}),t(e,"masters/modules/offline-exporting.src.js",[e["Core/Globals.js"],e["Extensions/OfflineExporting/OfflineExporting.js"]],function(e,t){e.downloadSVGLocal=t.downloadSVGLocal,t.compose(e.Chart)})});