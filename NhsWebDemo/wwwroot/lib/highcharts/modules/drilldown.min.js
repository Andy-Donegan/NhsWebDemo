"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/drilldown",["highcharts"],function(i){return t(i),t.Highcharts=i,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(i){function t(i,t,e,o){i.hasOwnProperty(t)||(i[t]=o.apply(null,e))}t(i=i?i._modules:{},"Extensions/Drilldown.js",[i["Core/Animation/AnimationUtilities.js"],i["Core/Axis/Axis.js"],i["Core/Chart/Chart.js"],i["Core/Color/Color.js"],i["Series/Column/ColumnSeries.js"],i["Core/FormatUtilities.js"],i["Core/Globals.js"],i["Core/DefaultOptions.js"],i["Core/Series/Point.js"],i["Core/Series/Series.js"],i["Core/Series/SeriesRegistry.js"],i["Core/Renderer/SVG/SVGRenderer.js"],i["Core/Axis/Tick.js"],i["Core/Utilities.js"]],function(i,t,e,p,o,r,n,s,l,a,d,h,c,u){var f=i.animObject,m=r.format,v=n.noop;i=s.defaultOptions;var w=u.addEvent,g=u.removeEvent,x=u.extend,y=u.fireEvent,D=u.merge,b=u.objectEach,S=u.pick,B=u.syncTimeout;d=d.seriesTypes.pie;var C=1;x(i.lang,{drillUpText:"‚óÅ Back to {series.name}"}),i.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}},h.prototype.Element.prototype.fadeIn=function(i){this.attr({opacity:.1,visibility:"inherit"}).animate({opacity:S(this.newOpacity,1)},i||{duration:250})},e.prototype.addSeriesAsDrilldown=function(i,t){this.addSingleSeriesAsDrilldown(i,t),this.applyDrilldown()},e.prototype.addSingleSeriesAsDrilldown=function(i,t){var e,o=i.series,r=o.xAxis,n=o.yAxis,s=[],l=[],a=this.styledMode?{colorIndex:S(i.colorIndex,o.colorIndex)}:{color:i.color||o.color};this.drilldownLevels||(this.drilldownLevels=[]);var d=o.options._levelNumber||0;(e=this.drilldownLevels[this.drilldownLevels.length-1])&&e.levelNumber!==d&&(e=void 0),t=x(x({_ddSeriesId:C++},a),t);var h=o.points.indexOf(i);o.chart.series.forEach(function(i){i.xAxis!==r||i.isDrilling||(i.options._ddSeriesId=i.options._ddSeriesId||C++,i.options._colorIndex=i.userOptions._colorIndex,i.options._levelNumber=i.options._levelNumber||d,e?(s=e.levelSeries,l=e.levelSeriesOptions):(s.push(i),i.purgedOptions=D({_ddSeriesId:i.options._ddSeriesId,_levelNumber:i.options._levelNumber,selected:i.options.selected},i.userOptions),l.push(i.purgedOptions)))}),i=x({levelNumber:d,seriesOptions:o.options,seriesPurgedOptions:o.purgedOptions,levelSeriesOptions:l,levelSeries:s,shapeArgs:i.shapeArgs,bBox:i.graphic?i.graphic.getBBox():{},color:i.isNull?p.parse(a.color).setOpacity(0).get():a.color,lowerSeriesOptions:t,pointOptions:o.options.data[h],pointIndex:h,oldExtremes:{xMin:r&&r.userMin,xMax:r&&r.userMax,yMin:n&&n.userMin,yMax:n&&n.userMax},resetZoomButton:this.resetZoomButton},a),this.drilldownLevels.push(i),r&&r.names&&(r.names.length=0),(t=i.lowerSeries=this.addSeries(t,!1)).options._levelNumber=d+1,r&&(r.oldPos=r.pos,r.userMin=r.userMax=null,n.userMin=n.userMax=null),o.type===t.type&&(t.animate=t.animateDrilldown||v,t.options.animation=!0)},e.prototype.applyDrilldown=function(){var t,i=this.drilldownLevels;i&&0<i.length&&(t=i[i.length-1].levelNumber,this.drilldownLevels.forEach(function(i){i.levelNumber===t&&i.levelSeries.forEach(function(i){i.options&&i.options._levelNumber===t&&i.remove(!1)})})),this.resetZoomButton&&(this.resetZoomButton.hide(),delete this.resetZoomButton),this.pointer.reset(),this.redraw(),this.showDrillUpButton(),y(this,"afterDrilldown")},e.prototype.getDrilldownBackText=function(){var i=this.drilldownLevels;if(i&&0<i.length)return(i=i[i.length-1]).series=i.seriesOptions,m(this.options.lang.drillUpText||"",i)},e.prototype.showDrillUpButton=function(){var i,t,e=this,o=this.getDrilldownBackText(),r=e.options.drilldown.drillUpButton,n="chart"===r.relativeTo||"spacingBox"===r.relativeTo?null:"scrollablePlotBox";this.drillUpButton?this.drillUpButton.attr({text:o}).align():(t=(i=r.theme)&&i.states,this.drillUpButton=this.renderer.button(o,null,null,function(){e.drillUp()},i,t&&t.hover,t&&t.select).addClass("highcharts-drillup-button").attr({align:r.position.align,zIndex:7}).add().align(r.position,!1,n))},e.prototype.drillUp=function(){if(this.drilldownLevels&&0!==this.drilldownLevels.length){for(var i,o,r,n,s=this,t=s.drilldownLevels,e=t[t.length-1].levelNumber,l=t.length,a=s.series,d=function(t){a.forEach(function(i){i.options._ddSeriesId===t._ddSeriesId&&(e=i)});var e=e||s.addSeries(t,!1);e.type===r.type&&e.animateDrillupTo&&(e.animate=e.animateDrillupTo),t===o.seriesPurgedOptions&&(n=e)};l--;)if((o=t[l]).levelNumber===e){if(t.pop(),!(r=o.lowerSeries).chart)for(i=a.length;i--;)if(a[i].options.id===o.lowerSeriesOptions.id&&a[i].options._levelNumber===e+1){r=a[i];break}r.xData=[],o.levelSeriesOptions.forEach(d),y(s,"drillup",{seriesOptions:o.seriesPurgedOptions||o.seriesOptions}),this.resetZoomButton&&this.resetZoomButton.destroy(),n.type===r.type&&(n.drilldownLevel=o,n.options.animation=s.options.drilldown.animation,r.animateDrillupFrom&&r.chart&&r.animateDrillupFrom(o)),n.options._levelNumber=e,r.remove(!1),n.xAxis&&(i=o.oldExtremes,n.xAxis.setExtremes(i.xMin,i.xMax,!1),n.yAxis.setExtremes(i.yMin,i.yMax,!1)),o.resetZoomButton&&(s.resetZoomButton=o.resetZoomButton,s.resetZoomButton.show())}this.redraw(),0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align(),this.ddDupes.length=[],y(s,"drillupall")}},w(e,"afterInit",function(){var e=this;e.drilldown={update:function(i,t){D(!0,e.options.drilldown,i),S(t,!0)&&e.redraw()}}}),w(e,"afterShowResetZoom",function(){var i=this.resetZoomButton&&this.resetZoomButton.getBBox(),t=this.options.drilldown&&this.options.drilldown.drillUpButton;this.drillUpButton&&i&&t&&t.position&&t.position.x&&this.drillUpButton.align({x:t.position.x-i.width-10,y:t.position.y,align:t.position.align},!1,t.relativeTo||"plotBox")}),w(e,"render",function(){(this.xAxis||[]).forEach(function(n){n.ddPoints={},n.series.forEach(function(i){for(var t=i.xData||[],e=i.points,o=0;o<t.length;o++){var r=i.options.data[o];"number"!=typeof r&&(i.pointClass.prototype.optionsToObject.call({series:i},r).drilldown&&(n.ddPoints[t[o]]||(n.ddPoints[t[o]]=[]),r=o-(i.cropStart||0),n.ddPoints[t[o]].push(!(e&&0<=r&&r<e.length)||e[r])))}}),b(n.ticks,c.prototype.drillable)})}),o.prototype.animateDrillupTo=function(i){var e,o;i||(o=(e=this).drilldownLevel,this.points.forEach(function(i){var t=i.dataLabel;i.graphic&&i.graphic.hide(),t&&(t.hidden="hidden"===t.attr("visibility"),t.hidden||(t.hide(),i.connector&&i.connector.hide()))}),B(function(){var t;e.points&&(t=[],e.data.forEach(function(i){t.push(i)}),(t=e.nodes?t.concat(e.nodes):t).forEach(function(i,t){t=t===(o&&o.pointIndex)?"show":"fadeIn";var e=i.dataLabel;i.graphic&&i.graphic[t]("show"===t||void 0),e&&!e.hidden&&(e.fadeIn(),i.connector&&i.connector.fadeIn())}))},Math.max(this.chart.options.drilldown.animation.duration-50,0)),delete this.animate)},o.prototype.animateDrilldown=function(i){var e,o=this,t=this.chart,r=t.drilldownLevels,n=f(t.options.drilldown.animation),s=this.xAxis,l=t.styledMode;i||(r.forEach(function(i){o.options._ddSeriesId===i.lowerSeriesOptions._ddSeriesId&&(e=i.shapeArgs,l||(e.fill=i.color))}),e.x+=S(s.oldPos,s.pos)-s.pos,this.points.forEach(function(i){var t=i.shapeArgs;l||(t.fill=i.color),i.graphic&&i.graphic.attr(e).animate(x(i.shapeArgs,{fill:i.color||o.color}),n),i.dataLabel&&i.dataLabel.fadeIn(n)}),delete this.animate)},o.prototype.animateDrillupFrom=function(r){var n=f(this.chart.options.drilldown.animation),s=this.group,l=s!==this.chart.columnGroup,a=this;a.trackerGroups.forEach(function(i){a[i]&&a[i].on("mouseover")}),l&&delete this.group,this.points.forEach(function(i){function t(){e.destroy(),s&&l&&(s=s.destroy())}var e=i.graphic,o=r.shapeArgs;e&&o&&(delete i.graphic,a.chart.styledMode||(o.fill=r.color),n.duration?e.animate(o,D(n,{complete:t})):(e.attr(o),t()))})},d&&x(d.prototype,{animateDrillupTo:o.prototype.animateDrillupTo,animateDrillupFrom:o.prototype.animateDrillupFrom,animateDrilldown:function(i){var o,r,n,s,l=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],a=this.chart.options.drilldown.animation;this.is("item")&&(a.duration=0),this.center&&(o=l.shapeArgs,r=o.start,n=(o.end-r)/this.points.length,s=this.chart.styledMode,i||(this.points.forEach(function(i,t){var e=i.shapeArgs;s||(o.fill=l.color,e.fill=i.color),i.graphic&&i.graphic.attr(D(o,{start:r+t*n,end:r+(t+1)*n}))[a?"animate":"attr"](e,a)}),delete this.animate))}}),l.prototype.doDrilldown=function(){this.runDrilldown()},l.prototype.runDrilldown=function(o,i,t){var e,r=this.series.chart,n=r.options.drilldown,s=(n.series||[]).length;for(r.ddDupes||(r.ddDupes=[]);s--&&!e;)n.series[s].id===this.drilldown&&-1===r.ddDupes.indexOf(this.drilldown)&&(e=n.series[s],r.ddDupes.push(this.drilldown));y(r,"drilldown",{point:this,seriesOptions:e,category:i,originalEvent:t,points:void 0!==i&&this.series.xAxis.getDDPoints(i).slice(0)},function(i){var t=i.point.series&&i.point.series.chart,e=i.seriesOptions;t&&e&&(o?t.addSingleSeriesAsDrilldown(i.point,e):t.addSeriesAsDrilldown(i.point,e))})},t.prototype.drilldownCategory=function(t,e){this.getDDPoints(t).forEach(function(i){i&&i.series&&i.series.visible&&i.runDrilldown&&i.runDrilldown(!0,t,e)}),this.chart.applyDrilldown()},t.prototype.getDDPoints=function(i){return this.ddPoints&&this.ddPoints[i]||[]},c.prototype.drillable=function(){var t=this.pos,i=this.label,e=this.axis,o="xAxis"===e.coll&&e.getDDPoints,r=o&&e.getDDPoints(t),n=e.chart.styledMode;o&&(i&&r&&r.length?(i.drillable=!0,i.basicStyles||n||(i.basicStyles=D(i.styles)),i.addClass("highcharts-drilldown-axis-label"),i.removeOnDrillableClick&&g(i.element,"click"),i.removeOnDrillableClick=w(i.element,"click",function(i){i.preventDefault(),e.drilldownCategory(t,i)}),n||i.css(e.chart.options.drilldown.activeAxisLabelStyle)):i&&i.drillable&&i.removeOnDrillableClick&&(n||(i.styles={},i.css(i.basicStyles)),i.removeOnDrillableClick(),i.removeClass("highcharts-drilldown-axis-label")))},w(l,"afterInit",function(){return this.drilldown&&!this.unbindDrilldownClick&&(this.unbindDrilldownClick=w(this,"click",O)),this}),w(l,"update",function(i){(i=i.options||{}).drilldown&&!this.unbindDrilldownClick?this.unbindDrilldownClick=w(this,"click",O):!i.drilldown&&void 0!==i.drilldown&&this.unbindDrilldownClick&&(this.unbindDrilldownClick=this.unbindDrilldownClick())});var O=function(i){var t=this.series;t.xAxis&&!1===t.chart.options.drilldown.allowPointDrilldown?t.xAxis.drilldownCategory(this.x,i):this.runDrilldown(void 0,void 0,i)};w(a,"afterDrawDataLabels",function(){var o=this.chart.options.drilldown.activeDataLabelStyle,r=this.chart.renderer,n=this.chart.styledMode;this.points.forEach(function(i){var t=i.options.dataLabels,e=S(i.dlOptions,t&&t.style,{});i.drilldown&&i.dataLabel&&("contrast"!==o.color||n||(e.color=r.getContrast(i.color||this.color)),t&&t.color&&(e.color=t.color),i.dataLabel.addClass("highcharts-drilldown-data-label"),n||i.dataLabel.css(o).css(e))},this)});function A(i,t,e,o){i[e?"addClass":"removeClass"]("highcharts-drilldown-point"),o||i.css({cursor:t})}w(a,"afterDrawTracker",function(){var t=this.chart.styledMode;this.points.forEach(function(i){i.drilldown&&i.graphic&&A(i.graphic,"pointer",!0,t)})}),w(l,"afterSetState",function(){var i=this.series.chart.styledMode;this.drilldown&&this.series.halo&&"hover"===this.state?A(this.series.halo,"pointer",!0,i):this.series.halo&&A(this.series.halo,"auto",!1,i)}),w(e,"selection",function(i){!0===i.resetSelection&&this.drillUpButton&&(i=this.options.drilldown&&this.options.drilldown.drillUpButton)&&i.position&&this.drillUpButton.align({x:i.position.x,y:i.position.y,align:i.position.align},!1,i.relativeTo||"plotBox")}),w(e,"drillup",function(){this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy())})}),t(i,"masters/modules/drilldown.src.js",[],function(){})});