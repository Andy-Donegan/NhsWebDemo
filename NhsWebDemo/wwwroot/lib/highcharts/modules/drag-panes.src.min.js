"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/drag-panes",["highcharts","highcharts/modules/stock"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){t=t?t._modules:{};function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o))}e(t,"Extensions/DragPanes.js",[t["Core/Globals.js"],t["Core/Axis/Axis.js"],t["Core/Axis/AxisDefaults.js"],t["Core/Pointer.js"],t["Core/Utilities.js"]],function(t,e,o,i,s){var a=t.hasTouch,h=s.addEvent,v=s.clamp,m=s.isNumber,n=s.merge,r=s.objectEach,z=s.relativeLength,s=s.wrap,c=(p.prototype.init=function(t,e){this.axis=t,this.options=t.options.resize,this.render(),e||this.addMouseEvents()},p.prototype.render=function(){var t=this,e=t.axis,o=e.chart,i=t.options,s=i.x||0,n=i.y,r=v(e.top+e.height+n,o.plotTop,o.plotTop+o.plotHeight),a={};o.styledMode||(a={cursor:i.cursor,stroke:i.lineColor,"stroke-width":i.lineWidth,dashstyle:i.lineDashStyle}),t.lastPos=r-n,t.controlLine||(t.controlLine=o.renderer.path().addClass("highcharts-axis-resizer")),t.controlLine.add(e.axisGroup),i=o.styledMode?t.controlLine.strokeWidth():i.lineWidth,a.d=o.renderer.crispLine([["M",e.left+s,r],["L",e.left+e.width+s,r]],i),t.controlLine.attr(a)},p.prototype.addMouseEvents=function(){var t,e,o,i=this,s=i.controlLine.element,n=i.axis.chart.container,r=[];i.mouseMoveHandler=t=function(t){i.onMouseMove(t)},i.mouseUpHandler=e=function(t){i.onMouseUp(t)},i.mouseDownHandler=o=function(t){i.onMouseDown(t)},r.push(h(n,"mousemove",t),h(n.ownerDocument,"mouseup",e),h(s,"mousedown",o)),a&&r.push(h(n,"touchmove",t),h(n.ownerDocument,"touchend",e),h(s,"touchstart",o)),i.eventsToUnbind=r},p.prototype.onMouseMove=function(t){t.touches&&0===t.touches[0].pageX||this.grabbed&&(this.hasDragged=!0,this.updateAxes(this.axis.chart.pointer.normalize(t).chartY-this.options.y))},p.prototype.onMouseUp=function(t){this.hasDragged&&this.updateAxes(this.axis.chart.pointer.normalize(t).chartY-this.options.y),this.grabbed=this.hasDragged=this.axis.chart.activeResizer=null},p.prototype.onMouseDown=function(t){this.axis.chart.pointer.reset(!1,0),this.grabbed=this.axis.chart.activeResizer=!0},p.prototype.updateAxes=function(a){function h(t){return 100*t/y+"%"}function c(t,e,o){return Math.round(v(t,e,o))}var p,u=this,d=u.axis.chart,t=u.options.controlledAxis,e=0===t.next.length?[d.yAxis.indexOf(u.axis)+1]:t.next,t=[u.axis].concat(t.prev),l=[],f=!1,x=d.plotTop,y=d.plotHeight,g=x+y;a=v(a,x,g),(p=a-u.lastPos)*p<1||([t,e].forEach(function(t,r){t.forEach(function(t,e){var o,i,s=m(t)?d.yAxis[t]:r||e?d.get(t):t,n=s&&s.options;n&&"navigator-y-axis"!==n.id&&(e=s.top,t=Math.round(z(n.minLength,y)),n=Math.round(z(n.maxLength,y)),r?(p=a-u.lastPos,i=c(s.len-p,t,n),e=s.top+p,g<e+i&&(a+=o=g-i-e,e+=o),(i=e<x&&g<(e=x)+i?y:i)===t&&(f=!0),l.push({axis:s,options:{top:h(e-x),height:h(i)}})):((i=c(a-e,t,n))===n&&(f=!0),a=e+i,l.push({axis:s,options:{height:h(i)}})))})}),f||(l.forEach(function(t){t.axis.update(t.options,!1)}),d.redraw(!1)))},p.prototype.destroy=function(){var o=this;delete o.axis.resizer,this.eventsToUnbind&&this.eventsToUnbind.forEach(function(t){t()}),o.controlLine.destroy(),r(o,function(t,e){o[e]=null})},p.resizerOptions={minLength:"10%",maxLength:"100%",resize:{controlledAxis:{next:[],prev:[]},enabled:!1,cursor:"ns-resize",lineColor:"#cccccc",lineDashStyle:"Solid",lineWidth:4,x:0,y:0}},p);function p(t){this.axis=void 0,this.controlLine=void 0,this.lastPos=void 0,this.options=void 0,this.init(t)}return e.keepProps.push("resizer"),h(e,"afterRender",function(){var t=this,e=t.resizer,o=t.options.resize;o&&(o=!1!==o.enabled,e?o?e.init(t,!0):e.destroy():o&&(t.resizer=new c(t)))}),h(e,"destroy",function(t){!t.keepEvents&&this.resizer&&this.resizer.destroy()}),s(i.prototype,"runPointActions",function(t){this.chart.activeResizer||t.apply(this,Array.prototype.slice.call(arguments,1))}),s(i.prototype,"drag",function(t){this.chart.activeResizer||t.apply(this,Array.prototype.slice.call(arguments,1))}),n(!0,o.defaultYAxisOptions,c.resizerOptions),t.AxisResizer=c,t.AxisResizer}),e(t,"masters/modules/drag-panes.src.js",[],function(){})});