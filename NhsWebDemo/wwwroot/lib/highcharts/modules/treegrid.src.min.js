"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){e=e?e._modules:{};function t(e,t,i,r){e.hasOwnProperty(t)||(e[t]=r.apply(null,i))}t(e,"Core/Axis/BrokenAxis.js",[e["Extensions/Stacking.js"],e["Core/Utilities.js"]],function(h,e){var t,u=e.addEvent,i=e.find,g=e.fireEvent,m=e.isArray,x=e.isNumber,k=e.pick;return function(e){var r=[];function o(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function n(){var e=this;e.brokenAxis&&e.brokenAxis.hasBreaks&&(e.options.ordinal=!1)}function s(){var e=this,t=e.brokenAxis;if(t&&t.hasBreaks){for(var i=e.tickPositions,r=e.tickPositions.info,o=[],n=0;n<i.length;n++)t.isInAnyBreak(i[n])||o.push(i[n]);e.tickPositions=o,e.tickPositions.info=r}}function a(){var e=this;e.brokenAxis||(e.brokenAxis=new t(e))}function l(){var e=this,t=e.isDirty,i=e.options.connectNulls,r=e.points,o=e.xAxis,n=e.yAxis;if(t)for(var s=r.length;s--;){var a=r[s],l=!(null===a.y&&!1===i)&&(o&&o.brokenAxis&&o.brokenAxis.isInAnyBreak(a.x,!0)||n&&n.brokenAxis&&n.brokenAxis.isInAnyBreak(a.y,!0));a.visible=!l&&!1!==a.options.visible}}function d(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,k(this.pointArrayMap,["y"]))}function c(i,e){var r,o,n,s,t,a=this,l=a.points;i&&i.brokenAxis&&i.brokenAxis.hasBreaks&&(t=i.brokenAxis,e.forEach(function(e){r=t&&t.breakArray||[],o=i.isXAxis?i.min:k(a.options.threshold,i.min),l.forEach(function(t){s=k(t["stack"+e.toUpperCase()],t[e]),r.forEach(function(e){x(o)&&x(s)&&(n=!1,o<e.from&&s>e.to||o>e.from&&s<e.from?n="pointBreak":(o<e.from&&s>e.from&&s<e.to||o>e.from&&s>e.to&&s<e.from)&&(n="pointInBreak"),n&&g(i,n,{point:t,brk:e}))})})}))}function p(){var e=this.currentDataGrouping,e=e&&e.gapSize,t=this.points.slice(),i=this.yAxis,r=this.options.gapSize,o=t.length-1;if(r&&0<o){"value"!==this.options.gapUnit&&(r*=this.basePointRange),e&&r<e&&e>=this.basePointRange&&(r=e);for(var n,s,a=void 0;o--;)a&&!1!==a.visible||(a=t[o+1]),n=t[o],!1!==a.visible&&!1!==n.visible&&(a.x-n.x>r&&(s=(n.x+a.x)/2,t.splice(o+1,0,{isNull:!0,x:s}),i.stacking&&this.options.stacking&&((i.stacking.stacks[this.stackKey][s]=new h(i,i.options.stackLabels,!1,s,this.stack)).total=0)),a=n)}return this.getGraphPath(t)}e.compose=function(e,t){var i;return-1===r.indexOf(e)&&(r.push(e),e.keepProps.push("brokenAxis"),u(e,"init",a),u(e,"afterInit",o),u(e,"afterSetTickPositions",s),u(e,"afterSetOptions",n)),-1===r.indexOf(t)&&(r.push(t),(i=t.prototype).drawBreaks=c,i.gappedPath=p,u(t,"afterGeneratePoints",l),u(t,"afterRender",d)),e};var t=(f.isInBreak=function(e,t){var i=e.repeat||1/0,r=e.from,o=e.to-e.from,i=r<=t?(t-r)%i:i-(r-t)%i,i=e.inclusive?i<=o:i<o&&0!=i;return i},f.lin2Val=function(e){var t=this.brokenAxis,i=t&&t.breakArray;if(!i||!x(e))return e;for(var r,o=e,n=0;n<i.length&&!((r=i[n]).from>=o);n++)(r.to<o||f.isInBreak(r,o))&&(o+=r.len);return o},f.val2Lin=function(e){var t=this.brokenAxis,i=t&&t.breakArray;if(!i||!x(e))return e;for(var r,o=e,n=0;n<i.length;n++)if((r=i[n]).to<=e)o-=r.len;else{if(r.from>=e)break;if(f.isInBreak(r,e)){o-=e-r.from;break}}return o},f.prototype.findBreakAt=function(t,e){return i(e,function(e){return e.from<t&&t<e.to})},f.prototype.isInAnyBreak=function(e,t){var i,r,o,n=this.axis,s=n.options.breaks||[],a=s.length;if(a&&x(e)){for(;a--;)f.isInBreak(s[a],e)&&(i=!0,r=r||k(s[a].showPoints,!n.isXAxis));o=i&&t?i&&!r:i}return o},f.prototype.setBreaks=function(e,t){var p=this,h=p.axis,i=m(e)&&!!e.length;h.isDirty=p.hasBreaks!==i,p.hasBreaks=i,h.options.breaks=h.userOptions.breaks=e,h.forceRedraw=!0,h.series.forEach(function(e){e.isDirty=!0}),i||h.val2lin!==f.val2Lin||(delete h.val2lin,delete h.lin2val),i&&(h.userOptions.ordinal=!1,h.lin2val=f.lin2Val,h.val2lin=f.val2Lin,h.setExtremes=function(e,t,i,r,o){if(p.hasBreaks){for(var n=this.options.breaks||[],s=void 0;s=p.findBreakAt(e,n);)e=s.to;for(;s=p.findBreakAt(t,n);)t=s.from;t<e&&(t=e)}h.constructor.prototype.setExtremes.call(this,e,t,i,r,o)},h.setAxisTranslation=function(){var e,t,i,r,o,n,s,a,l,d,c;h.constructor.prototype.setAxisTranslation.call(this),p.unitLength=void 0,p.hasBreaks&&(e=h.options.breaks||[],t=[],i=[],r=k(h.pointRangePadding,0),o=0,a=h.userMin||h.min,l=h.userMax||h.max,e.forEach(function(e){s=e.repeat||1/0,x(a)&&x(l)&&(f.isInBreak(e,a)&&(a+=e.to%s-a%s),f.isInBreak(e,l)&&(l-=l%s-e.from%s))}),e.forEach(function(e){if(d=e.from,s=e.repeat||1/0,x(a)&&x(l)){for(;a<d-s;)d-=s;for(;d<a;)d+=s;for(c=d;c<l;c+=s)t.push({value:c,move:"in"}),t.push({value:c+e.to-e.from,move:"out",size:e.breakSize})}}),t.sort(function(e,t){return e.value===t.value?("in"===e.move?0:1)-("in"===t.move?0:1):e.value-t.value}),n=0,d=a,t.forEach(function(e){1===(n+="in"===e.move?1:-1)&&"in"===e.move&&(d=e.value),0===n&&x(d)&&(i.push({from:d,to:e.value,len:e.value-d-(e.size||0)}),o+=e.value-d-(e.size||0))}),p.breakArray=i,x(a)&&x(l)&&x(h.min)&&(p.unitLength=l-a-o+r,g(h,"afterBreaks"),h.staticScale?h.transA=h.staticScale:p.unitLength&&(h.transA*=(l-h.min+r)/p.unitLength),r&&(h.minPixelPadding=h.transA*(h.minPointOffset||0)),h.min=a,h.max=l))}),k(t,!0)&&h.chart.redraw()},f);function f(e){this.hasBreaks=!1,this.axis=e}e.Additions=t}(t=t||{}),t}),t(e,"Core/Axis/GridAxis.js",[e["Core/Axis/Axis.js"],e["Core/Axis/AxisDefaults.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(y,A,P,t){var e,i=P.dateFormats,G=t.addEvent,O=t.defined,B=t.erase,T=t.find,C=t.isArray,w=t.isNumber,E=t.merge,I=t.pick,N=t.timeUnits,L=t.wrap;function S(e){return t.isObject(e,!0)}return function(x){var e;function r(r,e){var o={width:0,height:0};return e.forEach(function(e){var t,i=r[e],e=0;S(i)&&(t=(i=S(i.label)?i.label:{}).getBBox?i.getBBox().height:0,i.textStr&&!w(i.textPxLength)&&(i.textPxLength=i.getBBox().width),e=w(i.textPxLength)?Math.round(i.textPxLength):0,i.textStr&&(e=Math.round(i.getBBox().width)),o.height=Math.max(t,o.height),o.width=Math.max(e,o.width))}),"treegrid"===this.options.type&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode&&(e=this.treeGrid.mapOfPosToGridNode[-1].height||0,o.width+=this.options.labels.indentation*(e-1)),o}function o(){var e=this.grid;(e&&e.columns||[]).forEach(function(e){e.getOffset()})}function n(e){var t,i,r,o,n,s,a,l,d,c,p,h,f,u,g=this;!0===(g.options.grid||{}).enabled&&(u=g.axisTitle,t=g.height,i=g.horiz,r=g.left,o=g.offset,n=g.opposite,s=g.options,a=g.top,l=g.width,d=g.tickSize(),c=u&&u.getBBox().width,p=s.title.x,h=s.title.y,f=I(s.title.margin,i?5:10),u=g.chart.renderer.fontMetrics(s.title.style.fontSize,u).f,g=(i?a+t:r)+(i?1:-1)*(n?-1:1)*(d?d[0]/2:0)+(g.side===x.Side.bottom?u:0),e.titlePosition.x=i?r-(c||0)/2-f+p:g+(n?l:0)+o+p,e.titlePosition.y=i?g-(n?t:0)+(n?u:-u)/2+o+h:a-f+h)}function s(){var e,t=this,i=t.chart,r=t.options.grid,o=void 0===r?{}:r,n=t.userOptions;if(o.enabled&&((r=(e=t).options).labels.align=I(r.labels.align,"center"),e.categories||(r.showLastLabel=!1),e.labelRotation=0,r.labels.rotation=0),o.columns)for(var s=t.grid.columns=[],a=t.grid.columnIndex=0;++a<o.columns.length;){var l=E(n,o.columns[o.columns.length-a-1],{linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete l.grid.columns;l=new y(t.chart,l);l.grid.isColumn=!0,l.grid.columnIndex=a,B(i.axes,l),B(i[t.coll],l),s.push(l)}}function a(){var e=this,t=e.grid,i=e.options;if(!0===(i.grid||{}).enabled){var r,o,n,s=e.min||0,a=e.max||0;if(e.maxLabelDimensions=e.getMaxLabelDimensions(e.ticks,e.tickPositions),e.rightWall&&e.rightWall.destroy(),e.grid&&e.grid.isOuterAxis()&&e.axisLine&&((o=i.lineWidth)&&(n=(l=e.getLinePath(o))[0],r=l[1],o=((e.tickSize("tick")||[1])[0]-1)*(e.side===x.Side.top||e.side===x.Side.left?-1:1),"M"===n[0]&&"L"===r[0]&&(e.horiz?(n[2]+=o,r[2]+=o):(n[1]+=o,r[1]+=o)),!e.horiz&&e.chart.marginRight&&(o=[n,["L",e.left,n[2]||0]],n=["L",e.chart.chartWidth-e.chart.marginRight,e.toPixels(a+e.tickmarkOffset)],n=[["M",r[1]||0,e.toPixels(a+e.tickmarkOffset)],n],e.grid.upperBorder||s%1==0||(e.grid.upperBorder=e.grid.renderBorder(o)),e.grid.upperBorder&&(e.grid.upperBorder.attr({stroke:i.lineColor,"stroke-width":i.lineWidth}),e.grid.upperBorder.animate({d:o})),e.grid.lowerBorder||a%1==0||(e.grid.lowerBorder=e.grid.renderBorder(n)),e.grid.lowerBorder&&(e.grid.lowerBorder.attr({stroke:i.lineColor,"stroke-width":i.lineWidth}),e.grid.lowerBorder.animate({d:n}))),e.grid.axisLineExtra?(e.grid.axisLineExtra.attr({stroke:i.lineColor,"stroke-width":i.lineWidth}),e.grid.axisLineExtra.animate({d:l})):e.grid.axisLineExtra=e.grid.renderBorder(l),e.axisLine[e.showAxis?"show":"hide"](!0))),(t&&t.columns||[]).forEach(function(e){e.render()}),!e.horiz&&e.chart.hasRendered&&(e.scrollbar||e.linkedParent&&e.linkedParent.scrollbar)){for(var i=e.tickmarkOffset,l=e.tickPositions[e.tickPositions.length-1],t=e.tickPositions[0],d=void 0;(d=e.hiddenLabels.pop())&&d.element;)d.show();(d=e.ticks[t].label)&&(i<s-t?e.hiddenLabels.push(d.hide()):d.show()),(d=e.ticks[l].label)&&(i<l-a?e.hiddenLabels.push(d.hide()):d.show());t=e.ticks[l].mark;t&&(l-a<i&&0<l-a&&e.ticks[l].isLast?t.hide():e.ticks[l-1]&&t.show())}}}function l(){var e=this,t=e.tickPositions&&e.tickPositions.info,i=e.options,r=i.grid||{},o=e.userOptions.labels||{};r.enabled&&(e.horiz?(e.series.forEach(function(e){e.options.pointRange=0}),t&&i.dateTimeLabelFormats&&i.labels&&!O(o.align)&&(!1===i.dateTimeLabelFormats[t.unitName].range||1<t.count)&&(i.labels.align="left",O(o.x)||(i.labels.x=3))):"treegrid"!==this.options.type&&e.grid&&e.grid.columns&&(this.minPointOffset=this.tickInterval))}function d(e){var d,t=this.options,i=e.userOptions,e=t&&S(t.grid)?t.grid:{};!0===e.enabled&&(d=E(!0,{className:"highcharts-grid-axis "+(i.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},i),"xAxis"===this.coll&&(O(i.linkedTo)&&!O(i.tickPixelInterval)&&(d.tickPixelInterval=350),O(i.tickPixelInterval)||!O(i.linkedTo)||O(i.tickPositioner)||O(i.tickInterval)||(d.tickPositioner=function(e,t){var i=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(i){for(var r=d.units||[],o=void 0,n=void 0,s=void 0,a=0;a<r.length;a++)if(r[a][0]===i.unitName){o=a;break}r[o+1]?(s=r[o+1][0],n=(r[o+1][1]||[1])[0]):"year"===i.unitName&&(s="year",n=10*i.count);var l=N[s];return this.tickInterval=l*n,this.getTimeTicks({unitRange:l,count:n,unitName:s},e,t,this.options.startOfWeek)}})),E(!0,this.options,d),this.horiz&&(t.minPadding=I(i.minPadding,0),t.maxPadding=I(i.maxPadding,0)),w(t.grid.borderWidth)&&(t.tickWidth=t.lineWidth=e.borderWidth))}function c(e){var t=e.userOptions,e=t&&t.grid||{},t=e.columns;e.enabled&&t&&E(!0,this.options,t[t.length-1])}function p(){(this.grid.columns||[]).forEach(function(e){e.setScale()})}function h(e){var t=A.defaultLeftAxisOptions,i=this.horiz,r=this.maxLabelDimensions,o=this.options.grid,o=void 0===o?{}:o;o.enabled&&r&&(t=2*Math.abs(t.labels.x),r=i?o.cellHeight||t+r.height:t+r.width,C(e.tickSize)?e.tickSize[0]=r:e.tickSize=[r,0])}function f(){this.axes.forEach(function(e){(e.grid&&e.grid.columns||[]).forEach(function(e){e.setAxisSize(),e.setAxisTranslation()})})}function u(t){var e=this.grid;(e.columns||[]).forEach(function(e){e.destroy(t.keepEvents)}),e.columns=void 0}function g(e){var t=e.userOptions||{},e=t.grid||{};e.enabled&&O(e.borderColor)&&(t.tickColor=t.lineColor=e.borderColor),this.grid||(this.grid=new i(this)),this.hiddenLabels=[]}function m(e){var t,i,r,o,n=this.label,s=this.axis,a=s.reversed,l=s.chart,d=s.options.grid||{},c=s.options.labels,p=c.align,h=x.Side[s.side],f=e.tickmarkOffset,u=s.tickPositions,g=this.pos-f,m=w(u[e.index+1])?u[e.index+1]-f:(s.max||0)+f,u=s.tickSize("tick"),f=u?u[0]:0,u=u?u[1]/2:0;!0===d.enabled&&("top"===h?i=(t=s.top+s.offset)-f:"bottom"===h?t=(i=l.chartHeight-s.bottom+s.offset)+f:(t=s.top+s.len-(s.translate(a?m:g)||0),i=s.top+s.len-(s.translate(a?g:m)||0)),"right"===h?o=(r=l.chartWidth-s.right+s.offset)+f:"left"===h?r=(o=s.left+s.offset)-f:(r=Math.round(s.left+(s.translate(a?m:g)||0))-u,o=Math.min(Math.round(s.left+(s.translate(a?g:m)||0))-u,s.left+s.len)),this.slotWidth=o-r,e.pos.x="left"===p?r:"right"===p?o:r+(o-r)/2,e.pos.y=i+(t-i)/2,l=l.renderer.fontMetrics(c.style.fontSize,n&&n.element),n=n?n.getBBox().height:0,c.useHTML?e.pos.y+=l.b+-n/2:(n=Math.round(n/l.h),e.pos.y+=(l.b-(l.h-l.f))/2+-((n-1)*l.h)/2),e.pos.x+=s.horiz&&c.x||0)}function k(e){var t,i,r,o,n,s=e.axis,a=e.value;s.options.grid&&s.options.grid.enabled&&(o=s.tickPositions,t=(s.linkedParent||s).series[0],i=a===o[0],r=a===o[o.length-1],n=void 0,(o=t&&T(t.options.data,function(e){return e[s.isXAxis?"x":"y"]===a}))&&t.is("gantt")&&(n=E(o),P.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(n)),e.isFirst=i,e.isLast=r,e.point=n)}function v(){var e=this,t=e.options,i=t.grid||{},r=e.categories,o=e.tickPositions,n=o[0],s=o[o.length-1],a=e.linkedParent&&e.linkedParent.min,l=e.linkedParent&&e.linkedParent.max,d=a||e.min,a=l||e.max,l=e.tickInterval,s=a<s&&s-l<a;!0!==i.enabled||r||!e.horiz&&!e.isLinked||(n<d&&d<n+l&&!t.startOnTick&&(o[0]=d),s&&!t.endOnTick&&(o[o.length-1]=a))}function b(e){var t=this.options.grid;return!0===(void 0===t?{}:t).enabled&&this.categories?this.tickInterval:e.apply(this,(e=arguments,Array.prototype.slice.call(e,1)))}(e=x.Side||(x.Side={}))[e.top=0]="top",e[e.right=1]="right",e[e.bottom=2]="bottom",e[e.left=3]="left",x.compose=function(e,t,i){return-1===e.keepProps.indexOf("grid")&&(e.keepProps.push("grid"),e.prototype.getMaxLabelDimensions=r,L(e.prototype,"unsquish",b),G(e,"init",g),G(e,"afterGetOffset",o),G(e,"afterGetTitlePosition",n),G(e,"afterInit",s),G(e,"afterRender",a),G(e,"afterSetAxisTranslation",l),G(e,"afterSetOptions",d),G(e,"afterSetOptions",c),G(e,"afterSetScale",p),G(e,"afterTickSize",h),G(e,"trimTicks",v),G(e,"destroy",u)),G(t,"afterSetChartSize",f),G(i,"afterGetLabelPosition",m),G(i,"labelFormat",k),e};var i=(t.prototype.isOuterAxis=function(){var i=this.axis,e=i.chart,t=i.grid.columnIndex,r=i.linkedParent&&i.linkedParent.grid.columns||i.grid.columns,o=t?i.linkedParent:i,n=-1,s=0;return e[i.coll].forEach(function(e,t){e.side!==i.side||e.options.isInternal||(s=t,e===o&&(n=t))}),s===n&&(!w(t)||r.length===t)},t.prototype.renderBorder=function(e){var t=this.axis,i=t.chart.renderer,r=t.options,t=i.path(e).addClass("highcharts-axis-line").add(t.axisBorder);return i.styledMode||t.attr({stroke:r.lineColor,"stroke-width":r.lineWidth,zIndex:7}),t},t);function t(e){this.axis=e}x.Additions=i}(e=e||{}),i.E=function(e){return this.dateFormat("%a",e,!0).charAt(0)},i.W=function(e){var t=new this.Date(e),i=(this.get("Day",t)+6)%7,e=new this.Date(t.valueOf());this.set("Date",e,this.get("Date",t)-i+3);i=new this.Date(this.get("FullYear",e),0,1);return 4!==this.get("Day",i)&&(this.set("Month",t,0),this.set("Date",t,1+(11-this.get("Day",i))%7)),(1+Math.floor((e.valueOf()-i.valueOf())/6048e5)).toString()},e}),t(e,"Gantt/Tree.js",[e["Core/Utilities.js"]],function(e){function r(e,r){var o=e.reduce(function(e,t){var i=g(t.parent,"");return void 0===e[i]&&(e[i]=[]),e[i].push(t),e},{});return Object.keys(o).forEach(function(e,t){var i=o[e];""!==e&&-1===r.indexOf(e)&&(i.forEach(function(e){t[""].push(e)}),delete t[e])}),o}function h(r,e,o,t,n,s){var a,l,d=0,c=0,i=s&&s.after,p=s&&s.before,e={data:t,depth:o-1,id:r,level:o,parent:e};return"function"==typeof p&&p(e,s),p=(n[r]||[]).map(function(e){var t=h(e.id,r,o+1,e,n,s),i=e.start,e=!0===e.milestone?i:e.end;return a=!u(a)||i<a?i:a,l=!u(l)||l<e?e:l,d=d+1+t.descendants,c=Math.max(t.height+1,c),t}),t&&(t.start=g(t.start,a),t.end=g(t.end,l)),f(e,{children:p,descendants:d,height:c}),"function"==typeof i&&i(e,s),e}var f=e.extend,u=e.isNumber,g=e.pick;return{getListOfParents:r,getNode:h,getTree:function(e,t){var i=e.map(function(e){return e.id}),i=r(e,i);return h("",null,1,null,i,t)}}}),t(e,"Core/Axis/TreeGridTick.js",[e["Core/Utilities.js"]],function(e){var t,x=e.addEvent,k=e.isObject,v=e.isNumber,b=e.pick,a=e.wrap;return function(e){var t=!1;function i(){this.treeGrid||(this.treeGrid=new n(this))}function r(e,t,i,r,o,n,s,a,l){var d=this,c=b(d.options&&d.options.labels,n),p=d.pos,h=d.axis,n="treegrid"===h.options.type,l=e.apply(d,[t,i,r,o,c,s,a,l]);return n&&(n=c&&k(c.symbol,!0)?c.symbol:{},c=c&&v(c.indentation)?c.indentation:0,p=(p=(h=h.treeGrid.mapOfPosToGridNode)&&h[p])&&p.depth||1,l.x+=(n.width||0)+2*(n.padding||0)+(p-1)*c),l}function o(e){var t,i,r=this,o=r.pos,n=r.axis,s=r.label,a=n.treeGrid.mapOfPosToGridNode,l=n.options,d=b(r.options&&r.options.labels,l&&l.labels),c=d&&k(d.symbol,!0)?d.symbol:{},p=a&&a[o],h=p&&p.depth,f="treegrid"===l.type,u=-1<n.tickPositions.indexOf(o),g="highcharts-treegrid-node-",m=n.chart.styledMode;f&&p&&s&&s.element&&s.addClass(g+"level-"+h),e.apply(r,Array.prototype.slice.call(arguments,1)),f&&s&&s.element&&p&&p.descendants&&0<p.descendants&&(t=n.treeGrid.isCollapsed(p),i=r,a={color:!m&&s.styles&&s.styles.color||"",collapsed:t,group:s.parentGroup,options:c,renderer:s.renderer,show:u,xy:s.xy},l=i.treeGrid,o=!l.labelIcon,h=a.renderer,e=a.xy,f=a.options,n=f.width||0,p=f.height||0,c={x:e.x-n/2-(f.padding||0),y:e.y-p/2},u=a.collapsed?90:180,i=a.show&&v(c.y),(e=l.labelIcon)||(l.labelIcon=e=h.path(h.symbols[f.type](f.x||0,f.y||0,n,p)).addClass("highcharts-label-icon").add(a.group)),e.attr({y:i?0:-9999}),h.styledMode||e.attr({cursor:"pointer",fill:b(a.color,"#666666"),"stroke-width":1,stroke:f.lineColor,strokeWidth:f.lineWidth||0}),e[o?"attr":"animate"]({translateX:c.x,translateY:c.y,rotation:u}),u=g+(t?"expanded":"collapsed"),s.addClass(g+(t?"collapsed":"expanded")).removeClass(u),m||s.css({cursor:"pointer"}),[s,r.treeGrid.labelIcon].forEach(function(e){e&&!e.attachedTreeGridEvents&&(x(e.element,"mouseover",function(){var e;(e=s).addClass("highcharts-treegrid-node-active"),e.renderer.styledMode||e.css({textDecoration:"underline"})}),x(e.element,"mouseout",function(){var e,t;e=s,t=k((t=d).style)?t.style:{},e.removeClass("highcharts-treegrid-node-active"),e.renderer.styledMode||e.css({textDecoration:t.textDecoration})}),x(e.element,"click",function(){r.treeGrid.toggleCollapse()}),e.attachedTreeGridEvents=!0)}))}e.compose=function(e){t||(x(e,"init",i),a(e.prototype,"getLabelPosition",r),a(e.prototype,"renderLabel",o),e.prototype.collapse=function(e){this.treeGrid.collapse(e)},e.prototype.expand=function(e){this.treeGrid.expand(e)},e.prototype.toggleCollapse=function(e){this.treeGrid.toggleCollapse(e)},t=!0)};var n=(s.prototype.collapse=function(e){var t=this.tick,i=t.axis,r=i.brokenAxis;r&&i.treeGrid.mapOfPosToGridNode&&(t=t.pos,t=i.treeGrid.mapOfPosToGridNode[t],t=i.treeGrid.collapse(t),r.setBreaks(t,b(e,!0)))},s.prototype.expand=function(e){var t=this.tick,i=t.axis,r=i.brokenAxis;r&&i.treeGrid.mapOfPosToGridNode&&(t=t.pos,t=i.treeGrid.mapOfPosToGridNode[t],t=i.treeGrid.expand(t),r.setBreaks(t,b(e,!0)))},s.prototype.toggleCollapse=function(e){var t=this.tick,i=t.axis,r=i.brokenAxis;r&&i.treeGrid.mapOfPosToGridNode&&(t=t.pos,t=i.treeGrid.mapOfPosToGridNode[t],t=i.treeGrid.toggleCollapse(t),r.setBreaks(t,b(e,!0)))},s);function s(e){this.tick=e}e.Additions=n}(t=t||{}),t}),t(e,"Series/TreeUtilities.js",[e["Core/Color/Color.js"],e["Core/Utilities.js"]],function(u,e){var p=e.extend,l=e.isArray,d=e.isNumber,c=e.isObject,h=e.merge,g=e.pick;return{getColor:function(e,t){var i,r,o,n=t.index,s=t.mapOptionsToLevel,a=t.parentColor,l=t.parentColorIndex,d=t.series,c=t.colors,p=t.siblings,h=d.points,f=d.chart.options.chart;return e&&(h=h[e.i],e=s[e.level]||{},h&&e.colorByPoint&&(r=h.index%(c?c.length:f.colorCount),i=c&&c[r]),d.chart.styledMode||(o=g(h&&h.options.color,e&&e.color,i,a&&(o=a,(a=e&&e.colorVariation)&&"brightness"===a.key&&n&&p?u.parse(o).brighten(a.to*(n/p)).get():o),d.color)),r=g(h&&h.options.colorIndex,e&&e.colorIndex,r,l,t.colorIndex)),{color:o,colorIndex:r}},getLevelOptions:function(e){var o,t,i,n,r,s,a=null;if(c(e))for(a={},n=d(e.from)?e.from:1,s=e.levels,t={},o=c(e.defaults)?e.defaults:{},l(s)&&(t=s.reduce(function(e,t){var i,r;return c(t)&&d(t.level)&&(r=h({},t),i=g(r.levelIsConstant,o.levelIsConstant),delete r.levelIsConstant,delete r.level,i=t.level+(i?0:n-1),c(e[i])?h(!0,e[i],r):e[i]=r),e},{})),r=d(e.to)?e.to:1,i=0;i<=r;i++)a[i]=h({},o,c(t[i])?t[i]:{});return a},setTreeValues:function r(o,n){var e=n.before,t=n.idRoot,i=n.mapIdToNode[t],s=!1!==n.levelIsConstant,a=n.points[o.i],l=a&&a.options||{},d=[],c=0;o.levelDynamic=o.level-(s?0:i.level),o.name=g(a&&a.name,""),o.visible=t===o.id||!0===n.visible,(o="function"==typeof e?e(o,n):o).children.forEach(function(e,t){var i=p({},n);p(i,{index:t,siblings:o.children.length,visible:o.visible}),e=r(e,i),d.push(e),e.visible&&(c+=e.val)});l=g(l.value,c);return o.visible=0<=l&&(0<c||o.visible),o.children=d,o.childrenTotal=c,o.isLeaf=o.visible&&!c,o.val=l,o},updateRootId:function(e){var t;return c(e)&&(t=c(e.options)?e.options:{},t=g(e.rootNode,t.rootId,""),c(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}}}),t(e,"Core/Axis/TreeGridAxis.js",[e["Core/Axis/BrokenAxis.js"],e["Core/Axis/GridAxis.js"],e["Gantt/Tree.js"],e["Core/Axis/TreeGridTick.js"],e["Series/TreeUtilities.js"],e["Core/Utilities.js"]],function(h,f,u,g,e,t){var i,m=e.getLevelOptions,x=t.addEvent,k=t.find,r=t.fireEvent,v=t.isArray,b=t.isObject,y=t.isString,A=t.merge,P=t.pick,G=t.wrap;return function(e){var l;function o(e,t){var i=e.collapseEnd||0,e=e.collapseStart||0;return t<=i&&(e-=.5),{from:e,to:i,showPoints:!1}}function d(e,t,i){var a,s=[],r=[],l={},d="boolean"==typeof t&&t,c={},p=-1,t={after:function(e){var e=c[e.pos],t=0,i=0;e.children.forEach(function(e){i+=(e.descendants||0)+1,t=Math.max((e.height||0)+1,t)}),e.descendants=i,e.height=t,e.collapsed&&r.push(e)},before:function(e){var t,i,r=b(e.data,!0)?e.data:{},o=y(r.name)?r.name:"",n=l[e.parent],n=b(n,!0)?c[n.pos]:null;d&&b(n,!0)&&(t=k(n.children,function(e){return e.name===o}))?(i=t.pos,t.nodes.push(e)):i=p++,c[i]||(c[i]=t={depth:n?n.depth+1:0,name:o,id:r.id,nodes:[e],children:[],pos:i},-1!==i&&s.push(o),b(n,!0)&&n.children.push(t)),y(e.id)&&(l[e.id]=e),t&&!0===r.collapsed&&(t.collapsed=!0),e.pos=i}},t=u.getTree(e,t);function h(e,i,t){var r=e.nodes,o=i+(-1===i?0:a-1),n=(o-i)/2,s=i+n;return r.forEach(function(e){var t=e.data;b(t,!0)&&(t.y=i+(t.seriesIndex||0),delete t.seriesIndex),e.pos=s}),(t[s]=e).pos=s,e.tickmarkOffset=.5+n,e.collapseStart=o+.5,e.children.forEach(function(e){h(e,o+1,t),o=(e.collapseEnd||0)-.5}),e.collapseEnd=o+.5,t}return a=i,c=h(c[-1],-1,{}),{categories:s,mapOfIdToNode:l,mapOfPosToGridNode:c,collapsedNodes:r,tree:t}}function n(l){l.target.axes.filter(function(e){return"treegrid"===e.options.type}).forEach(function(e){var i,t=e.options||{},r=t.labels,o=t.uniqueNames,n=t.max,t=!e.treeGrid.mapOfPosToGridNode||e.series.some(function(e){return!e.hasRendered||e.isDirtyData||e.isDirty}),s=0;if(t){if(i=e.series.reduce(function(t,i){return i.visible&&((i.options.data||[]).forEach(function(e){i.options.keys&&i.options.keys.length&&(e=i.pointClass.prototype.optionsToObject.call({series:i},e),i.pointClass.setGanttPointAliases(e)),b(e,!0)&&(e.seriesIndex=s,t.push(e))}),!0===o&&s++),t},[]),n&&i.length<n)for(var a=i.length;a<=n;a++)i.push({name:a+"​"});t=d(i,o||!1,!0===o?s:1),e.categories=t.categories,e.treeGrid.mapOfPosToGridNode=t.mapOfPosToGridNode,e.hasNames=!0,e.treeGrid.tree=t.tree,e.series.forEach(function(e){var t=(e.options.data||[]).map(function(t){return v(t)&&e.options.keys&&e.options.keys.length&&i.forEach(function(e){0<=t.indexOf(e.x)&&0<=t.indexOf(e.x2)&&(t=e)}),b(t,!0)?A(t):t});e.visible&&e.setData(t,!1)}),e.treeGrid.mapOptionsToLevel=m({defaults:r,from:1,levels:r&&r.levels,to:e.treeGrid.tree&&e.treeGrid.tree.height}),"beforeRender"===l.type&&(e.treeGrid.collapsedNodes=t.collapsedNodes)}})}function s(e,t){var i,r=this,o=r.treeGrid.mapOptionsToLevel||{},n="treegrid"===r.options.type,s=r.ticks,a=s[t];n&&r.treeGrid.mapOfPosToGridNode?((o=o[(n=r.treeGrid.mapOfPosToGridNode[t]).depth])&&(i={labels:o}),!a&&l?s[t]=a=new l(r,t,void 0,void 0,{category:n.name,tickmarkOffset:n.tickmarkOffset,options:i}):(a.parameters.category=n.name,a.options=i,a.addLabel())):e.apply(r,Array.prototype.slice.call(arguments,1))}function a(e,t,i){var r=this,o="treegrid"===i.type;r.treeGrid||(r.treeGrid=new p(r)),o&&(x(t,"beforeRender",n),x(t,"beforeRedraw",n),x(t,"addSeries",function(e){e.options.data&&(e=d(e.options.data,i.uniqueNames||!1,1),r.treeGrid.collapsedNodes=(r.treeGrid.collapsedNodes||[]).concat(e.collapsedNodes))}),x(r,"foundExtremes",function(){r.treeGrid.collapsedNodes&&r.treeGrid.collapsedNodes.forEach(function(t){var e=r.treeGrid.collapse(t);r.brokenAxis&&(r.brokenAxis.setBreaks(e,!1),r.treeGrid.collapsedNodes&&(r.treeGrid.collapsedNodes=r.treeGrid.collapsedNodes.filter(function(e){return t.collapseStart!==e.collapseStart||t.collapseEnd!==e.collapseEnd})))})}),x(r,"afterBreaks",function(){"yAxis"===r.coll&&!r.staticScale&&r.chart.options.chart.height&&(r.isDirty=!0)}),i=A({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},i,{reversed:!0,grid:{columns:void 0}})),e.apply(r,[t,i]),o&&(r.hasNames=!0,r.options.showLastLabel=!0)}function c(e){var t=this,i=t.options;"treegrid"===i.type?(t.min=P(t.userMin,i.min,t.dataMin),t.max=P(t.userMax,i.max,t.dataMax),r(t,"foundExtremes"),t.setAxisTranslation(),t.tickmarkOffset=.5,t.tickInterval=1,t.tickPositions=t.treeGrid.mapOfPosToGridNode?t.treeGrid.getTickPositions():[]):e.apply(t,Array.prototype.slice.call(arguments,1))}e.compose=function(e,t,i,r){return-1===e.keepProps.indexOf("treeGrid")&&(e.keepProps.push("treeGrid"),l=r,G(e.prototype,"generateTick",s),G(e.prototype,"init",a),G(e.prototype,"setTickInterval",c),e.prototype.utils={getNode:u.getNode},f.compose(e,t,r),h.compose(e,i),g.compose(r)),e};var p=(t.prototype.setCollapsedStatus=function(r){var e=this.axis,o=e.chart;e.series.forEach(function(e){var t,i=e.options.data;r.id&&i&&(t=o.get(r.id),e=i[e.data.indexOf(t)],t&&e&&(t.collapsed=r.collapsed,e.collapsed=r.collapsed))})},t.prototype.collapse=function(e){var t=this.axis,i=t.options.breaks||[],r=o(e,t.max);return i.push(r),e.collapsed=!0,t.treeGrid.setCollapsedStatus(e),i},t.prototype.expand=function(e){var t=this.axis,i=t.options.breaks||[],r=o(e,t.max);return e.collapsed=!1,t.treeGrid.setCollapsedStatus(e),i.reduce(function(e,t){return t.to===r.to&&t.from===r.from||e.push(t),e},[])},t.prototype.getTickPositions=function(){var i=this.axis,r=Math.floor(i.min/i.tickInterval)*i.tickInterval,o=Math.ceil(i.max/i.tickInterval)*i.tickInterval;return Object.keys(i.treeGrid.mapOfPosToGridNode||{}).reduce(function(e,t){t=+t;return!(r<=t&&t<=o)||i.brokenAxis&&i.brokenAxis.isInAnyBreak(t)||e.push(t),e},[])},t.prototype.isCollapsed=function(e){var t=this.axis,i=t.options.breaks||[],r=o(e,t.max);return i.some(function(e){return e.from===r.from&&e.to===r.to})},t.prototype.toggleCollapse=function(e){return this.isCollapsed(e)?this.expand(e):this.collapse(e)},t);function t(e){this.axis=e}e.Additions=p}(i=i||{}),i}),t(e,"masters/modules/treegrid.src.js",[e["Core/Globals.js"],e["Core/Axis/TreeGridAxis.js"]],function(e,t){t.compose(e.Axis,e.Chart,e.Series,e.Tick)})});