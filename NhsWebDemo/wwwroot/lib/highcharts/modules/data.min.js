"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/data",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){function t(e,t,r,o){e.hasOwnProperty(t)||(e[t]=o.apply(null,r))}t(e=e?e._modules:{},"Core/HttpUtilities.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],function(e,t){var a=e.doc,s=t.createElement,n=t.discardElement,i=t.merge,l=t.objectEach,r={ajax:function(e){var t=i(!0,{url:!1,type:"get",dataType:"json",success:!1,error:!1,data:!1,headers:{}},e);e={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"};var r=new XMLHttpRequest;if(!t.url)return!1;r.open(t.type.toUpperCase(),t.url,!0),t.headers["Content-Type"]||r.setRequestHeader("Content-Type",e[t.dataType]||e.text),l(t.headers,function(e,t){r.setRequestHeader(t,e)}),r.onreadystatechange=function(){if(4===r.readyState){if(200===r.status){var e=r.responseText;if("json"===t.dataType)try{e=JSON.parse(e)}catch(e){return void(t.error&&t.error(r,e))}return t.success&&t.success(e)}t.error&&t.error(r,r.responseText)}};try{t.data=JSON.stringify(t.data)}catch(e){}r.send(t.data||!0)},getJSON:function(e,t){r.ajax({url:e,success:t,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(e,t,r){var o=s("form",i({method:"post",action:e,enctype:"multipart/form-data"},r),{display:"none"},a.body);l(t,function(e,t){s("input",{type:"hidden",name:t,value:e},null,o)}),o.submit(),n(o)}};return r}),t(e,"Extensions/Data.js",[e["Core/Chart/Chart.js"],e["Core/Globals.js"],e["Core/HttpUtilities.js"],e["Core/Series/Point.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,n,t,i,r,o){var a=n.doc,p=t.ajax,c=r.seriesTypes;t=o.addEvent;var m=o.defined,l=o.extend,x=o.fireEvent,g=o.isNumber,f=o.merge,v=o.objectEach,u=o.pick,y=o.splat;function s(e,t,r){this.options=this.rawColumns=this.firstRowAsNames=this.chartOptions=this.chart=void 0,this.dateFormats={"YYYY/mm/dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{1,2})$/,parser:function(e){return e?Date.UTC(+e[1],e[2]-1,+e[3]):NaN}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return e?Date.UTC(+e[3],e[2]-1,+e[1]):NaN},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return e?Date.UTC(+e[3],e[1]-1,+e[2]):NaN}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){if(!e)return NaN;var t=(t=+e[3])>(new Date).getFullYear()-2e3?t+1900:t+2e3;return Date.UTC(t,e[2]-1,+e[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){return e?Date.UTC(+e[3]+2e3,e[1]-1,+e[2]):NaN}}},this.init(e,t,r)}s.prototype.init=function(e,t,r){var o,a=e.decimalPoint;t&&(this.chartOptions=t),r&&(this.chart=r),"."!==a&&","!==a&&(a=void 0),this.options=e,this.columns=e.columns||this.rowsToColumns(e.rows)||[],this.firstRowAsNames=u(e.firstRowAsNames,this.firstRowAsNames,!0),this.decimalRegex=a&&new RegExp("^(-?[0-9]+)"+a+"([0-9]+)$"),this.rawColumns=[],this.columns.length&&(this.dataFound(),o=!0),this.hasURLOption(e)&&(clearTimeout(this.liveDataTimeout),o=!1),!(o=(o=(o=(o=o||this.fetchLiveData())||!!this.parseCSV().length)||!!this.parseTable().length)||this.parseGoogleSpreadsheet())&&e.afterComplete&&e.afterComplete()},s.prototype.hasURLOption=function(e){return!(!e||!(e.rowsURL||e.csvURL||e.columnsURL))},s.prototype.getColumnDistribution=function(){function n(e){return(c[e||"line"].prototype.pointArrayMap||[0]).length}var i,l=this.chartOptions,e=this.options,t=[],u=l&&l.chart&&l.chart.type,h=[],d=[],p=0,e=e&&e.seriesMapping||l&&l.series&&l.series.map(function(){return{x:0}})||[];(l&&l.series||[]).forEach(function(e){h.push(n(e.type||u))}),e.forEach(function(e){t.push(e.x||0)}),0===t.length&&t.push(0),e.forEach(function(e){var r=new C,t=h[p]||n(u),o=(l&&l.series||[])[p]||{},a=c[o.type||u||"line"].prototype.pointArrayMap,s=a||["y"];for(!m(e.x)&&!o.isCartesian&&a||r.addColumnReader(e.x,"x"),v(e,function(e,t){"x"!==t&&r.addColumnReader(e,t)}),i=0;i<t;i++)r.hasReader(s[i])||r.addColumnReader(void 0,s[i]);d.push(r),p++}),e=c[u||"line"].prototype.pointArrayMap,this.valueCount={global:n(u),xColumns:t,individual:h,seriesBuilders:d,globalPointArrayMap:e=void 0===e?["y"]:e}},s.prototype.dataFound=function(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns)),this.getColumnDistribution(),this.parseTypes(),!1!==this.parsed()&&this.complete()},s.prototype.parseCSV=function(e){var u=this,h=e||this.options,t=h.csv;e=void 0!==h.startRow&&h.startRow?h.startRow:0;var r,i,l,o=h.endRow||Number.MAX_VALUE,m=void 0!==h.startColumn&&h.startColumn?h.startColumn:0,f=h.endColumn||Number.MAX_VALUE,a=0,g=[],d={",":0,";":0,"\t":0},v=this.columns=[];if(t=t&&h.beforeParse?h.beforeParse.call(this,t):t){t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(h.lineDelimiter||"\n");(!e||e<0)&&(e=0),(!o||o>=t.length)&&(o=t.length-1);for(var y=h.itemDelimiter||(y=null,l=i=0,(r=t).some(function(e,t){var r=!1,o="";if(13<t)return!0;for(var a=0;a<e.length;a++){t=e[a];var s=e[a+1],n=e[a-1];if("#"===t)break;if('"'===t)if(r){if('"'!==n&&'"'!==s){for(;" "===s&&a<e.length;)s=e[++a];void 0!==d[s]&&d[s]++,r=!1}}else r=!0;else void 0!==d[t]?(o=o.trim(),isNaN(Date.parse(o))&&!isNaN(o)&&isFinite(o)||d[t]++,o=""):o+=t;","===t&&l++,"."===t&&i++}}),r=d[";"]>d[","]?";":",",h.decimalPoint||(h.decimalPoint=l<i?".":",",u.decimalRegex=new RegExp("^(-?[0-9]+)"+h.decimalPoint+"([0-9]+)$")),r),s=0,a=e;a<=o;a++)"#"===t[a][0]?s++:function(t,e,r,o){function a(e){l=t[e],u=t[e-1],h=t[e+1]}function s(e){g.length<c+1&&g.push([e]),g[c][g[c].length-1]!==e&&g[c].push(e)}function n(){p<m||f<p?(++p,d=""):(!isNaN(parseFloat(d))&&isFinite(d)?(d=parseFloat(d),s("number")):isNaN(Date.parse(d))?s("string"):(d=d.replace(/\//g,"-"),s("date")),v.length<c+1&&v.push([]),r||(v[c][e]=d),d="",++c,++p)}var i=0,l="",u="",h="",d="",p=0,c=0;if(t.trim().length&&"#"!==t.trim()[0]){for(;i<t.length;i++)if(a(i),'"'===l)for(a(++i);i<t.length&&('"'!==l||'"'===u||'"'===h);)('"'!==l||'"'===l&&'"'!==u)&&(d+=l),a(++i);else o&&o[l]?o[l](l,d)&&n():l===y?n():d+=l;n()}}(t[a],a-e-s);h.columnTypes&&0!==h.columnTypes.length||!g.length||!g[0].length||"date"!==g[0][1]||h.dateFormat||(h.dateFormat=function(e,t){var r=[],o=0,a=!1,s=[],n=[];for((!t||t>e.length)&&(t=e.length);o<t;o++)if(void 0!==e[o]&&e[o]&&e[o].length)for(var i=e[o].trim().replace(/\//g," ").replace(/\-/g," ").replace(/\./g," ").split(" "),r=["","",""],l=0;l<i.length;l++)l<r.length&&(i[l]=parseInt(i[l],10),i[l]&&(n[l]=(!n[l]||n[l]<i[l]?i:n)[l],void 0!==s[l]?s[l]!==i[l]&&(s[l]=!1):s[l]=i[l],31<i[l]?r[l]=i[l]<100?"YY":"YYYY":12<i[l]&&i[l]<=31?(r[l]="dd",a=!0):r[l].length||(r[l]="mm")));if(a){for(l=0;l<s.length;l++)!1!==s[l]?12<n[l]&&"YY"!==r[l]&&"YYYY"!==r[l]&&(r[l]="YY"):12<n[l]&&"mm"===r[l]&&(r[l]="dd");return 3===r.length&&"dd"===r[1]&&"dd"===r[2]&&(r[2]="YY"),e=r.join("/"),(h.dateFormats||u.dateFormats)[e]?e:(x("deduceDateFailed"),"YYYY/mm/dd")}return"YYYY/mm/dd"}(v[0])),this.dataFound()}return v},s.prototype.parseTable=function(){var e=this.options,t=e.table,s=this.columns||[],n=e.startRow||0,r=e.endRow||Number.MAX_VALUE,i=e.startColumn||0,l=e.endColumn||Number.MAX_VALUE;return t&&("string"==typeof t&&(t=a.getElementById(t)),[].forEach.call(t.getElementsByTagName("tr"),function(e,a){n<=a&&a<=r&&[].forEach.call(e.children,function(e,t){var r=s[t-i],o=1;if(("TD"===e.tagName||"TH"===e.tagName)&&i<=t&&t<=l)for(s[t-i]||(s[t-i]=[]),s[t-i][a-n]=e.innerHTML;o<=a-n&&void 0===r[a-n-o];)r[a-n-o]=null,o++})}),this.dataFound()),s},s.prototype.fetchLiveData=function(){var n=this,i=this.chart,l=this.options,u=0,h=l.enablePolling,d=1e3*(l.dataRefreshRate||2),t=f(l);return!!this.hasURLOption(l)&&(d<1e3&&(d=1e3),delete l.csvURL,delete l.rowsURL,delete l.columnsURL,function a(s){function e(e,t,r){function o(){h&&i.liveDataURL===e&&(n.liveDataTimeout=setTimeout(a,d))}return e&&/^(http|\/|\.\/|\.\.\/)/.test(e)?(s&&(clearTimeout(n.liveDataTimeout),i.liveDataURL=e),p({url:e,dataType:r||"json",success:function(e){i&&i.series&&t(e),o()},error:function(e,t){return++u<3&&o(),l.error&&l.error(t,e)}}),1):(e&&l.error&&l.error("Invalid URL"),0)}e(t.csvURL,function(e){i.update({data:{csv:e}})},"text")||e(t.rowsURL,function(e){i.update({data:{rows:e}})})||e(t.columnsURL,function(e){i.update({data:{columns:e}})})}(!0),this.hasURLOption(l))},s.prototype.parseGoogleSpreadsheet=function(){var t=this,o=this.options,a=o.googleSpreadsheetKey,s=this.chart,n=Math.max(1e3*(o.dataRefreshRate||2),4e3),i=function(){if(o.googleSpreadsheetRange)return o.googleSpreadsheetRange;var e=("ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(o.startColumn||0)||"A")+((o.startRow||0)+1),t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(u(o.endColumn,-1))||"ZZ";return m(o.endRow)&&(t+=o.endRow+1),e+":"+t};return a&&(delete o.googleSpreadsheetKey,function t(r){var e=["https://sheets.googleapis.com/v4/spreadsheets",a,"values",i(),"?alt=json&majorDimension=COLUMNS&valueRenderOption=UNFORMATTED_VALUE&dateTimeRenderOption=FORMATTED_STRING&key="+o.googleAPIKey].join("/");p({url:e,dataType:"json",success:function(e){r(e),o.enablePolling&&setTimeout(function(){t(r)},n)},error:function(e,t){return o.error&&o.error(t,e)}})}(function(e){if(!(e=e.values)||0===e.length)return!1;var r=e.reduce(function(e,t){return Math.max(e,t.length)},0);e.forEach(function(e){for(var t=0;t<r;t++)void 0===e[t]&&(e[t]=null)}),s&&s.series?s.update({data:{columns:e}}):(t.columns=e,t.dataFound())})),!1},s.prototype.trim=function(e,t){return"string"==typeof e&&(e=e.replace(/^\s+|\s+$/g,""),t&&/^[0-9\s]+$/.test(e)&&(e=e.replace(/\s/g,"")),this.decimalRegex&&(e=e.replace(this.decimalRegex,"$1.$2"))),e},s.prototype.parseTypes=function(){for(var e=this.columns,t=e.length;t--;)this.parseColumn(e[t],t)},s.prototype.parseColumn=function(e,t){var r,o,a=this.rawColumns,s=this.columns,n=e.length,i=this.firstRowAsNames,l=-1!==this.valueCount.xColumns.indexOf(t),u=[],h=this.chartOptions,d=(this.options.columnTypes||[])[t],h=l&&(h&&h.xAxis&&"category"===y(h.xAxis)[0].type||"string"===d);for(a[t]||(a[t]=[]);n--;){var p=u[n]||e[n],c=this.trim(p),m=this.trim(p,!0),f=parseFloat(m);void 0===a[t][n]&&(a[t][n]=c),h||0===n&&i?e[n]=""+c:+m===f?(31536e6<(e[n]=f)&&"float"!==d?e.isDatetime=!0:e.isNumeric=!0,void 0!==e[n+1]&&(o=f>e[n+1])):(c&&c.length&&(r=this.parseDate(p)),l&&g(r)&&"float"!==d?(u[n]=p,e[n]=r,e.isDatetime=!0,void 0!==e[n+1]&&((p=r>e[n+1])!==o&&void 0!==o&&(this.alternativeFormat?(this.dateFormat=this.alternativeFormat,n=e.length,this.alternativeFormat=this.dateFormats[this.dateFormat].alternative):e.unsorted=!0),o=p)):(e[n]=""===c?null:c,0!==n&&(e.isDatetime||e.isNumeric)&&(e.mixed=!0)))}if(l&&e.mixed&&(s[t]=a[t]),l&&o&&this.options.sort)for(t=0;t<s.length;t++)s[t].reverse(),i&&s[t].unshift(s[t].pop())},s.prototype.parseDate=function(e){var t,r,o=this.options.parseDate,a=this.options.dateFormat||this.dateFormat;if(o)var s=o(e);else if("string"==typeof e){if(a)(o=this.dateFormats[a])||(o=this.dateFormats["YYYY/mm/dd"]),(r=e.match(o.regex))&&(s=o.parser(r));else for(t in this.dateFormats)if(o=this.dateFormats[t],r=e.match(o.regex)){this.dateFormat=t,this.alternativeFormat=o.alternative,s=o.parser(r);break}r||(e.match(/:.+(GMT|UTC|[Z+-])/)&&(e=e.replace(/\s*(?:GMT|UTC)?([+-])(\d\d)(\d\d)$/,"$1$2:$3").replace(/(?:\s+|GMT|UTC)([+-])/,"$1").replace(/(\d)\s*(?:GMT|UTC|Z)$/,"$1+00:00")),"object"==typeof(r=Date.parse(e))&&null!==r&&r.getTime?s=r.getTime()-6e4*r.getTimezoneOffset():g(r)&&(s=r-6e4*new Date(r).getTimezoneOffset()))}return s},s.prototype.rowsToColumns=function(e){if(e)for(var t=[],r=e.length,o=0;o<r;o++)for(var a=e[o].length,s=0;s<a;s++)t[s]||(t[s]=[]),t[s][o]=e[o][s];return t},s.prototype.getData=function(){if(this.columns)return this.rowsToColumns(this.columns).slice(1)},s.prototype.parsed=function(){if(this.options.parsed)return this.options.parsed.call(this,this.columns)},s.prototype.getFreeIndexes=function(e,t){var r=[],o=[];for(s=0;s<e;s+=1)r.push(!0);for(e=0;e<t.length;e+=1)for(var a=t[e].getReferencedColumnIndexes(),s=0;s<a.length;s+=1)r[a[s]]=!1;for(s=0;s<r.length;s+=1)r[s]&&o.push(s);return o},s.prototype.complete=function(){var e,t,r=this.columns,o=this.options,a=[];if(o.complete||o.afterComplete){if(this.firstRowAsNames)for(i=0;i<r.length;i++){var s=r[i];m(s.name)||(s.name=u(s.shift(),"").toString())}for(var s=[],n=this.getFreeIndexes(r.length,this.valueCount.seriesBuilders),i=0;i<this.valueCount.seriesBuilders.length;i++){var l=this.valueCount.seriesBuilders[i];l.populateColumns(n)&&a.push(l)}for(;0<n.length;){for((l=new C).addColumnReader(0,"x"),-1!==(i=n.indexOf(0))&&n.splice(i,1),i=0;i<this.valueCount.global;i++)l.addColumnReader(void 0,this.valueCount.globalPointArrayMap[i]);l.populateColumns(n)&&a.push(l)}if(0<a.length&&0<a[0].readers.length&&(void 0!==(l=r[a[0].readers[0].columnIndex])&&(l.isDatetime?e="datetime":l.isNumeric||(e="category"))),"category"===e)for(i=0;i<a.length;i++)for(l=a[i],n=0;n<l.readers.length;n++)"x"===l.readers[n].configName&&(l.readers[n].configName="name");for(i=0;i<a.length;i++){for(l=a[i],n=[],t=0;t<r[0].length;t++)n[t]=l.read(r,t);s[i]={data:n},l.name&&(s[i].name=l.name),"category"===e&&(s[i].turboThreshold=0)}r={series:s},e&&(r.xAxis={type:e},"category"===e&&(r.xAxis.uniqueNames=!1)),o.complete&&o.complete(r),o.afterComplete&&o.afterComplete(r)}},s.prototype.update=function(e,t){var r=this.chart;e&&(e.afterComplete=function(e){e&&(e.xAxis&&r.xAxis[0]&&e.xAxis.type===r.xAxis[0].options.type&&delete e.xAxis,r.update(e,t,!0))},f(!0,r.options.data,e),this.init(r.options.data))},o=s,n.data=function(e,t,r){return new n.Data(e,t,r)},t(e,"init",function(e){var o=this,a=e.args[0]||{},s=e.args[1];a&&a.data&&!o.hasDataDef&&(o.hasDataDef=!0,o.data=new n.Data(l(a.data,{afterComplete:function(e){var t;if(Object.hasOwnProperty.call(a,"series"))if("object"==typeof a.series)for(t=Math.max(a.series.length,e&&e.series?e.series.length:0);t--;){var r=a.series[t]||{};a.series[t]=f(r,e&&e.series?e.series[t]:{})}else delete a.series;a=f(e,a),o.init(a,s)}}),a,o),e.preventDefault())});var C=(h.prototype.populateColumns=function(t){var r=!0;return this.readers.forEach(function(e){void 0===e.columnIndex&&(e.columnIndex=t.shift())}),this.readers.forEach(function(e){void 0===e.columnIndex&&(r=!1)}),r},h.prototype.read=function(r,o){var e,a=this.pointIsArray,s=a?[]:{};return this.readers.forEach(function(e){var t=r[e.columnIndex][o];a?s.push(t):0<e.configName.indexOf(".")?i.prototype.setNestedProperty(s,t,e.configName):s[e.configName]=t}),void 0===this.name&&2<=this.readers.length&&(2<=(e=this.getReferencedColumnIndexes()).length&&(e.shift(),e.sort(function(e,t){return e-t}),this.name=r[e.shift()].name)),s},h.prototype.addColumnReader=function(e,t){this.readers.push({columnIndex:e,configName:t}),"x"!==t&&"y"!==t&&void 0!==t&&(this.pointIsArray=!1)},h.prototype.getReferencedColumnIndexes=function(){for(var e=[],t=0;t<this.readers.length;t+=1){var r=this.readers[t];void 0!==r.columnIndex&&e.push(r.columnIndex)}return e},h.prototype.hasReader=function(e){for(var t=0;t<this.readers.length;t+=1)if(this.readers[t].configName===e)return!0},h);function h(){this.readers=[],this.pointIsArray=!0,this.name=void 0}return n.Data=o,n.Data}),t(e,"masters/modules/data.src.js",[e["Core/Globals.js"],e["Core/HttpUtilities.js"],e["Extensions/Data.js"]],function(e,t,r){e.ajax=t.ajax,e.getJSON=t.getJSON,e.post=t.post,e.Data=r,e.HttpUtilities=t})});