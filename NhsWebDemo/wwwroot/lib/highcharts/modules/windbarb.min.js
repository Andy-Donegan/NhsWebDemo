"use strict";!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/modules/windbarb",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function o(t,o,e,r){t.hasOwnProperty(o)||(t[o]=r.apply(null,e))}o(t=t?t._modules:{},"Series/OnSeriesComposition.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(t,o,e){var r,i,g=t.prototype,n=o.prototype,m=e.defined,x=e.stableSort;function s(){return n.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this)}function a(){g.translate.apply(this);var r,t,i=this,o=i.options,e=i.chart,n=i.points,s=o.onSeries,a=(s=s&&e.get(s))&&s.options.step,p=s&&s.points,l=e.inverted,u=i.xAxis,h=i.yAxis,e=n.length-1,o=o.onKey||"y",c=p&&p.length,f=0;if(s&&s.visible&&c){var f=(s.pointXOffset||0)+(s.barW||0)/2,d=s.currentDataGrouping,y=p[c-1].x+(d?d.totalRange:0);for(x(n,function(t,o){return t.x-o.x}),o="plot"+o[0].toUpperCase()+o.substr(1);c--&&n[e];){var b,v=p[c],d=n[e];if(d.y=v.y,v.x<=d.x&&void 0!==v[o])if(d.x<=y&&(d.plotY=v[o],v.x<d.x&&!a&&(t=p[c+1])&&void 0!==t[o])&&(b=(d.x-v.x)/(t.x-v.x),d.plotY+=b*(t[o]-v[o]),d.y+=b*(t.y-v.y)),c++,--e<0)break}}n.forEach(function(t,o){var e;t.plotX+=f,void 0!==t.plotY&&!l||(0<=t.plotX&&t.plotX<=u.len?l?(t.plotY=u.translate(t.x,0,1,0,1),t.plotX=m(t.y)?h.translate(t.y,0,0,0,1):0):t.plotY=(u.opposite?0:i.yAxis.len)+u.offset:t.shapeArgs={}),(r=n[o-1])&&r.plotX===t.plotX&&(void 0===r.stackIndex&&(r.stackIndex=0),e=r.stackIndex+1),t.stackIndex=e}),this.onSeries=s}return e=r=r||{},i=[],e.compose=function(t){var o;return-1===i.indexOf(t)&&(i.push(t),(o=t.prototype).getPlotBox=s,o.translate=a),t},e.getPlotBox=s,e.translate=a,r}),o(t,"Series/Windbarb/WindbarbPoint.js",[t["Core/Utilities.js"],t["Series/Column/ColumnSeries.js"]],function(t,o){var r,e,i=this&&this.__extends||(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),n=t.isNumber;return e=o.prototype.pointClass,i(s,e),s.prototype.isValid=function(){return n(this.value)&&0<=this.value},s;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.beaufort=void 0,t.beaufortLevel=void 0,t.direction=void 0,t.options=void 0,t.series=void 0,t}}),o(t,"Series/Windbarb/WindbarbSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Series/OnSeriesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Series/Windbarb/WindbarbPoint.js"]],function(t,s,o,e,r,i){var n,a=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),p=t.animObject;t=s.noop;var l,u=e.series,h=e.seriesTypes.column,c=r.extend,f=r.merge,d=r.pick;function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return a(y,l=h),y.registerApproximation=function(){s.approximations&&!s.approximations.windbarb&&(s.approximations.windbarb=function(t,o){for(var e=0,r=0,i=t.length,n=0;n<i;n++)e+=t[n]*Math.cos(o[n]*s.deg2rad),r+=t[n]*Math.sin(o[n]*s.deg2rad);return[t.reduce(function(t,o){return t+o},0)/t.length,Math.atan2(r,e)/s.deg2rad]})},y.prototype.init=function(t,o){y.registerApproximation(),u.prototype.init.call(this,t,o)},y.prototype.pointAttribs=function(t,o){var e=this.options;t=t.color||this.color;var r=this.options.lineWidth;return o&&(t=e.states[o].color||t,r=(e.states[o].lineWidth||r)+(e.states[o].lineWidthPlus||0)),{stroke:t,"stroke-width":r}},y.prototype.windArrow=function(t){var o=1.943844*t.value,e=this.options.vectorLength/20,r=-10;if(t.isNull)return[];if(0===t.beaufortLevel)return this.chart.renderer.symbols.circle(-10*e,-10*e,20*e,20*e);t=[["M",0,7*e],["L",-1.5*e,7*e],["L",0,10*e],["L",1.5*e,7*e],["L",0,7*e],["L",0,-10*e]];var i=(o-o%50)/50;if(0<i)for(;i--;)t.push(-10===r?["L",0,r*e]:["M",0,r*e],["L",5*e,r*e+2],["L",0,r*e+4]),o-=50,r+=7;if(0<(i=(o-o%10)/10))for(;i--;)t.push(-10===r?["L",0,r*e]:["M",0,r*e],["L",7*e,r*e]),o-=10,r+=3;if(0<(i=(o-o%5)/5))for(;i--;)t.push(-10===r?["L",0,r*e]:["M",0,r*e],["L",4*e,r*e]),o-=5,r+=3;return t},y.prototype.drawPoints=function(){var r=this.chart,i=this.yAxis,n=r.inverted,s=this.options.vectorLength/2;this.points.forEach(function(t){var o=t.plotX,e=t.plotY;!1===this.options.clip||r.isInsidePlot(o,0)?(t.graphic||(t.graphic=this.chart.renderer.path().add(this.markerGroup).addClass("highcharts-point highcharts-color-"+d(t.colorIndex,t.series.colorIndex))),t.graphic.attr({d:this.windArrow(t),translateX:o+this.options.xOffset,translateY:e+this.options.yOffset,rotation:t.direction}),this.chart.styledMode||t.graphic.attr(this.pointAttribs(t))):t.graphic&&(t.graphic=t.graphic.destroy()),t.tooltipPos=[o+this.options.xOffset+(n&&!this.onSeries?s:0),e+this.options.yOffset-(n?0:s+i.pos-r.plotTop)]},this)},y.prototype.animate=function(t){t?this.markerGroup.attr({opacity:.01}):this.markerGroup.animate({opacity:1},p(this.options.animation))},y.prototype.markerAttribs=function(t,o){return{}},y.prototype.getExtremes=function(){return{}},y.prototype.shouldShowTooltip=function(t,o,e){return(e=void 0===e?{}:e).ignoreX=this.chart.inverted,e.ignoreY=!e.ignoreX,l.prototype.shouldShowTooltip.call(this,t,o,e)},y.defaultOptions=f(h.defaultOptions,{dataGrouping:{enabled:!0,approximation:"windbarb",groupPixelWidth:30},lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'},vectorLength:20,colorKey:"value",yOffset:-20,xOffset:0}),o.compose(r=y),c(r.prototype,{beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],beaufortName:"Calm;Light air;Light breeze;Gentle breeze;Moderate breeze;Fresh breeze;Strong breeze;Near gale;Gale;Strong gale;Storm;Violent storm;Hurricane".split(";"),parallelArrays:["x","value","direction"],pointArrayMap:["value","direction"],pointClass:i,trackerGroups:["markerGroup"],invertGroups:t,translate:function(){var e=this.beaufortFloor,r=this.beaufortName;o.translate.call(this),this.points.forEach(function(t){for(var o=0;o<e.length&&!(e[o]>t.value);o++);t.beaufortLevel=o-1,t.beaufort=r[o-1]})}}),r.registerApproximation(),e.registerSeriesType("windbarb",r),r}),o(t,"masters/modules/windbarb.src.js",[],function(){})});