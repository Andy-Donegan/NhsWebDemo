"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i))}e(t=t?t._modules:{},"Series/Funnel/FunnelSeries.js",[t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,l,i){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),D=e.noop,u=l.series,a=l.seriesTypes.pie;e=i.addEvent;var r,s=i.extend,S=i.fireEvent,c=i.isArray,p=i.merge,w=i.pick;function h(){var t=null!==r&&r.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return n(h,r=a),h.prototype.alignDataLabel=function(t,e,i,o,n){o=(p=t.series).options.reversed;var a=t.dlBox||t.shapeArgs,r=i.align,s=i.verticalAlign,l=((p.options||{}).dataLabels||{}).inside,c=p.center[1],p=p.getWidthAt((o?2*c-t.plotY:t.plotY)-a.height/2+e.height);p="middle"===s?(a.topWidth-a.bottomWidth)/4:(p-a.bottomWidth)/2;var c=a.y,h=a.x,d=w(e.height,e.getBBox().height);"middle"===s?c=a.y-a.height/2+d/2:"top"===s&&(c=a.y-a.height+d+i.padding),("top"===s&&!o||"bottom"===s&&o||"middle"===s)&&("right"===r?h=a.x-i.padding+p:"left"===r&&(h=a.x+i.padding-p)),o={x:h,y:o?c-a.height:c,width:a.bottomWidth,height:a.height},i.verticalAlign="bottom",l&&!t.visible||u.prototype.alignDataLabel.call(this,t,e,i,o,n),l&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))},h.prototype.drawDataLabels=function(){var t,e=this.data,i=this.options.dataLabels.distance,o=e.length;for(this.center[2]-=2*i;o--;){var n=e[o],a=(t=n.half)?1:-1,r=n.plotY;n.labelDistance=w(n.options.dataLabels&&n.options.dataLabels.distance,i),this.maxLabelDistance=Math.max(n.labelDistance,this.maxLabelDistance||0);var s=this.getX(r,t,n);n.labelPosition={natural:{x:0,y:r},final:{},alignment:t?"right":"left",connectorPosition:{breakAt:{x:s+(n.labelDistance-5)*a,y:r},touchingSliceAt:{x:s+n.labelDistance*a,y:r}}}}l.seriesTypes[this.options.dataLabels.inside?"column":"pie"].prototype.drawDataLabels.call(this)},h.prototype.translate=function(){function t(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}var e,i,o,n,a,r,s,l,c,p=0,h=this,d=h.chart,u=h.options,f=u.reversed,g=u.ignoreHiddenPoint,y=d.plotWidth,d=d.plotHeight,b=0,v=u.center,m=t(v[0],y),L=t(v[1],d),_=t(u.width,y),x=t(u.height,d),A=t(u.neckWidth,y),W=t(u.neckHeight,d),j=L-x/2+x-W,y=h.data,O="left"===u.dataLabels.position?1:0;h.getWidthAt=function(t){return j<t||x===W?A:A+(_-A)*(1-(t-(L-x/2))/(x-W))},h.getX=function(t,e,i){return m+(e?-1:1)*(h.getWidthAt(f?2*L-t:t)/2+i.labelDistance)},h.center=[m,L,x],h.centerX=m,y.forEach(function(t){g&&!1===t.visible||(p+=t.y)}),y.forEach(function(t){c=null,i=p?t.y/p:0,s=(n=L-x/2+b*x)+i*x,e=h.getWidthAt(n),a=(o=m-e/2)+e,e=h.getWidthAt(s),l=(r=m-e/2)+e,j<n?(o=r=m-A/2,a=l=m+A/2):j<s&&(c=s,e=h.getWidthAt(j),l=(r=m-e/2)+e,s=j),f&&(n=2*L-n,s=2*L-s,null!==c&&(c=2*L-c)),e=[["M",o,n],["L",a,n],["L",l,s]],null!==c&&e.push(["L",l,c],["L",r,c]),e.push(["L",r,s],["Z"]),t.shapeType="path",t.shapeArgs={d:e},t.percentage=100*i,t.plotX=m,t.plotY=(n+(c||s))/2,t.tooltipPos=[m,t.plotY],t.dlBox={x:r,y:n,topWidth:a-o,bottomWidth:l-r,height:Math.abs(w(c,s)-n),width:NaN},t.slice=D,t.half=O,g&&!1===t.visible||(b+=i)}),S(h,"afterTranslate")},h.prototype.sortByAngle=function(t){t.sort(function(t,e){return t.plotY-e.plotY})},h.defaultOptions=p(a.defaultOptions,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}}),s((i=h).prototype,{animate:D}),e(t,"afterHideAllOverlappingLabels",function(){this.series.forEach(function(t){var e=t.options&&t.options.dataLabels;c(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()})}),l.registerSeriesType("funnel",i),i}),e(t,"Series/Pyramid/PyramidSeries.js",[t["Series/Funnel/FunnelSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){var o,n,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=i.merge;function s(){var t=null!==n&&n.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return a(s,n=t),s.defaultOptions=r(t.defaultOptions,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),e.registerSeriesType("pyramid",i=s),i}),e(t,"masters/modules/funnel.src.js",[],function(){})});