"use strict";!function(n){"object"==typeof module&&module.exports?module.exports=n.default=n:"function"==typeof define&&define.amd?define("highcharts/modules/broken-axis",["highcharts"],function(i){return n(i),n.Highcharts=i,n}):n("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(i){i=i?i._modules:{};function n(i,n,t,s){i.hasOwnProperty(n)||(i[n]=s.apply(null,t))}n(i,"Core/Axis/BrokenAxis.js",[i["Extensions/Stacking.js"],i["Core/Utilities.js"]],function(l,i){var n,p=i.addEvent,t=i.find,v=i.fireEvent,x=i.isArray,A=i.isNumber,m=i.pick;return function(i){var s=[];function e(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function r(){var i=this;i.brokenAxis&&i.brokenAxis.hasBreaks&&(i.options.ordinal=!1)}function o(){var i=this,n=i.brokenAxis;if(n&&n.hasBreaks){for(var t=i.tickPositions,s=i.tickPositions.info,e=[],r=0;r<t.length;r++)n.isInAnyBreak(t[r])||e.push(t[r]);i.tickPositions=e,i.tickPositions.info=s}}function a(){var i=this;i.brokenAxis||(i.brokenAxis=new n(i))}function f(){var i=this,n=i.isDirty,t=i.options.connectNulls,s=i.points,e=i.xAxis,r=i.yAxis;if(n)for(var o=s.length;o--;){var a=s[o],f=!(null===a.y&&!1===t)&&(e&&e.brokenAxis&&e.brokenAxis.isInAnyBreak(a.x,!0)||r&&r.brokenAxis&&r.brokenAxis.isInAnyBreak(a.y,!0));a.visible=!f&&!1!==a.options.visible}}function u(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,m(this.pointArrayMap,["y"]))}function h(t,i){var s,e,r,o,n,a=this,f=a.points;t&&t.brokenAxis&&t.brokenAxis.hasBreaks&&(n=t.brokenAxis,i.forEach(function(i){s=n&&n.breakArray||[],e=t.isXAxis?t.min:m(a.options.threshold,t.min),f.forEach(function(n){o=m(n["stack"+i.toUpperCase()],n[i]),s.forEach(function(i){A(e)&&A(o)&&(r=!1,e<i.from&&o>i.to||e>i.from&&o<i.from?r="pointBreak":(e<i.from&&o>i.from&&o<i.to||e>i.from&&o>i.to&&o<i.from)&&(r="pointInBreak"),r&&v(t,r,{point:n,brk:i}))})})}))}function c(){var i=this.currentDataGrouping,i=i&&i.gapSize,n=this.points.slice(),t=this.yAxis,s=this.options.gapSize,e=n.length-1;if(s&&0<e){"value"!==this.options.gapUnit&&(s*=this.basePointRange),i&&s<i&&i>=this.basePointRange&&(s=i);for(var r,o,a=void 0;e--;)a&&!1!==a.visible||(a=n[e+1]),r=n[e],!1!==a.visible&&!1!==r.visible&&(a.x-r.x>s&&(o=(r.x+a.x)/2,n.splice(e+1,0,{isNull:!0,x:o}),t.stacking&&this.options.stacking&&((t.stacking.stacks[this.stackKey][o]=new l(t,t.options.stackLabels,!1,o,this.stack)).total=0)),a=r)}return this.getGraphPath(n)}i.compose=function(i,n){var t;return-1===s.indexOf(i)&&(s.push(i),i.keepProps.push("brokenAxis"),p(i,"init",a),p(i,"afterInit",e),p(i,"afterSetTickPositions",o),p(i,"afterSetOptions",r)),-1===s.indexOf(n)&&(s.push(n),(t=n.prototype).drawBreaks=h,t.gappedPath=c,p(n,"afterGeneratePoints",f),p(n,"afterRender",u)),i};var n=(k.isInBreak=function(i,n){var t=i.repeat||1/0,s=i.from,e=i.to-i.from,t=s<=n?(n-s)%t:t-(s-n)%t,t=i.inclusive?t<=e:t<e&&0!=t;return t},k.lin2Val=function(i){var n=this.brokenAxis,t=n&&n.breakArray;if(!t||!A(i))return i;for(var s,e=i,r=0;r<t.length&&!((s=t[r]).from>=e);r++)(s.to<e||k.isInBreak(s,e))&&(e+=s.len);return e},k.val2Lin=function(i){var n=this.brokenAxis,t=n&&n.breakArray;if(!t||!A(i))return i;for(var s,e=i,r=0;r<t.length;r++)if((s=t[r]).to<=i)e-=s.len;else{if(s.from>=i)break;if(k.isInBreak(s,i)){e-=i-s.from;break}}return e},k.prototype.findBreakAt=function(n,i){return t(i,function(i){return i.from<n&&n<i.to})},k.prototype.isInAnyBreak=function(i,n){var t,s,e,r=this.axis,o=r.options.breaks||[],a=o.length;if(a&&A(i)){for(;a--;)k.isInBreak(o[a],i)&&(t=!0,s=s||m(o[a].showPoints,!r.isXAxis));e=t&&n?t&&!s:t}return e},k.prototype.setBreaks=function(i,n){var c=this,l=c.axis,t=x(i)&&!!i.length;l.isDirty=c.hasBreaks!==t,c.hasBreaks=t,l.options.breaks=l.userOptions.breaks=i,l.forceRedraw=!0,l.series.forEach(function(i){i.isDirty=!0}),t||l.val2lin!==k.val2Lin||(delete l.val2lin,delete l.lin2val),t&&(l.userOptions.ordinal=!1,l.lin2val=k.lin2Val,l.val2lin=k.val2Lin,l.setExtremes=function(i,n,t,s,e){if(c.hasBreaks){for(var r=this.options.breaks||[],o=void 0;o=c.findBreakAt(i,r);)i=o.to;for(;o=c.findBreakAt(n,r);)n=o.from;n<i&&(n=i)}l.constructor.prototype.setExtremes.call(this,i,n,t,s,e)},l.setAxisTranslation=function(){var i,n,t,s,e,r,o,a,f,u,h;l.constructor.prototype.setAxisTranslation.call(this),c.unitLength=void 0,c.hasBreaks&&(i=l.options.breaks||[],n=[],t=[],s=m(l.pointRangePadding,0),e=0,a=l.userMin||l.min,f=l.userMax||l.max,i.forEach(function(i){o=i.repeat||1/0,A(a)&&A(f)&&(k.isInBreak(i,a)&&(a+=i.to%o-a%o),k.isInBreak(i,f)&&(f-=f%o-i.from%o))}),i.forEach(function(i){if(u=i.from,o=i.repeat||1/0,A(a)&&A(f)){for(;a<u-o;)u-=o;for(;u<a;)u+=o;for(h=u;h<f;h+=o)n.push({value:h,move:"in"}),n.push({value:h+i.to-i.from,move:"out",size:i.breakSize})}}),n.sort(function(i,n){return i.value===n.value?("in"===i.move?0:1)-("in"===n.move?0:1):i.value-n.value}),r=0,u=a,n.forEach(function(i){1===(r+="in"===i.move?1:-1)&&"in"===i.move&&(u=i.value),0===r&&A(u)&&(t.push({from:u,to:i.value,len:i.value-u-(i.size||0)}),e+=i.value-u-(i.size||0))}),c.breakArray=t,A(a)&&A(f)&&A(l.min)&&(c.unitLength=f-a-e+s,v(l,"afterBreaks"),l.staticScale?l.transA=l.staticScale:c.unitLength&&(l.transA*=(f-l.min+s)/c.unitLength),s&&(l.minPixelPadding=l.transA*(l.minPointOffset||0)),l.min=a,l.max=f))}),m(n,!0)&&l.chart.redraw()},k);function k(i){this.hasBreaks=!1,this.axis=i}i.Additions=n}(n=n||{}),n}),n(i,"masters/modules/broken-axis.src.js",[i["Core/Globals.js"],i["Core/Axis/BrokenAxis.js"]],function(i,n){n.compose(i.Axis,i.Series)})});