"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/boost-canvas",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){t=t?t._modules:{};function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o))}e(t,"Extensions/BoostCanvas.js",[t["Core/Chart/Chart.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,F,Q,e,o,Z){var $,tt=F.parse,a=Q.doc,et=Q.noop,i=o.seriesTypes,ot=Z.addEvent,it=Z.extend,rt=Z.fireEvent,st=Z.isNumber,nt=Z.merge,at=Z.pick,c=Z.wrap;return function(){Q.seriesTypes.heatmap&&c(Q.seriesTypes.heatmap.prototype,"drawPoints",function(){var s=this.chart,n=this.getContext(),a=this.chart.inverted,c=this.xAxis,l=this.yAxis;n?(this.points.forEach(function(t){var e,o,i,r=t.plotY;void 0!==r&&!isNaN(r)&&null!==t.y&&n&&(e=void 0===(o=(i=t.shapeArgs||{}).x)?0:o,o=void 0===(r=i.y)?0:r,r=void 0===(r=i.width)?0:r,i=void 0===(i=i.height)?0:i,t=s.styledMode?t.series.colorAttribs(t):t.series.pointAttribs(t),n.fillStyle=t.fill,a?n.fillRect(l.len-o+c.left,c.len-e+l.top,-i,-r):n.fillRect(e+c.left,o+l.top,r,i))}),this.canvasToSVG()):this.chart.showLoading("Your browser doesn't support HTML5 canvas, <br>please use a modern browser")}),it(e.prototype,{getContext:function(){function e(t,e,o,i,r,s,n){t.call(this,o,e,i,r,s,n)}var o,t=this.chart,i=t.chartWidth,r=t.chartHeight,s=t.seriesGroup||this.group,n=this;return t.isChartSeriesBoosting()&&(s=(n=t).seriesGroup),o=n.ctx,n.canvas||(n.canvas=a.createElement("canvas"),n.renderTarget=t.renderer.image("",0,0,i,r).addClass("highcharts-boost-canvas").add(s),n.ctx=o=n.canvas.getContext("2d"),t.inverted&&["moveTo","lineTo","rect","arc"].forEach(function(t){c(o,t,e)}),n.boostCopy=function(){n.renderTarget.attr({href:n.canvas.toDataURL("image/png")})},n.boostClear=function(){o.clearRect(0,0,n.canvas.width,n.canvas.height),n===this&&n.renderTarget.attr({href:""})},n.boostClipRect=t.renderer.clipRect(),n.renderTarget.clip(n.boostClipRect)),n.canvas.width!==i&&(n.canvas.width=i),n.canvas.height!==r&&(n.canvas.height=r),n.renderTarget.attr({x:0,y:0,width:i,height:r,style:"pointer-events: none",href:""}),n.boostClipRect.attr(t.getBoostClipRect(n)),o},canvasToSVG:function(){this.chart.isChartSeriesBoosting()?this.boostClear&&this.boostClear():(this.boostCopy||this.chart.boostCopy)&&(this.boostCopy||this.chart.boostCopy)()},cvsLineTo:function(t,e,o){t.lineTo(e,o)},renderCanvas:function(){function d(t,e,o,i){0===a&&(r.beginPath(),E&&(r.lineJoin="round")),x.scroller&&"highcharts-navigator-series"===C.options.className?(e+=x.scroller.top,o&&(o+=x.scroller.top)):e+=x.plotTop,t+=x.plotLeft,g?r.moveTo(t,e):A?A(r,t,e,o,s):E?E(r,t,e):G&&G.call(C,r,t,e,p,i),(a+=1)===j&&(_(),a=0),s={clientX:t,plotY:e,yBottom:o}}function u(t,e,o){n=z?t:t+","+e,B&&!h[n]&&(h[n]=!0,x.inverted&&(t=T.len-t,e=S.len-e),i.push({x:!!J&&J[V+o],clientX:t,plotX:t,plotY:e,i:V+o}))}var r,v,i,s,g,f,y,b,m,n,C=this,t=C.options,x=C.chart,T=this.xAxis,S=this.yAxis,e=x.options.boost||{},o=e.timeRendering||!1,a=(e.timeSeriesProcessing,e.timeSetup,0),c=C.processedXData,w=C.processedYData,l=t.data,e=T.getExtremes(),k=e.min,M=e.max,e=S.getExtremes(),D=e.min,P=e.max,h={},R=!!C.sampling,p=t.marker&&t.marker.radius,A=this.cvsDrawPoint,E=t.lineWidth?this.cvsLineTo:void 0,G=p&&p<=1?this.cvsMarkerSquare:this.cvsMarkerCircle,j=this.cvsStrokeBatch||1e3,B=!1!==t.enableMouseTracking,e=t.threshold,N=S.getThreshold(e),X=st(e),L=N,Y=this.fill,O=C.pointArrayMap&&"low,high"===C.pointArrayMap.join(","),H=!!t.stacking,V=C.cropStart||0,e=x.options.loading,W=C.requireSorting,q=t.connectNulls,I=!c,K=H?C.data:c||l,U=C.fillOpacity?F.parse(C.color).setOpacity(at(t.fillOpacity,.75)).get():C.color,_=function(){Y?(r.fillStyle=U,r.fill()):(r.strokeStyle=C.color,r.lineWidth=t.lineWidth,r.stroke())},z="x"===t.findNearestPointBy,J=this.xData||this.options.xData||this.processedXData||!1;this.renderTarget&&this.renderTarget.attr({href:""}),(this.points||this.graph)&&this.destroyGraphics(),C.plotGroup("group","series",C.visible?"visible":"hidden",t.zIndex,x.seriesGroup),C.markerGroup=C.group,ot(C,"destroy",function(){C.markerGroup=null}),i=this.points=[],r=this.getContext(),C.buildKDTree=et,this.boostClear&&this.boostClear(),this.visible&&(99999<l.length&&(x.options.loading=nt(e,{labelStyle:{backgroundColor:tt("#ffffff").setOpacity(.75).get(),padding:"1em",borderRadius:"0.5em"},style:{backgroundColor:"none",opacity:1}}),Z.clearTimeout($),x.showLoading("Drawing..."),x.options.loading=e),o&&console.time("canvas rendering"),Q.eachAsync(K,function(t,e){var o,i,r,s,n=!1,a=!1,c=!1,l=!1,h=void 0===x.index,p=!0;return h||(I?(i=t[0],o=t[1],K[e+1]&&(c=K[e+1][0]),K[e-1]&&(l=K[e-1][0])):(i=t,o=w[e],K[e+1]&&(c=K[e+1]),K[e-1]&&(l=K[e-1])),c&&k<=c&&c<=M&&(n=!0),l&&k<=l&&l<=M&&(a=!0),O?(s=(o=I?t.slice(1,3):o)[0],o=o[1]):H&&(i=t.x,s=(o=t.stackY)-t.y),W||(p=D<=o&&o<=P),!(t=null===o)&&(k<=i&&i<=M&&p||n||a)&&(i=Math.round(T.toPixels(i,!0)),R?(void 0!==b&&i!==v||(O||(s=o),(void 0===m||y<o)&&(y=o,m=e),(void 0===b||s<f)&&(f=s,b=e)),i!==v&&(void 0!==b&&(r=S.toPixels(y,!0),N=S.toPixels(f,!0),d(i,X?Math.min(r,L):r,X?Math.max(N,L):N,e),u(i,r,m),N!==r&&u(i,N,b)),b=m=void 0,v=i)):(r=Math.round(S.toPixels(o,!0)),d(i,r,N,e),u(i,r,e))),g=t&&!q,e%5e4==0&&(C.boostCopy||C.chart.boostCopy)&&(C.boostCopy||C.chart.boostCopy)()),!h},function(){var t=x.loadingDiv,e=x.loadingShown;_(),C.canvasToSVG(),o&&console.timeEnd("canvas rendering"),rt(C,"renderedCanvas"),e&&(it(t.style,{transition:"opacity 250ms",opacity:0}),x.loadingShown=!1,$=setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t),x.loadingDiv=x.loadingSpan=null},250)),delete C.buildKDTree,C.buildKDTree()},x.renderer.forExport?Number.MAX_VALUE:void 0))}}),i.scatter.prototype.cvsMarkerCircle=function(t,e,o,i){t.moveTo(e,o),t.arc(e,o,i,0,2*Math.PI,!1)},i.scatter.prototype.cvsMarkerSquare=function(t,e,o,i){t.rect(e-i,o-i,2*i,2*i)},i.scatter.prototype.fill=!0,i.bubble&&(i.bubble.prototype.cvsMarkerCircle=function(t,e,o,i,r){t.moveTo(e,o),t.arc(e,o,this.radii&&this.radii[r],0,2*Math.PI,!1)},i.bubble.prototype.cvsStrokeBatch=1),it(i.area.prototype,{cvsDrawPoint:function(t,e,o,i,r){r&&e!==r.clientX&&(t.moveTo(r.clientX,r.yBottom),t.lineTo(r.clientX,r.plotY),t.lineTo(e,o),t.lineTo(e,i))},fill:!0,fillOpacity:!0,sampling:!0}),it(i.column.prototype,{cvsDrawPoint:function(t,e,o,i){t.rect(e-1,o,1,i-o)},fill:!0,sampling:!0}),t.prototype.callbacks.push(function(t){ot(t,"predraw",function(){t.renderTarget&&t.renderTarget.attr({href:""}),t.canvas&&t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height)}),ot(t,"render",function(){t.boostCopy&&t.boostCopy()})})}}),e(t,"masters/modules/boost-canvas.src.js",[],function(){})});