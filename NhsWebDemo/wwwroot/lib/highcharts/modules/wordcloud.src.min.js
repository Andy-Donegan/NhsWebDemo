"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/wordcloud",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){t=t?t._modules:{};function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o))}e(t,"Series/DrawPointComposition.js",[],function(){var t,o;function i(t){var e,o=this,i=t.animatableAttribs,n=t.onComplete,r=t.css,a=t.renderer,s=this.series&&this.series.chart.hasRendered?void 0:this.series&&this.series.options.animation,l=this.graphic;t.attribs=t.attribs||{},t.attribs.class=this.getClassName(),this.shouldDraw()?(l||(this.graphic=l=a[t.shapeType](t.shapeArgs).add(t.group)),l.css(r).attr(t.attribs).animate(i,!t.isNew&&s,n)):l&&(e=function(){o.graphic=l=l&&l.destroy(),"function"==typeof n&&n()},Object.keys(i).length?l.animate(i,void 0,function(){e()}):e())}function n(){return!this.isNull}return t=t||{},o=[],t.compose=function(t){var e;return-1===o.indexOf(t)&&(o.push(t),(e=t.prototype).draw=i,e.shouldDraw||(e.shouldDraw=n)),t},t}),e(t,"Series/Wordcloud/WordcloudPoint.js",[t["Series/DrawPointComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var i,n,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),e=e.seriesTypes.column,o=o.extend,r=(n=e.prototype.pointClass,r(a,n),a.prototype.isValid=function(){return!0},a);function a(){var t=null!==n&&n.apply(this,arguments)||this;return t.dimensions=void 0,t.options=void 0,t.polygon=void 0,t.rect=void 0,t.series=void 0,t}return o(r.prototype,{weight:1}),t.compose(r),r}),e(t,"Series/Wordcloud/WordcloudUtils.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e){var n=t.deg2rad,f=e.extend,s=e.find,r=e.isNumber,m=e.isObject,a=e.merge;function l(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function o(t){var r=t.axes||[];return r.length||(r=[],t.concat([t[0]]).reduce(function(t,e){var o,i,n=(o=t,i=e[0]-t[0],[[-(o=e[1]-t[1]),i],[o,-i]])[0];return s(r,function(t){return t[0]===n[0]&&t[1]===n[1]})||r.push(n),e}),t.axes=r),r}function u(t,o){t=t.map(function(t){var e=t[0],t=t[1];return e*o[0]+t*o[1]});return{min:Math.min.apply(this,t),max:Math.max.apply(this,t)}}function h(i,n){var t=o(i),e=o(n),e=t.concat(e);return!s(e,function(t){return o=n,e=u(e=i,t=t),!!((t=u(o,t)).min>e.max||t.max<e.min);var e,o})}function y(o,t){function i(t){var e=l(n,t.rect);return e=e&&(o.rotation%90||t.rotation%90)?h(r,t.polygon):e}var e=!1,n=o.rect,r=o.polygon,a=o.lastCollidedWith;return a&&((e=i(a))||delete o.lastCollidedWith),e=e||!!s(t,function(t){var e=i(t);return e&&(o.lastCollidedWith=t),e})}function i(t,e){function o(t){return"boolean"==typeof t}var i=4*t,n=Math.ceil((Math.sqrt(i)-1)/2),r=2*n+1,a=Math.pow(r,2),s=!1;return--r,t<=1e4&&(o(s)&&a-r<=i&&(s={x:n-(a-i),y:-n}),a-=r,o(s)&&a-r<=i&&(s={x:-n,y:a-i-n}),a-=r,(s=o(s)?a-r<=i?{x:a-i-n,y:n}:{x:n,y:n-(a-i-r)}:s).x*=5,s.y*=5),s}function d(t,e){e=r(e)?e:14,e=Math.pow(10,e);return Math.round(t*e)/e}function c(t,e){var o=t[0],i=t[1],t=n*-e,e=Math.cos(t),t=Math.sin(t);return[d(o*e-i*t),d(o*t+i*e)]}function p(t,e,o){o=c([t[0]-e[0],t[1]-e[1]],o);return[o[0]+e[0],o[1]+e[1]]}return{archimedeanSpiral:function(t,e){var o=e.field,i=!1,e=o.width*o.width+o.height*o.height,o=.8*t;return t<=1e4&&(i={x:o*Math.cos(o),y:o*Math.sin(o)},Math.min(Math.abs(i.x),Math.abs(i.y))<e||(i=!1)),i},extendPlayingField:function(t,e){var o,i,n;return t=m(t)&&m(e)?(n=e.bottom-e.top,o=e.right-e.left,i=t.ratioX,e=t.ratioY,a(t,{width:t.width+2*((n=n*e<o*i?o:n)*i),height:t.height+2*(n*e)})):t},getBoundingBoxFromPolygon:function(t){return t.reduce(function(t,e){var o=e[0],e=e[1];return t.left=Math.min(o,t.left),t.right=Math.max(o,t.right),t.bottom=Math.max(e,t.bottom),t.top=Math.min(e,t.top),t},{left:Number.MAX_VALUE,right:-Number.MAX_VALUE,bottom:-Number.MAX_VALUE,top:Number.MAX_VALUE})},getPlayingField:function(t,e,o){var i=o.reduce(function(t,e){var o=e.dimensions,e=Math.max(o.width,o.height);return t.maxHeight=Math.max(t.maxHeight,o.height),t.maxWidth=Math.max(t.maxWidth,o.width),t.area+=e*e,t},{maxHeight:0,maxWidth:0,area:0});return{width:(o=Math.max(i.maxHeight,i.maxWidth,.85*Math.sqrt(i.area)))*(i=e<t?t/e:1),height:o*(t=t<e?e/t:1),ratioX:i,ratioY:t}},getPolygon:function(t,e,o,i,n){var r=[t,e],a=t-o/2,t=t+o/2;return[[a,o=e-i/2],[t,o],[t,i=e+i/2],[a,i]].map(function(t){return p(t,r,-n)})},getRandomPosition:function(t){return Math.round(t*(Math.random()+.5)/2)},getRotation:function(t,e,o,i){var n=!1;return n=r(t)&&r(e)&&r(o)&&r(i)&&0<t&&-1<e&&o<i?o+e%t*((i-o)/(t-1||1)):n},getScale:function(t,e,o){var i=2*Math.max(Math.abs(o.top),Math.abs(o.bottom)),o=2*Math.max(Math.abs(o.left),Math.abs(o.right));return Math.min(0<o?1/o*t:1,0<i?1/i*e:1)},getSpiral:function(t,e){for(var o=[],i=1;i<1e4;i++)o.push(t(i,e));return function(t){return t<=1e4&&o[t-1]}},intersectionTesting:function(t,e){var o,i,n,r,a,s=e.placed,l=e.field,u=e.rectangle,h=e.polygon,d=e.spiral,c=1,p={x:0,y:0},g=t.rect=f({},u);for(t.polygon=h,t.rotation=e.rotation;!1!==p&&(y(t,s)||(o=g,a=r=n=void 0,n=-(i=l).width/2,r=l.width/2,a=-l.height/2,i=l.height/2,!(n<o.left&&r>o.right&&a<o.top&&i>o.bottom)));)p=d(c),m(p)&&(g.left=u.left+p.x,g.right=u.right+p.x,g.top=u.top+p.y,g.bottom=u.bottom+p.y,t.polygon=function(e,o,t){return t.map(function(t){return[t[0]+e,t[1]+o]})}(p.x,p.y,h)),c++;return p},isPolygonsColliding:h,isRectanglesIntersecting:l,rectangularSpiral:function(t,e){return t=i(t),e=e.field,t&&(t.x*=e.ratioX,t.y*=e.ratioY),t},rotate2DToOrigin:c,rotate2DToPoint:p,squareSpiral:i,updateFieldBoundaries:function(t,e){return(!r(t.left)||t.left>e.left)&&(t.left=e.left),(!r(t.right)||t.right<e.right)&&(t.right=e.right),(!r(t.top)||t.top>e.top)&&(t.top=e.top),(!r(t.bottom)||t.bottom<e.bottom)&&(t.bottom=e.bottom),t}}}),e(t,"Series/Wordcloud/WordcloudSeries.js",[t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Series/Wordcloud/WordcloudPoint.js"],t["Series/Wordcloud/WordcloudUtils.js"]],function(o,e,t,i,n,r){var a,s,l=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=o.noop,h=t.seriesTypes.column,S=i.extend,d=i.isArray,M=i.isNumber,P=i.isObject,c=i.merge,p=r.archimedeanSpiral,A=r.extendPlayingField,_=r.getBoundingBoxFromPolygon,j=r.getPlayingField,F=r.getPolygon,g=r.getRandomPosition,f=r.getRotation,W=r.getScale,C=r.getSpiral,O=r.intersectionTesting,m=r.isPolygonsColliding,y=r.rectangularSpiral,x=r.rotate2DToOrigin,b=r.rotate2DToPoint,i=r.squareSpiral,T=r.updateFieldBoundaries,h=(l(v,s=h),v.prototype.bindAxes=function(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]};e.prototype.bindAxes.call(this),S(this.yAxis.options,t),S(this.xAxis.options,t)},v.prototype.pointAttribs=function(t,e){e=o.seriesTypes.column.prototype.pointAttribs.call(this,t,e);return delete e.stroke,delete e["stroke-width"],e},v.prototype.deriveFontSize=function(t,e,o){t=M(t)?t:0,e=M(e)?e:1,o=M(o)?o:1;return Math.floor(Math.max(o,t*e))},v.prototype.drawPoints=function(){var l,u,h=this,d=h.hasRendered,t=h.xAxis,e=h.yAxis,o=h.chart,c=h.group,p=h.options,g=p.animation,f=p.allowExtendPlayingField,m=o.renderer,i=m.text().add(c),y=[],x=h.placementStrategy[p.placementStrategy],b=p.rotation,o=h.points.map(function(t){return t.weight}),v=Math.max.apply(null,o),w=h.points.concat().sort(function(t,e){return e.weight-t.weight});h.group.attr({scaleX:1,scaleY:1}),w.forEach(function(t){var e=1/v*t.weight,e=h.deriveFontSize(e,p.maxFontSize,p.minFontSize),e=S({fontSize:e+"px"},p.style);i.css(e).attr({x:0,y:0,text:t.name}),e=i.getBBox(!0),t.dimensions={height:e.height,width:e.width}}),u=j(t.len,e.len,w),l=C(h.spirals[p.spiral],{field:u}),w.forEach(function(t){var e,o=1/v*t.weight,i=h.deriveFontSize(o,p.maxFontSize,p.minFontSize),n=S({fontSize:i+"px"},p.style),r=x(t,{data:w,field:u,placed:y,rotation:b}),a=S(h.pointAttribs(t,t.selected&&"select"),{align:"center","alignment-baseline":"middle","dominant-baseline":"middle",x:r.x,y:r.y,text:t.name,rotation:M(r.rotation)?r.rotation:void 0}),s=F(r.x,r.y,t.dimensions.width,t.dimensions.height,r.rotation),o=_(s),i=O(t,{rectangle:o,polygon:s,field:u,placed:y,spiral:l,rotation:r.rotation});!i&&f&&(u=A(u,o),i=O(t,{rectangle:o,polygon:s,field:u,placed:y,spiral:l,rotation:r.rotation})),P(i)?(a.x=(a.x||0)+i.x,a.y=(a.y||0)+i.y,o.left+=i.x,o.right+=i.x,o.top+=i.y,o.bottom+=i.y,u=T(u,o),y.push(t),t.isNull=!1,t.isInside=!0):t.isNull=!0,g&&(e={x:a.x,y:a.y},d?(delete a.x,delete a.y):(a.x=0,a.y=0)),t.draw({animatableAttribs:e,attribs:a,css:n,group:c,renderer:m,shapeArgs:void 0,shapeType:"text"})}),i=i.destroy(),e=W(t.len,e.len,u),h.group.attr({scaleX:e,scaleY:e})},v.prototype.hasData=function(){return P(this)&&!0===this.visible&&d(this.points)&&0<this.points.length},v.prototype.getPlotBox=function(){var t=this.chart,e=t.inverted,o=this[e?"yAxis":"xAxis"],i=this[e?"xAxis":"yAxis"],n=o?o.len:t.plotWidth,e=i?i.len:t.plotHeight;return{translateX:(o?o.left:t.plotLeft)+n/2,translateY:(i?i.top:t.plotTop)+e/2,scaleX:1,scaleY:1}},v.defaultOptions=c(h.defaultOptions,{allowExtendPlayingField:!0,animation:{duration:500},borderWidth:0,clip:!1,colorByPoint:!0,minFontSize:1,maxFontSize:25,placementStrategy:"center",rotation:{from:0,orientations:2,to:90},showInLegend:!1,spiral:"rectangular",style:{fontFamily:"sans-serif",fontWeight:"900",whiteSpace:"nowrap"},tooltip:{followPointer:!0,pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.weight}</b><br/>'}}),v);function v(){var t=null!==s&&s.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return S(h.prototype,{animate:u,animateDrilldown:u,animateDrillupFrom:u,pointClass:n,setClip:u,placementStrategy:{random:function(t,e){var o=e.field,e=e.rotation;return{x:g(o.width)-o.width/2,y:g(o.height)-o.height/2,rotation:f(e.orientations,t.index,e.from,e.to)}},center:function(t,e){e=e.rotation;return{x:0,y:0,rotation:f(e.orientations,t.index,e.from,e.to)}}},pointArrayMap:["weight"],spirals:{archimedean:p,rectangular:y,square:i},utils:{extendPlayingField:A,getRotation:f,isPolygonsColliding:m,rotate2DToOrigin:x,rotate2DToPoint:b}}),t.registerSeriesType("wordcloud",h),h}),e(t,"masters/modules/wordcloud.src.js",[],function(){})});