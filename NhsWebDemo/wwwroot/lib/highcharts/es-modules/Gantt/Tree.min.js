"use strict";import U from"../Core/Utilities.js";var extend=U.extend,isNumber=U.isNumber,pick=U.pick,getListOfParents=function(e,n){var i=e.reduce(function(e,t){var r=pick(t.parent,"");return void 0===e[r]&&(e[r]=[]),e[r].push(t),e},{});return Object.keys(i).forEach(function(e,t){var r=i[e];""!==e&&-1===n.indexOf(e)&&(r.forEach(function(e){t[""].push(e)}),delete t[e])}),i},getNode=function(n,e,i,t,a,s){var u,d,o=0,c=0,r=s&&s.after,f=s&&s.before,e={data:t,depth:i-1,id:n,level:i,parent:e};return"function"==typeof f&&f(e,s),f=(a[n]||[]).map(function(e){var t=getNode(e.id,n,i+1,e,a,s),r=e.start,e=!0===e.milestone?r:e.end;return u=!isNumber(u)||r<u?r:u,d=!isNumber(d)||d<e?e:d,o=o+1+t.descendants,c=Math.max(t.height+1,c),t}),t&&(t.start=pick(t.start,u),t.end=pick(t.end,d)),extend(e,{children:f,descendants:o,height:c}),"function"==typeof r&&r(e,s),e},getTree=function(e,t){var r=e.map(function(e){return e.id}),r=getListOfParents(e,r);return getNode("",null,1,null,r,t)},Tree={getListOfParents:getListOfParents,getNode:getNode,getTree:getTree};export default Tree;