"use strict";import Chart from"../Core/Chart/Chart.js";import H from"../Core/Globals.js";var doc=H.doc;import AST from"../Core/Renderer/HTML/AST.js";import U from"../Core/Utilities.js";var addEvent=U.addEvent,Fullscreen=function(){function e(e){this.chart=e,this.isOpen=!1;e=e.renderTo;this.browserProps||("function"==typeof e.requestFullscreen?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:e.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:e.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:e.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}return e.prototype.close=function(){var e=this,t=e.chart,n=t.options.chart;e.isOpen&&e.browserProps&&t.container.ownerDocument instanceof Document&&t.container.ownerDocument[e.browserProps.exitFullscreen](),e.unbindFullscreenEvent&&(e.unbindFullscreenEvent=e.unbindFullscreenEvent()),t.setSize(e.origWidth,e.origHeight,!1),e.origWidth=void 0,e.origHeight=void 0,n.width=e.origWidthOption,n.height=e.origHeightOption,e.origWidthOption=void 0,e.origHeightOption=void 0,e.isOpen=!1,e.setButtonText()},e.prototype.open=function(){var e,t,n=this,r=n.chart,s=r.options.chart;s&&(n.origWidthOption=s.width,n.origHeightOption=s.height),n.origWidth=r.chartWidth,n.origHeight=r.chartHeight,n.browserProps&&(e=addEvent(r.container.ownerDocument,n.browserProps.fullscreenChange,function(){n.isOpen?(n.isOpen=!1,n.close()):(r.setSize(null,null,!1),n.isOpen=!0,n.setButtonText())}),t=addEvent(r,"destroy",e),n.unbindFullscreenEvent=function(){e(),t()},(s=r.renderTo[n.browserProps.requestFullscreen]())&&s.catch(function(){alert("Full screen is not supported inside a frame.")}))},e.prototype.setButtonText=function(){var e=this.chart,t=e.exportDivElements,n=e.options.exporting,r=n&&n.buttons&&n.buttons.contextButton.menuItems,e=e.options.lang;n&&n.menuItemDefinitions&&e&&e.exitFullscreen&&e.viewFullscreen&&r&&t&&((r=t[r.indexOf("viewFullscreen")])&&AST.setElementHTML(r,this.isOpen?e.exitFullscreen:n.menuItemDefinitions.viewFullscreen.text||e.viewFullscreen))},e.prototype.toggle=function(){var e=this;e.isOpen?e.close():e.open()},e}();H.Fullscreen=Fullscreen;export default H.Fullscreen;addEvent(Chart,"beforeRender",function(){this.fullscreen=new H.Fullscreen(this)});