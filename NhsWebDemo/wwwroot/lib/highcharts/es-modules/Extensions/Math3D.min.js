"use strict";import H from"../Core/Globals.js";import U from"../Core/Utilities.js";var pick=U.pick,deg2rad=H.deg2rad;function rotate3D(e,t,p,i){return{x:i.cosB*e-i.sinB*p,y:-i.sinA*i.sinB*e+i.cosA*t-i.cosB*i.sinA*p,z:i.cosA*i.sinB*e+i.sinA*t+i.cosA*i.cosB*p}}function perspective3D(e,t,p){p=0<p&&p<Number.POSITIVE_INFINITY?p/(e.z+t.z+p):1;return{x:e.x*p,y:e.y*p}}function perspective(e,t,p,i){var r=t.options.chart.options3d,a=pick(i,!!p&&t.inverted),s={x:t.plotWidth/2,y:t.plotHeight/2,z:r.depth/2,vd:pick(r.depth,1)*pick(r.viewDistance,0)},o=t.scale3d||1,i=deg2rad*r.beta*(a?-1:1),r=deg2rad*r.alpha*(a?-1:1),c={cosA:Math.cos(r),cosB:Math.cos(-i),sinA:Math.sin(r),sinB:Math.sin(-i)};return p||(s.x+=t.plotLeft,s.y+=t.plotTop),e.map(function(e){var t=rotate3D((a?e.y:e.x)-s.x,(a?e.x:e.y)-s.y,(e.z||0)-s.z,c),e=perspective3D(t,s,s.vd);return e.x=e.x*o+s.x,e.y=e.y*o+s.y,e.z=t.z*o+s.z,{x:a?e.y:e.x,y:a?e.x:e.y,z:e.z}})}function pointCameraDistance(e,t){var p=t.options.chart.options3d,i=t.plotWidth/2,t=t.plotHeight/2,p=pick(p.depth,1)*pick(p.viewDistance,0)+p.depth;return Math.sqrt(Math.pow(i-pick(e.plotX,e.x),2)+Math.pow(t-pick(e.plotY,e.y),2)+Math.pow(p-pick(e.plotZ,e.z),2))}function shapeArea(e){for(var t,p=0,i=0;i<e.length;i++)t=(i+1)%e.length,p+=e[i].x*e[t].y-e[t].x*e[i].y;return p/2}function shapeArea3D(e,t,p){return shapeArea(perspective(e,t,p))}H.perspective3D=perspective3D;var mathModule={perspective:H.perspective=perspective,perspective3D:perspective3D,pointCameraDistance:H.pointCameraDistance=pointCameraDistance,shapeArea:H.shapeArea=shapeArea,shapeArea3D:H.shapeArea3d=shapeArea3D};export default mathModule;