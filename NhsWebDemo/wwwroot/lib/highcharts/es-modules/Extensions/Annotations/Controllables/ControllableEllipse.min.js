"use strict";import ControllableMixin from"../Mixins/ControllableMixin.js";import ControllablePath from"./ControllablePath.js";import U from"../../../Core/Utilities.js";var merge=U.merge,defined=U.defined,ControllableEllipse=function(){function t(t,i,o){this.addControlPoints=ControllableMixin.addControlPoints,this.anchor=ControllableMixin.anchor,this.attr=ControllableMixin.attr,this.attrsFromOptions=ControllableMixin.attrsFromOptions,this.destroy=ControllableMixin.destroy,this.getPointsOptions=ControllableMixin.getPointsOptions,this.linkPoints=ControllableMixin.linkPoints,this.point=ControllableMixin.point,this.scale=ControllableMixin.scale,this.setControlPointsVisibility=ControllableMixin.setControlPointsVisibility,this.shouldBeDrawn=ControllableMixin.shouldBeDrawn,this.transform=ControllableMixin.transform,this.translatePoint=ControllableMixin.translatePoint,this.transformPoint=ControllableMixin.transformPoint,this.type="ellipse",this.init(t,i,o),this.collection="shapes"}return t.prototype.init=function(t,i,o){defined(i.yAxis)&&i.points.forEach(function(t){t.yAxis=i.yAxis}),defined(i.xAxis)&&i.points.forEach(function(t){t.xAxis=i.xAxis}),ControllableMixin.init.call(this,t,i,o)},t.prototype.render=function(t){this.graphic=this.annotation.chart.renderer.createElement("ellipse").attr(this.attrsFromOptions(this.options)).add(t),ControllableMixin.render.call(this)},t.prototype.translate=function(t,i){ControllableMixin.translateShape.call(this,t,i,!0)},t.prototype.getDistanceFromLine=function(t,i,o,n){return Math.abs((i.y-t.y)*o-(i.x-t.x)*n+i.x*t.y-i.y*t.x)/Math.sqrt((i.y-t.y)*(i.y-t.y)+(i.x-t.x)*(i.x-t.x))},t.prototype.getAttrs=function(t,i){var o=t.x,n=t.y,r=i.x,s=i.y,e=(o+r)/2,t=(n+s)/2,i=Math.sqrt((o-r)*(o-r)/4+(n-s)*(n-s)/4),r=180*Math.atan((s-n)/(r-o))/Math.PI;return e<o&&(r+=180),{cx:e,cy:t,rx:i,ry:this.getRY(),angle:r}},t.prototype.getRY=function(){var t=this.getYAxis();return defined(t)?Math.abs(t.toPixels(this.options.ry)-t.toPixels(0)):this.options.ry},t.prototype.getYAxis=function(){var t=this.options.yAxis;return this.chart.yAxis[t]},t.prototype.getAbsolutePosition=function(t){return this.anchor(t).absolutePosition},t.prototype.redraw=function(t){var i=this.getAbsolutePosition(this.points[0]),o=this.getAbsolutePosition(this.points[1]),o=this.getAttrs(i,o);i?this.graphic[t?"animate":"attr"]({cx:o.cx,cy:o.cy,rx:o.rx,ry:o.ry,rotation:o.angle,rotationOriginX:o.cx,rotationOriginY:o.cy}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(i),ControllableMixin.redraw.call(this,t)},t.prototype.setYRadius=function(t){this.options.ry=t,this.annotation.userOptions.shapes[0].ry=t,this.annotation.options.shapes[0].ry=t},t.attrsMap=merge(ControllablePath.attrsMap,{ry:"ry"}),t}();export default ControllableEllipse;