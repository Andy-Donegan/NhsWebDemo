"use strict";import ControllableMixin from"../Mixins/ControllableMixin.js";import H from"../../../Core/Globals.js";import MarkerMixin from"../Mixins/MarkerMixin.js";import U from"../../../Core/Utilities.js";var extend=U.extend,TRACKER_FILL="rgba(192,192,192,"+(H.svg?1e-4:.002)+")",ControllablePath=function(){function t(t,i,r){this.addControlPoints=ControllableMixin.addControlPoints,this.anchor=ControllableMixin.anchor,this.attr=ControllableMixin.attr,this.attrsFromOptions=ControllableMixin.attrsFromOptions,this.destroy=ControllableMixin.destroy,this.getPointsOptions=ControllableMixin.getPointsOptions,this.init=ControllableMixin.init,this.linkPoints=ControllableMixin.linkPoints,this.point=ControllableMixin.point,this.rotate=ControllableMixin.rotate,this.scale=ControllableMixin.scale,this.setControlPointsVisibility=ControllableMixin.setControlPointsVisibility,this.setMarkers=MarkerMixin.setItemMarkers,this.transform=ControllableMixin.transform,this.transformPoint=ControllableMixin.transformPoint,this.translate=ControllableMixin.translate,this.translatePoint=ControllableMixin.translatePoint,this.translateShape=ControllableMixin.translateShape,this.update=ControllableMixin.update,this.type="path",this.init(t,i,r),this.collection="shapes"}return t.prototype.toD=function(){var t=this.options.d;if(t)return"function"==typeof t?t.call(this):t;var i,r=this.points,o=r.length,n=o,a=r[0],e=n&&this.anchor(a).absolutePosition,s=0,l=[];if(e)for(l.push(["M",e.x,e.y]);++s<o&&n;)i=(a=r[s]).command||"L",e=this.anchor(a).absolutePosition,"M"===i||"L"===i?l.push([i,e.x,e.y]):"Z"===i&&l.push([i]),n=a.series.visible;return n?this.chart.renderer.crispLine(l,this.graphic.strokeWidth()):null},t.prototype.shouldBeDrawn=function(){return ControllableMixin.shouldBeDrawn.call(this)||Boolean(this.options.d)},t.prototype.render=function(t){var i=this.options,r=this.attrsFromOptions(i);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(r).add(t),i.className&&this.graphic.addClass(i.className),this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(t),this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:TRACKER_FILL,fill:TRACKER_FILL,"stroke-width":this.graphic.strokeWidth()+2*i.snap}),ControllableMixin.render.call(this),extend(this.graphic,{markerStartSetter:MarkerMixin.markerStartSetter,markerEndSetter:MarkerMixin.markerEndSetter}),this.setMarkers(this)},t.prototype.redraw=function(t){var i=this.toD(),r=t?"animate":"attr";i?(this.graphic[r]({d:i}),this.tracker[r]({d:i})):(this.graphic.attr({d:"M 0 "+-9e9}),this.tracker.attr({d:"M 0 "+-9e9})),this.graphic.placed=this.tracker.placed=Boolean(i),ControllableMixin.redraw.call(this,t)},t.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"},t}();export default ControllablePath;