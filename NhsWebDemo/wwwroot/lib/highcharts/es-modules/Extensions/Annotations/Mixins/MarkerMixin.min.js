"use strict";import Chart from"../../../Core/Chart/Chart.js";import SVGRenderer from"../../../Core/Renderer/SVG/SVGRenderer.js";import U from"../../../Core/Utilities.js";var addEvent=U.addEvent,defined=U.defined,merge=U.merge,uniqueKey=U.uniqueKey,defaultMarkers={arrow:{tagName:"marker",attributes:{id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 0 L 10 5 L 0 10 Z","stroke-width":0}}]},"reverse-arrow":{tagName:"marker",attributes:{id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 5 L 10 0 L 10 10 Z","stroke-width":0}}]}};function createMarkerSetter(e){return function(r){this.attr(e,"url(#"+r+")")}}SVGRenderer.prototype.addMarker=function(r,e){var t={attributes:{id:r}},a={stroke:e.color||"none",fill:e.color||"rgba(0, 0, 0, 0.75)"};t.children=e.children&&e.children.map(function(r){return merge(a,r)});t=merge(!0,{attributes:{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"}},e,t),t=this.definition(t);return t.id=r,t};var markerMixin={markerEndSetter:createMarkerSetter("marker-end"),markerStartSetter:createMarkerSetter("marker-start"),setItemMarkers:function(d){var o=d.options,m=d.chart,s=m.options.defs,r=o.fill,f=defined(r)&&"none"!==r?r:o.stroke;["markerStart","markerEnd"].forEach(function(r){var e,t,a,i,n=o[r];if(n){for(a in s)if((n===((e=s[a]).attributes&&e.attributes.id)||n===e.id)&&"marker"===e.tagName){t=e;break}t&&(i=d[r]=m.renderer.addMarker((o.id||uniqueKey())+"-"+n,merge(t,{color:f})),d.attr(r,i.getAttribute("id")))}})}};addEvent(Chart,"afterGetContainer",function(){this.options.defs=merge(defaultMarkers,this.options.defs||{})});export default markerMixin;