"use strict";var __extends=this&&this.__extends||function(){var n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])})(t,o)};return function(t,o){function i(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();import Annotation from"../Annotations.js";import MockPoint from"../MockPoint.js";import U from"../../../Core/Utilities.js";var merge=U.merge,BasicAnnotation=function(i){function n(t,o){return i.call(this,t,o)||this}return __extends(n,i),n.prototype.addControlPoints=function(){var t=this.options,o=n.basicControlPoints,i=this.basicType;(t.labels||t.shapes).forEach(function(t){t.controlPoints=o[i]})},n.prototype.init=function(){var t=this.options;t.shapes?(delete t.labelOptions,t.shapes[0].type?this.basicType=t.shapes[0].type:this.basicType="rectangle"):(delete t.shapes,this.basicType="label"),Annotation.prototype.init.apply(this,arguments)},n.basicControlPoints={label:[{symbol:"triangle-down",positioner:function(t){if(!t.graphic.placed)return{x:0,y:-9e7};t=MockPoint.pointToPixels(t.points[0]);return{x:t.x-this.graphic.width/2,y:t.y-this.graphic.height/2}},events:{drag:function(t,o){t=this.mouseMoveToTranslation(t);o.translatePoint(t.x,t.y),o.annotation.userOptions.labels[0].point=o.options.point,o.redraw(!1)}}},{symbol:"square",positioner:function(t){return t.graphic.placed?{x:t.graphic.alignAttr.x-this.graphic.width/2,y:t.graphic.alignAttr.y-this.graphic.height/2}:{x:0,y:-9e7}},events:{drag:function(t,o){t=this.mouseMoveToTranslation(t);o.translate(t.x,t.y),o.annotation.userOptions.labels[0].point=o.options.point,o.redraw(!1)}}}],rectangle:[{positioner:function(t){t=MockPoint.pointToPixels(t.points[2]);return{x:t.x-4,y:t.y-4}},events:{drag:function(t,o){var i=o.annotation,n=this.chart.pointer.getCoordinates(t),s=n.xAxis[0].value,t=n.yAxis[0].value,n=o.options.points;n[1].x=s,n[2].x=s,n[2].y=t,n[3].y=t,i.userOptions.shapes[0].points=o.options.points,i.redraw(!1)}}}],circle:[{positioner:function(t){var o=MockPoint.pointToPixels(t.points[0]),t=t.options.r;return{x:o.x+t*Math.cos(Math.PI/4)-this.graphic.width/2,y:o.y+t*Math.sin(Math.PI/4)-this.graphic.height/2}},events:{drag:function(t,o){var i=o.annotation,t=this.mouseMoveToTranslation(t);o.setRadius(Math.max(o.options.r+t.y/Math.sin(Math.PI/4),5)),i.userOptions.shapes[0].r=o.options.r,i.userOptions.shapes[0].point=o.options.point,o.redraw(!1)}}}],ellipse:[{positioner:function(t){t=t.getAbsolutePosition(t.points[0]);return{x:t.x-this.graphic.width/2,y:t.y-this.graphic.height/2}},events:{drag:function(t,o){var i=o.getAbsolutePosition(o.points[0]);o.translatePoint(t.chartX-i.x,t.chartY-i.y,0),o.redraw(!1)}}},{positioner:function(t){t=t.getAbsolutePosition(t.points[1]);return{x:t.x-this.graphic.width/2,y:t.y-this.graphic.height/2}},events:{drag:function(t,o){var i=o.getAbsolutePosition(o.points[1]);o.translatePoint(t.chartX-i.x,t.chartY-i.y,1),o.redraw(!1)}}},{positioner:function(t){var o=t.getAbsolutePosition(t.points[0]),i=t.getAbsolutePosition(t.points[1]),i=t.getAttrs(o,i);return{x:i.cx-this.graphic.width/2+i.ry*Math.sin(i.angle*Math.PI/180),y:i.cy-this.graphic.height/2-i.ry*Math.cos(i.angle*Math.PI/180)}},events:{drag:function(t,o){var i=o.getAbsolutePosition(o.points[0]),n=o.getAbsolutePosition(o.points[1]),n=o.getDistanceFromLine(i,n,t.chartX,t.chartY),t=o.getYAxis(),n=Math.abs(t.toValue(0)-t.toValue(n));o.setYRadius(n),o.redraw(!1)}}}]},n}(Annotation);BasicAnnotation.prototype.defaultOptions=merge(Annotation.prototype.defaultOptions,{});export default Annotation.types.basicAnnotation=BasicAnnotation;