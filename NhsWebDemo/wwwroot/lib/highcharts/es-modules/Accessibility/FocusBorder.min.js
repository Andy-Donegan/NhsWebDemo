"use strict";import SVGLabel from"../Core/Renderer/SVG/SVGLabel.js";import U from"../Core/Utilities.js";var FocusBorderComposition,addEvent=U.addEvent,pick=U.pick;!function(o){var r=[],m=["x","y","transform","width","height","r","d","stroke-width"];function t(){var o=this.focusElement,e=this.options.accessibility.keyboardNavigation.focusBorder;o&&(o.removeFocusBorder(),e.enabled&&o.addFocusBorder(e.margin,{stroke:e.style.color,strokeWidth:e.style.lineWidth,r:e.style.borderRadius}))}function s(o,e){var r=this.options.accessibility.keyboardNavigation.focusBorder,e=e||o.element;e&&e.focus&&(e.hcEvents&&e.hcEvents.focusin||addEvent(e,"focusin",function(){}),e.focus(),r.hideBrowserFocusOutline&&(e.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=o,this.renderFocusBorder()}function i(o,e){this.focusBorder&&this.removeFocusBorder();var r=this.getBBox(),t=pick(o,3);r.x+=this.translateX||0,r.y+=this.translateY||0;var s=r.x-t,i=r.y-t,d=r.width+2*t,c=r.height+2*t;var n,a,u,h,f,B,l,p,y,k=this instanceof SVGLabel;"text"!==this.element.nodeName&&!k||(h=!!this.rotation,n=k?{x:h?1:0,y:0}:(l=B=0,"middle"===(f=this).attr("text-anchor")?B=l=.5:f.rotation?B=.25:l=.75,{x:B,y:l}),a=+this.attr("x"),u=+this.attr("y"),isNaN(a)||(s=a-r.width*n.x-t),isNaN(u)||(i=u-r.height*n.y-t),k&&h&&(h=d,d=c,c=h,isNaN(a)||(s=a-r.height*n.x-t),isNaN(u)||(i=u-r.width*n.y-t))),this.focusBorder=this.renderer.rect(s,i,d,c,parseInt((e&&e.r||0).toString(),10)).addClass("highcharts-focus-border").attr({zIndex:99}).add(this.parentGroup),this.renderer.styledMode||this.focusBorder.attr({stroke:e&&e.stroke,"stroke-width":e&&e.strokeWidth}),function(r){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];r.focusBorderUpdateHooks||(r.focusBorderUpdateHooks={},m.forEach(function(o){var o=o+"Setter",e=r[o]||r._defaultSetter;r.focusBorderUpdateHooks[o]=e,r[o]=function(){var o=e.apply(r,arguments);return r.addFocusBorder.apply(r,t),o}}))}(this,o,e),(p=this).focusBorderDestroyHook||(y=p.destroy,p.destroy=function(){return p.focusBorder&&p.focusBorder.destroy&&p.focusBorder.destroy(),y.apply(p,arguments)},p.focusBorderDestroyHook=y)}function d(){var r,o;(r=this).focusBorderUpdateHooks&&(Object.keys(r.focusBorderUpdateHooks).forEach(function(o){var e=r.focusBorderUpdateHooks[o];e===r._defaultSetter?delete r[o]:r[o]=e}),delete r.focusBorderUpdateHooks),(o=this).focusBorderDestroyHook&&(o.destroy=o.focusBorderDestroyHook,delete o.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}o.compose=function(o,e){-1===r.indexOf(o)&&(r.push(o),(o=o.prototype).renderFocusBorder=t,o.setFocusToElement=s),-1===r.indexOf(e)&&(r.push(e),(e=e.prototype).addFocusBorder=i,e.removeFocusBorder=d)}}(FocusBorderComposition=FocusBorderComposition||{});export default FocusBorderComposition;