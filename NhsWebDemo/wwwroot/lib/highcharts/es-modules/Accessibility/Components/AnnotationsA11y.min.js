"use strict";import HTMLUtilities from"../Utils/HTMLUtilities.js";var escapeStringForHTML=HTMLUtilities.escapeStringForHTML,stripHTMLTagsFromString=HTMLUtilities.stripHTMLTagsFromString;function getChartAnnotationLabels(t){return(t.annotations||[]).reduce(function(t,n){return t=n.options&&!1!==n.options.visible?t.concat(n.labels):t},[])}function getLabelText(t){return t.options&&t.options.accessibility&&t.options.accessibility.description||t.graphic&&t.graphic.text&&t.graphic.text.textStr||""}function getAnnotationLabelDescription(t){var n=t.options&&t.options.accessibility&&t.options.accessibility.description;if(n)return n;var i=t.chart,e=getLabelText(t),o=t.points,a=o.filter(function(t){return!!t.graphic}).map(function(t){var n,n=t.accessibility&&t.accessibility.valueDescription||((n=t).graphic&&n.graphic.element&&n.graphic.element.getAttribute("aria-label")||""),t=t&&t.series.name||"";return(t?t+", ":"")+"data point "+n}).filter(function(t){return!!t}),n=a.length,o="accessibility.screenReaderSection.annotations.description"+(1<n?"MultiplePoints":n?"SinglePoint":"NoPoints"),a={annotationText:e,annotation:t,numPoints:n,annotationPoint:a[0],additionalAnnotationPoints:a.slice(1)};return i.langFormat(o,a)}function getAnnotationListItems(t){return getChartAnnotationLabels(t).map(function(t){t=escapeStringForHTML(stripHTMLTagsFromString(getAnnotationLabelDescription(t)));return t?"<li>"+t+"</li>":""})}function getAnnotationsInfoHTML(t){var n=t.annotations;return n&&n.length?'<ul style="list-style-type: none">'+getAnnotationListItems(t).join(" ")+"</ul>":""}function getPointAnnotationTexts(n){var t=getChartAnnotationLabels(n.series.chart).filter(function(t){return-1<t.points.indexOf(n)});return t.length?t.map(function(t){return""+getLabelText(t)}):[]}var AnnotationsA11y={getAnnotationsInfoHTML:getAnnotationsInfoHTML,getAnnotationLabelDescription:getAnnotationLabelDescription,getAnnotationListItems:getAnnotationListItems,getPointAnnotationTexts:getPointAnnotationTexts};export default AnnotationsA11y;