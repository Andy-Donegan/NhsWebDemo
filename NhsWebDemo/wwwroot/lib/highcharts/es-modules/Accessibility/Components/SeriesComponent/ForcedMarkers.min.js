"use strict";import U from"../../../Core/Utilities.js";var ForcedMarkersComposition,addEvent=U.addEvent,merge=U.merge;!function(e){var r=[];function o(e){merge(!0,e,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function i(e){return e.marker.states&&e.marker.states.normal&&e.marker.states.normal.opacity}function n(e){for(var r=e.points.length;r--;){var a=e.points[r],s=a.options,t=a.hasForcedA11yMarker;delete a.hasForcedA11yMarker,s.marker&&(t=t&&0===i(s),s.marker.enabled&&!t?(merge(!0,s.marker,{states:{normal:{opacity:i(s)||1}}}),a.hasForcedA11yMarker=!1):!1===s.marker.enabled&&(o(s),a.hasForcedA11yMarker=!0))}}function d(e){return e._hasPointMarkers&&e.points&&e.points.length}function a(){var e=this;e.chart.styledMode&&(e.markerGroup&&e.markerGroup[e.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),d(e)&&e.points.forEach(function(e){e.graphic&&(e.graphic[e.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),e.graphic[!1===e.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function s(e){this.resetA11yMarkerOptions=merge(e.options.marker||{},this.userOptions.marker||{})}function t(){var e,r,a,s=this,t=s.options;r=(e=s).chart.options.accessibility.enabled,a=!1!==(e.options.accessibility&&e.options.accessibility.enabled),r&&a&&function(e){var r=e.chart.options.accessibility;return e.points.length<r.series.pointDescriptionEnabledThreshold||!1===r.series.pointDescriptionEnabledThreshold}(e)?(t.marker&&!1===t.marker.enabled&&(s.a11yMarkersForced=!0,o(s.options)),d(s)&&n(s)):s.a11yMarkersForced&&(delete s.a11yMarkersForced,(s=(t=s).resetA11yMarkerOptions)&&merge(!0,t.options,{marker:{enabled:s.enabled,states:{normal:{opacity:s.states&&s.states.normal&&s.states.normal.opacity}}}}))}e.compose=function(e){-1===r.indexOf(e)&&(r.push(e),addEvent(e,"afterSetOptions",s),addEvent(e,"render",t),addEvent(e,"afterRender",a))}}(ForcedMarkersComposition=ForcedMarkersComposition||{});export default ForcedMarkersComposition;