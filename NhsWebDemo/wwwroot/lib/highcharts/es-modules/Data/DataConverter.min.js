"use strict";import U from"./../Core/Utilities.js";var merge=U.merge,isNumber=U.isNumber,DataConverter=function(){function r(e,t){this.dateFormats={"YYYY/mm/dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{1,2})$/,parser:function(e){return e?Date.UTC(+e[1],e[2]-1,+e[3]):NaN}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return e?Date.UTC(+e[3],e[2]-1,+e[1]):NaN},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return e?Date.UTC(+e[3],e[1]-1,+e[2]):NaN}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){var t=new Date;if(!e)return NaN;var r=+e[3];return r>t.getFullYear()-2e3?r+=1900:r+=2e3,Date.UTC(r,e[2]-1,+e[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){return e?Date.UTC(+e[3]+2e3,e[1]-1,+e[2]):NaN}}},this.options=merge(r.defaultOptions,e),this.parseDateFn=t,t=this.options.decimalPoint,this.decimalRegex=(t="."!==t&&","!==t?void 0:t)&&new RegExp("^(-?[0-9]+)"+t+"([0-9]+)$")}return r.prototype.getDateFormat=function(){return this.options.dateFormat},r.prototype.asBoolean=function(e){return"boolean"==typeof e?e:"string"==typeof e?""!==e&&"0"!==e&&"false"!==e:!!this.asNumber(e)},r.prototype.asDate=function(e){var t;if("string"==typeof e)t=this.parseDate(e);else if("number"==typeof e)t=e;else{if(e instanceof Date)return e;t=this.parseDate(this.asString(e))}return new Date(t)},r.prototype.asNumber=function(e){return"number"==typeof e?e:"boolean"==typeof e?e?1:0:"string"==typeof e?(-1<e.indexOf(" ")&&(e=e.replace(/\s+/g,"")),this.decimalRegex&&(e=e.replace(this.decimalRegex,"$1.$2")),parseFloat(e)):e instanceof Date?e.getDate():e?e.getRowCount():NaN},r.prototype.asString=function(e){return""+e},r.prototype.trim=function(e,t){return"string"==typeof e&&(e=e.replace(/^\s+|\s+$/g,""),t&&/^[0-9\s]+$/.test(e)&&(e=e.replace(/\s/g,"")),this.decimalRegex&&(e=e.replace(this.decimalRegex,"$1.$2"))),e},r.prototype.guessType=function(e){var t,r=this,a=r.trim(e),n=r.trim(e,!0),o=parseFloat(n);return+n===o?31536e6<o?"Date":"number":(t=a&&a.length?r.parseDate(e):t)&&isNumber(t)?"Date":"string"},r.prototype.asGuessedType=function(e){var t=this;return{number:t.asNumber,Date:t.asDate,string:t.asString}[t.guessType(e)].call(t,e)},r.prototype.parseDate=function(e,t){var r,a,n,o=this,i=t||o.options.dateFormat,s=NaN;if(o.parseDateFn)s=o.parseDateFn(e);else{if(i)a=(a=o.dateFormats[i])||o.dateFormats["YYYY/mm/dd"],(n=e.match(a.regex))&&(s=a.parser(n));else for(r in o.dateFormats)if(a=o.dateFormats[r],n=e.match(a.regex)){i=r,s=a.parser(n);break}n||("object"==typeof(n=Date.parse(e))&&null!==n&&n.getTime?s=n.getTime()-6e4*n.getTimezoneOffset():isNumber(n)&&(s=n-6e4*new Date(n).getTimezoneOffset(),-1===e.indexOf("2001")&&2001===new Date(s).getFullYear()&&(s=NaN)))}return s},r.prototype.deduceDateFormat=function(e,t,r){var a,n,o,i=[],s=[],p="YYYY/mm/dd",m=[],u=0,d=!1;for((!t||t>e.length)&&(t=e.length);u<t;u++)if(void 0!==e[u]&&e[u]&&e[u].length)for(a=e[u].trim().replace(/\//g," ").replace(/\-/g," ").replace(/\./g," ").split(" "),m=["","",""],o=0;o<a.length;o++)o<m.length&&(n=parseInt(a[o],10))&&(s[o]=!s[o]||s[o]<n?n:s[o],void 0!==i[o]?i[o]!==n&&(i[o]=!1):i[o]=n,31<n?m[o]=n<100?"YY":"YYYY":12<n&&n<=31?(m[o]="dd",d=!0):m[o].length||(m[o]="mm"));if(d){for(o=0;o<i.length;o++)!1!==i[o]?12<s[o]&&"YY"!==m[o]&&"YYYY"!==m[o]&&(m[o]="YY"):12<s[o]&&"mm"===m[o]&&(m[o]="dd");3===m.length&&"dd"===m[1]&&"dd"===m[2]&&(m[2]="YY"),p=m.join("/")}return r&&(this.options.dateFormat=p),p},r.defaultOptions={dateFormat:"",alternativeFormat:""},r}();export default DataConverter;