"use strict";var __extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};return function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();import DataModifier from"./DataModifier.js";import U from"../../Core/Utilities.js";var merge=U.merge,InvertModifier=function(o){function n(e){var t=o.call(this)||this;return t.options=merge(n.defaultOptions,e),t}return __extends(n,o),n.prototype.modifyCell=function(e,t,o,n,r){var i=e.modified,t=i.getRowIndexBy("columnNames",t);return void 0===t?i.setColumns(this.modifyTable(e.clone()).getColumns(),void 0,r):i.setCell(""+o,t,n,r),e},n.prototype.modifyColumns=function(e,t,o,n){var r=e.modified,i=r.getColumn("columnNames")||[],f=e.getColumnNames(),l=e.getRowCount()!==i.length;if(!l)for(var a=0,s=f.length;a<s;++a)if(f[a]!==i[a]){l=!0;break}if(l)return this.modifyTable(e,n);for(var a=0,s=(f=Object.keys(t)).length,u=void 0;a<s;++a)for(var m=t[u=f[a]],d=r.getRowIndexBy("columnNames",u)||r.getRowCount(),c=0,p=o,g=m.length;c<g;++c,++p)r.setCell(""+p,d,m[c],n);return e},n.prototype.modifyRows=function(e,t,o,n){var r=e.getColumnNames(),i=e.modified,f=i.getColumn("columnNames")||[],l=e.getRowCount()!==f.length;if(!l)for(var a=0,s=r.length;a<s;++a)if(r[a]!==f[a]){l=!0;break}if(l)return this.modifyTable(e,n);for(var u,a=0,m=o,s=t.length;a<s;++a,++m)if((u=t[a])instanceof Array)i.setColumn(""+m,u);else for(var d=0,c=r.length;d<c;++d)i.setCell(""+m,d,u[r[d]],n);return e},n.prototype.modifyTable=function(e,t){this.emit({type:"modify",detail:t,table:e});var o=e.modified;if(e.hasColumns(["columnNames"])){for(var n=((e.deleteColumns(["columnNames"])||{}).columnNames||[]).map(function(e){return""+e}),r={},i=0,f=e.getRowCount(),l=void 0;i<f;++i)(l=e.getRow(i))&&(r[n[i]]=l);o.deleteColumns(),o.setColumns(r)}else{for(r={},i=0,f=e.getRowCount(),l=void 0;i<f;++i)(l=e.getRow(i))&&(r[""+i]=l);r.columnNames=e.getColumnNames(),o.deleteColumns(),o.setColumns(r)}return this.emit({type:"afterModify",detail:t,table:e}),e},n.defaultOptions={modifier:"InvertModifier"},n}(DataModifier);DataModifier.addModifier(InvertModifier);export default InvertModifier;