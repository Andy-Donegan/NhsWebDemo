"use strict";var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};return function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();import DataModifier from"./DataModifier.js";import DataTable from"../DataTable.js";import U from"../../Core/Utilities.js";var merge=U.merge,GroupModifier=function(o){function i(t){var e=o.call(this)||this;return e.options=merge(i.defaultOptions,t),e}return __extends(i,o),i.prototype.modifyTable=function(t,e){var o=this;o.emit({type:"modify",detail:e,table:t});for(var i,r,n,a=[],u=[],s=[],f=o.options.groupColumn||t.getColumnNames()[0],p=t.getColumn(f)||[],l=o.options,d=l.invalidValues,m=l.validValues,l=t.modified=t.clone(!0,e),c=0,_=p.length;c<_;++c)void 0!==(n=p[c])&&(n instanceof DataTable||d&&0<=d.indexOf(n)||m&&-1===m.indexOf(n)||(-1===(r=s.indexOf(n))?((i=new DataTable).setRows([t.getRowObject(c)||{}]),a.push(f),u.push(i),s.push(n)):u[r].setRows([t.getRow(c)||[]])));return l.deleteColumns(),l.setColumns({groupBy:a,table:u,value:s}),o.emit({type:"afterModify",detail:e,table:t}),t},i.defaultOptions={modifier:"Group",groupColumn:""},i}(DataModifier);DataModifier.addModifier(GroupModifier);export default GroupModifier;