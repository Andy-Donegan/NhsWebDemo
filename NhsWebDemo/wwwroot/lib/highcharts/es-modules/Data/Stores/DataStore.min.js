"use strict";import DataTable from"../DataTable.js";import U from"../../Core/Utilities.js";var addEvent=U.addEvent,fireEvent=U.fireEvent,merge=U.merge,pick=U.pick,DataStore=function(){function n(t,e){void 0===t&&(t=new DataTable),void 0===e&&(e={columns:{}}),this.table=t,this.metadata=e}return n.addStore=function(t){var e=n.getName(t),r=n.registry;return void 0!==e&&!r[e]&&(r[e]=t,!0)},n.getAllStoreNames=function(){return Object.keys(n.registry)},n.getAllStores=function(){return merge(n.registry)},n.getName=function(t){return(t.toString().match(n.nameRegExp)||["",""])[1]},n.getStore=function(t){return n.registry[t]},n.prototype.describeColumn=function(t,e){var r=this.metadata.columns;r[t]=merge(r[t]||{},e)},n.prototype.describeColumns=function(t){for(var e,r=Object.keys(t);"string"==typeof(e=r.pop());)this.describeColumn(e,t[e])},n.prototype.emit=function(t){fireEvent(this,t.type,t)},n.prototype.getColumnOrder=function(t){for(var e,r=this.metadata.columns,n=Object.keys(r),o=[],i=0,a=n.length;i<a;++i)e=n[i],o[pick(r[e].index,i)]=e;return o},n.prototype.getColumnsForExport=function(t){var e=this.table,r=e.getColumns(),e=e.getColumnNames(),n=this.getColumnOrder(t);return n.length&&e.sort(function(t,e){return n.indexOf(t)<n.indexOf(e)?1:n.indexOf(t)>n.indexOf(e)?-1:0}),{columnNames:e,columnValues:e.map(function(t){return r[t]})}},n.prototype.load=function(){fireEvent(this,"afterLoad",{table:this.table})},n.prototype.on=function(t,e){return addEvent(this,t,e)},n.prototype.setColumnOrder=function(t){for(var e=0,r=t.length;e<r;++e)this.describeColumn(t[e],{index:e})},n.prototype.whatIs=function(t){return this.metadata.columns[t]},n.registry={},n.nameRegExp=/^function\s+(\w*?)(?:DataStore)?\s*\(/,n}();export default DataStore;