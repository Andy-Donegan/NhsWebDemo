"use strict";var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)};return function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}}();import H from"../../Core/Globals.js";var deg2rad=H.deg2rad,svg=H.svg;import Pie3DPoint from"./Pie3DPoint.js";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";var PieSeries=SeriesRegistry.seriesTypes.pie;import U from"../../Core/Utilities.js";var extend=U.extend,pick=U.pick,Pie3DSeries=function(c){function t(){return null!==c&&c.apply(this,arguments)||this}return __extends(t,c),t.prototype.addPoint=function(){c.prototype.addPoint.apply(this,arguments),this.chart.is3d()&&this.update(this.userOptions,!0)},t.prototype.animate=function(t){var e,a,r,o,s;this.chart.is3d()?(e=this.options.animation,a=void 0,r=this.center,o=this.group,s=this.markerGroup,svg&&(!0===e&&(e={}),t?(o.oldtranslateX=pick(o.oldtranslateX,o.translateX),o.oldtranslateY=pick(o.oldtranslateY,o.translateY),a={translateX:r[0],translateY:r[1],scaleX:.001,scaleY:.001},o.attr(a),s&&(s.attrSetters=o.attrSetters,s.attr(a))):(a={translateX:o.oldtranslateX,translateY:o.oldtranslateY,scaleX:1,scaleY:1},o.animate(a,e),s&&s.animate(a,e)))):c.prototype.animate.apply(this,arguments)},t.prototype.drawDataLabels=function(){var p;this.chart.is3d()&&(p=this.chart.options.chart.options3d,this.data.forEach(function(t){var e=t.shapeArgs,a=e.r,r=(e.alpha||p.alpha)*deg2rad,o=(e.beta||p.beta)*deg2rad,s=(e.start+e.end)/2,e=t.labelPosition,t=e.connectorPosition,i=-a*(1-Math.cos(r))*Math.sin(s),n=a*(Math.cos(o)-1)*Math.cos(s);[e.natural,t.breakAt,t.touchingSliceAt].forEach(function(t){t.x+=n,t.y+=i})})),c.prototype.drawDataLabels.apply(this,arguments)},t.prototype.pointAttribs=function(t){var e=c.prototype.pointAttribs.apply(this,arguments),a=this.options;return this.chart.is3d()&&!this.chart.styledMode&&(e.stroke=a.edgeColor||t.color||this.color,e["stroke-width"]=pick(a.edgeWidth,1)),e},t.prototype.translate=function(){var a,r,o,t,s,i,n;c.prototype.translate.apply(this,arguments),this.chart.is3d()&&(r=(a=this).options,o=r.depth||0,t=a.chart.options.chart.options3d,s=t.alpha,i=t.beta,n=r.stacking?(r.stack||0)*o:a._i*o,n+=o/2,!1!==r.grouping&&(n=0),a.data.forEach(function(t){var e=t.shapeArgs;t.shapeType="arc3d",e.z=n,e.depth=.75*o,e.alpha=s,e.beta=i,e.center=a.center,e=(e.end+e.start)/2,t.slicedTranslation={translateX:Math.round(Math.cos(e)*r.slicedOffset*Math.cos(s*deg2rad)),translateY:Math.round(Math.sin(e)*r.slicedOffset*Math.cos(s*deg2rad))}}))},t}(PieSeries);extend(Pie3DSeries.prototype,{pointClass:Pie3DPoint});export default Pie3DSeries;