"use strict";import H from"../Core/Globals.js";var noop=H.noop;import Series from"../Core/Series/Series.js";import U from"../Core/Utilities.js";var DerivedComposition,addEvent=U.addEvent,defined=U.defined;!function(e){var s=[];function t(){Series.prototype.init.apply(this,arguments),this.initialised=!1,this.baseSeries=null,this.eventRemovers=[],this.addEvents()}function r(){var e=this.chart,i=this.options.baseSeries,i=defined(i)&&(e.series[i]||e.get(i));this.baseSeries=i||null}function n(){var e=this;this.eventRemovers.push(addEvent(this.chart,"afterLinkSeries",function(){e.setBaseSeries(),e.baseSeries&&!e.initialised&&(e.setDerivedData(),e.addBaseSeriesEvents(),e.initialised=!0)}))}function o(){var e=this;this.eventRemovers.push(addEvent(this.baseSeries,"updatedData",function(){e.setDerivedData()}),addEvent(this.baseSeries,"destroy",function(){e.baseSeries=null,e.initialised=!1}))}function a(){this.eventRemovers.forEach(function(e){e()}),Series.prototype.destroy.apply(this,arguments)}e.hasDerivedData=!0,e.setDerivedData=noop,e.compose=function(e){var i;return-1===s.indexOf(e)&&(s.push(e),(i=e.prototype).addBaseSeriesEvents=o,i.addEvents=n,i.destroy=a,i.init=t,i.setBaseSeries=r),e},e.init=t,e.setBaseSeries=r,e.addEvents=n,e.addBaseSeriesEvents=o,e.destroy=a}(DerivedComposition=DerivedComposition||{});export default DerivedComposition;