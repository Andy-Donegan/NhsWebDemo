"use strict";var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();import"../Column/ColumnSeries.js";import BulletPoint from"./BulletPoint.js";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";var ColumnSeries=SeriesRegistry.seriesTypes.column;import U from"../../Core/Utilities.js";var extend=U.extend,isNumber=U.isNumber,merge=U.merge,pick=U.pick,relativeLength=U.relativeLength,BulletSeries=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.targetData=void 0,t}return __extends(t,r),t.prototype.drawPoints=function(){var d=this,u=d.chart,c=d.options,h=c.animationLimit||250;r.prototype.drawPoints.apply(this,arguments),d.points.forEach(function(t){var e,r,o,i,a,s=t.options,n=t.target,l=t.y,p=t.targetGraphic;isNumber(n)&&null!==n?(i=(o=merge(c.targetOptions,s.targetOptions)).height,a=t.shapeArgs,t.dlBox&&a&&!isNumber(a.width)&&(a=t.dlBox),e=relativeLength(o.width,a.width),r=d.yAxis.translate(n,!1,!0,!1,!0)-o.height/2-.5,i=d.crispCol.apply({chart:u,borderWidth:o.borderWidth,options:{crisp:c.crisp}},[a.x+a.width/2-e/2,r,e,i]),p?(p[u.pointCount<h?"animate":"attr"](i),isNumber(l)&&null!==l?p.element.point=t:p.element.point=void 0):t.targetGraphic=p=u.renderer.rect().attr(i).add(d.group),u.styledMode||p.attr({fill:pick(o.color,s.color,d.zones.length&&(t.getZone.call({series:d,x:t.x,y:n,options:{}}).color||d.color)||void 0,t.color,d.color),stroke:pick(o.borderColor,t.borderColor,d.options.borderColor),"stroke-width":o.borderWidth,r:o.borderRadius}),isNumber(l)&&null!==l&&(p.element.point=t),p.addClass(t.getClassName()+" highcharts-bullet-target",!0)):p&&(t.targetGraphic=p.destroy())})},t.prototype.getExtremes=function(t){var e=r.prototype.getExtremes.call(this,t),t=this.targetData;return t&&t.length&&(t=r.prototype.getExtremes.call(this,t),isNumber(t.dataMin)&&(e.dataMin=Math.min(pick(e.dataMin,1/0),t.dataMin)),isNumber(t.dataMax)&&(e.dataMax=Math.max(pick(e.dataMax,-1/0),t.dataMax))),e},t.defaultOptions=merge(ColumnSeries.defaultOptions,{targetOptions:{width:"140%",height:3,borderWidth:0,borderRadius:0},tooltip:{pointFormat:'<span style="color:{series.color}">‚óè</span> {series.name}: <b>{point.y}</b>. Target: <b>{point.target}</b><br/>'}}),t}(ColumnSeries);extend(BulletSeries.prototype,{parallelArrays:["x","y","target"],pointArrayMap:["y","target"]}),BulletSeries.prototype.pointClass=BulletPoint,SeriesRegistry.registerSeriesType("bullet",BulletSeries);export default BulletSeries;