"use strict";var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();import GaugePoint from"./GaugePoint.js";import H from"../../Core/Globals.js";var noop=H.noop;import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";var Series=SeriesRegistry.series,ColumnSeries=SeriesRegistry.seriesTypes.column;import U from"../../Core/Utilities.js";var clamp=U.clamp,isNumber=U.isNumber,extend=U.extend,merge=U.merge,pick=U.pick,pInt=U.pInt,GaugeSeries=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.points=void 0,t.options=void 0,t.yAxis=void 0,t}return __extends(t,e),t.prototype.translate=function(){var t=this,d=t.yAxis,c=t.options,l=d.center;t.generatePoints(),t.points.forEach(function(t){var e=merge(c.dial,t.dial),r=pInt(pick(e.radius,"80%"))*l[2]/200,o=pInt(pick(e.baseLength,"70%"))*r/100,i=pInt(pick(e.rearLength,"10%"))*r/100,a=e.baseWidth||3,s=e.topWidth||1,n=c.overshoot,p=d.startAngleRad+d.translate(t.y,null,null,null,!0);!isNumber(n)&&!1!==c.wrap||(n=isNumber(n)?n/180*Math.PI:0,p=clamp(p,d.startAngleRad-n,d.endAngleRad+n)),p=180*p/Math.PI,t.shapeType="path";a=e.path||[["M",-i,-a/2],["L",o,-a/2],["L",r,-s/2],["L",r,s/2],["L",o,a/2],["L",-i,a/2],["Z"]];t.shapeArgs={d:a,translateX:l[0],translateY:l[1],rotation:p},t.plotX=l[0],t.plotY=l[1]})},t.prototype.drawPoints=function(){var a=this,s=a.chart,t=a.yAxis.center,e=a.pivot,n=a.options,r=n.pivot,p=s.renderer;a.points.forEach(function(t){var e=t.graphic,r=t.shapeArgs,o=r.d,i=merge(n.dial,t.dial);e?(e.animate(r),r.d=o):t.graphic=p[t.shapeType](r).attr({rotation:r.rotation,zIndex:1}).addClass("highcharts-dial").add(a.group),s.styledMode||t.graphic[e?"animate":"attr"]({stroke:i.borderColor||"none","stroke-width":i.borderWidth||0,fill:i.backgroundColor||"#000000"})}),e?e.animate({translateX:t[0],translateY:t[1]}):(a.pivot=p.circle(0,0,pick(r.radius,5)).attr({zIndex:2}).addClass("highcharts-pivot").translate(t[0],t[1]).add(a.group),s.styledMode||a.pivot.attr({"stroke-width":r.borderWidth||0,stroke:r.borderColor||"#cccccc",fill:r.backgroundColor||"#000000"}))},t.prototype.animate=function(t){var r=this;t||r.points.forEach(function(t){var e=t.graphic;e&&(e.attr({rotation:180*r.yAxis.startAngleRad/Math.PI}),e.animate({rotation:t.shapeArgs.rotation},r.options.animation))})},t.prototype.render=function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),Series.prototype.render.call(this),this.group.clip(this.chart.clipRect)},t.prototype.setData=function(t,e){Series.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),pick(e,!0)&&this.chart.redraw()},t.prototype.hasData=function(){return!!this.points.length},t.defaultOptions=merge(Series.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1}),t}(Series);extend(GaugeSeries.prototype,{angular:!0,directTouch:!0,drawGraph:noop,drawTracker:ColumnSeries.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:GaugePoint,trackerGroups:["group","dataLabelsGroup"]}),SeriesRegistry.registerSeriesType("gauge",GaugeSeries);export default GaugeSeries;