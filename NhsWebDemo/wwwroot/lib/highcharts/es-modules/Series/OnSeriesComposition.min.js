"use strict";import ColumnSeries from"./Column/ColumnSeries.js";var columnProto=ColumnSeries.prototype;import Series from"../Core/Series/Series.js";var seriesProto=Series.prototype;import U from"../Core/Utilities.js";var OnSeriesComposition,defined=U.defined,stableSort=U.stableSort;!function(t){var e=[];function i(){return seriesProto.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this)}function s(){columnProto.translate.apply(this);var t,i,o,e,s,r,n=this,p=n.options,l=n.chart,a=n.points,x=p.onSeries,x=x&&l.get(x),f=x&&x.options.step,u=x&&x.points,c=l.inverted,S=n.xAxis,d=n.yAxis,m=a.length-1,y=p.onKey||"y",h=u&&u.length,v=0;if(x&&x.visible&&h)for(v=(x.pointXOffset||0)+(x.barW||0)/2,p=x.currentDataGrouping,e=u[h-1].x+(p?p.totalRange:0),stableSort(a,function(t,o){return t.x-o.x}),y="plot"+y[0].toUpperCase()+y.substr(1);h--&&a[m]&&(o=u[h],(t=a[m]).y=o.y,!(o.x<=t.x&&void 0!==o[y]&&(t.x<=e&&(t.plotY=o[y],o.x<t.x&&!f&&(s=u[h+1])&&void 0!==s[y]&&(r=(t.x-o.x)/(s.x-o.x),t.plotY+=r*(s[y]-o[y]),t.y+=r*(s.y-o.y))),h++,--m<0))););a.forEach(function(t,o){var e;t.plotX+=v,void 0!==t.plotY&&!c||(0<=t.plotX&&t.plotX<=S.len?c?(t.plotY=S.translate(t.x,0,1,0,1),t.plotX=defined(t.y)?d.translate(t.y,0,0,0,1):0):t.plotY=(S.opposite?0:n.yAxis.len)+S.offset:t.shapeArgs={}),(i=a[o-1])&&i.plotX===t.plotX&&(void 0===i.stackIndex&&(i.stackIndex=0),e=i.stackIndex+1),t.stackIndex=e}),this.onSeries=x}t.compose=function(t){var o;return-1===e.indexOf(t)&&(e.push(t),(o=t.prototype).getPlotBox=i,o.translate=s),t},t.getPlotBox=i,t.translate=s}(OnSeriesComposition=OnSeriesComposition||{});export default OnSeriesComposition;