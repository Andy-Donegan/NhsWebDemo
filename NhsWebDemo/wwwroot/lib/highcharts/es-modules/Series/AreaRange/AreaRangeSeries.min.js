"use strict";var __extends=this&&this.__extends||function(){var i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)};return function(t,o){function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();import AreaRangePoint from"./AreaRangePoint.js";import AreaSeries from"../Area/AreaSeries.js";var areaProto=AreaSeries.prototype;import ColumnSeries from"../Column/ColumnSeries.js";var columnProto=ColumnSeries.prototype;import H from"../../Core/Globals.js";var noop=H.noop;import Series from"../../Core/Series/Series.js";var seriesProto=Series.prototype;import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";import U from"../../Core/Utilities.js";var defined=U.defined,extend=U.extend,isArray=U.isArray,pick=U.pick,merge=U.merge,AreaRangeSeries=function(o){function t(){var t=null!==o&&o.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.lowerStateMarkerGraphic=void 0,t.xAxis=void 0,t}return __extends(t,o),t.prototype.toYData=function(t){return[t.low,t.high]},t.prototype.highToXY=function(t){var o=this.chart,e=this.xAxis.postTranslate(t.rectPlotX||0,this.yAxis.len-t.plotHigh);t.plotHighX=e.x-o.plotLeft,t.plotHigh=e.y-o.plotTop,t.plotLowX=t.plotX},t.prototype.translate=function(){var i=this,r=i.yAxis;areaProto.translate.apply(i),i.points.forEach(function(t){var o=t.high,e=t.plotY;t.isNull?t.plotY=null:(t.plotLow=e,t.plotHigh=r.translate(i.dataModify?i.dataModify.modifyValue(o):o,0,1,0,1),i.dataModify&&(t.yBottom=t.plotHigh))}),this.chart.polar&&this.points.forEach(function(t){i.highToXY(t),t.tooltipPos=[(t.plotHighX+t.plotLowX)/2,(t.plotHigh+t.plotLow)/2]})},t.prototype.getGraphPath=function(t){for(var o,e,i,r=[],a=[],l=areaProto.getGraphPath,p=this.options,s=this.chart.polar,n=s&&!1!==p.connectEnds,h=p.connectNulls,g=p.step,d=(t=t||this.points).length;d--;){var c=t[d],y=s?{plotX:c.rectPlotX,plotY:c.yBottom,doCurve:!1}:{plotX:c.plotX,plotY:c.plotY,doCurve:!1};c.isNull||n||h||t[d+1]&&!t[d+1].isNull||a.push(y),o={polarPlotY:c.polarPlotY,rectPlotX:c.rectPlotX,yBottom:c.yBottom,plotX:pick(c.plotHighX,c.plotX),plotY:c.plotHigh,isNull:c.isNull},a.push(o),r.push(o),c.isNull||n||h||t[d-1]&&!t[d-1].isNull||a.push(y)}return e=l.call(this,t),g&&(p.step={left:"right",center:"center",right:"left"}[g=!0===g?"left":g]),i=l.call(this,r),l=l.call(this,a),p.step=g,i=[].concat(e,i),!this.chart.polar&&l[0]&&"M"===l[0][0]&&(l[0]=["L",l[0][1],l[0][2]]),this.graphPath=i,this.areaPath=e.concat(l),i.isArea=!0,i.xMap=e.xMap,this.areaPath.xMap=e.xMap,i},t.prototype.drawDataLabels=function(){var t,o,e,i,r,a=this.points,l=a.length,p=[],s=this.options.dataLabels,n=this.chart.inverted;if(s){if(isArray(s)?(i=s[0]||{enabled:!1},r=s[1]||{enabled:!1}):((i=extend({},s)).x=s.xHigh,i.y=s.yHigh,(r=extend({},s)).x=s.xLow,r.y=s.yLow),i.enabled||this._hasPointLabels){for(t=l;t--;)(o=a[t])&&(e=i.inside?o.plotHigh<o.plotLow:o.plotHigh>o.plotLow,o.y=o.high,o._plotY=o.plotY,o.plotY=o.plotHigh,p[t]=o.dataLabel,o.dataLabel=o.dataLabelUpper,o.below=e,n?i.align||(i.align=e?"right":"left"):i.verticalAlign||(i.verticalAlign=e?"top":"bottom"));for(this.options.dataLabels=i,seriesProto.drawDataLabels&&seriesProto.drawDataLabels.apply(this,arguments),t=l;t--;)(o=a[t])&&(o.dataLabelUpper=o.dataLabel,o.dataLabel=p[t],delete o.dataLabels,o.y=o.low,o.plotY=o._plotY)}if(r.enabled||this._hasPointLabels){for(t=l;t--;)(o=a[t])&&(e=r.inside?o.plotHigh<o.plotLow:o.plotHigh>o.plotLow,o.below=!e,n?r.align||(r.align=e?"left":"right"):r.verticalAlign||(r.verticalAlign=e?"bottom":"top"));this.options.dataLabels=r,seriesProto.drawDataLabels&&seriesProto.drawDataLabels.apply(this,arguments)}if(i.enabled)for(t=l;t--;)(o=a[t])&&(o.dataLabels=[o.dataLabelUpper,o.dataLabel].filter(function(t){return!!t}));this.options.dataLabels=s}},t.prototype.alignDataLabel=function(){columnProto.alignDataLabel.apply(this,arguments)},t.prototype.drawPoints=function(){var t,o,e=this,i=e.points.length;for(seriesProto.drawPoints.apply(e,arguments),o=0;o<i;)(t=e.points[o]).origProps={plotY:t.plotY,plotX:t.plotX,isInside:t.isInside,negative:t.negative,zone:t.zone,y:t.y},t.lowerGraphic=t.graphic,t.graphic=t.upperGraphic,t.plotY=t.plotHigh,defined(t.plotHighX)&&(t.plotX=t.plotHighX),t.y=pick(t.high,t.origProps.y),t.negative=t.y<(e.options.threshold||0),e.zones.length&&(t.zone=t.getZone()),e.chart.polar||(t.isInside=t.isTopInside=void 0!==t.plotY&&0<=t.plotY&&t.plotY<=e.yAxis.len&&0<=t.plotX&&t.plotX<=e.xAxis.len),o++;for(seriesProto.drawPoints.apply(e,arguments),o=0;o<i;)(t=e.points[o]).upperGraphic=t.graphic,t.graphic=t.lowerGraphic,t.origProps&&(extend(t,t.origProps),delete t.origProps),o++},t.defaultOptions=merge(AreaSeries.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">‚óè</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),t}(AreaSeries);extend(AreaRangeSeries.prototype,{pointArrayMap:["low","high"],pointValKey:"low",deferTranslatePolar:!0,pointClass:AreaRangePoint,setStackedPoints:noop}),SeriesRegistry.registerSeriesType("arearange",AreaRangeSeries);export default AreaRangeSeries;