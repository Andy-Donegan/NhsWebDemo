"use strict";var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};return function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();import Point from"../../Core/Series/Point.js";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";var Series=SeriesRegistry.series,PiePoint=SeriesRegistry.seriesTypes.pie.prototype.pointClass;import U from"../../Core/Utilities.js";var defined=U.defined,isNumber=U.isNumber,merge=U.merge,objectEach=U.objectEach,pick=U.pick,TimelinePoint=function(o){function t(){var t=null!==o&&o.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}return __extends(t,o),t.prototype.alignConnector=function(){var t=this,e=t.series,o=t.connector,i=t.dataLabel,r=t.dataLabel.options=merge(e.options.dataLabels,t.options.dataLabels),n=t.series.chart,s=o.getBBox(),s={x:s.x+i.translateX,y:s.y+i.translateY};n.inverted?s.y-=i.options.connectorWidth/2:s.x+=i.options.connectorWidth/2,o[n.isInsidePlot(s.x,s.y)?"animate":"attr"]({d:t.getConnectorPath()}),e.chart.styledMode||o.attr({stroke:r.connectorColor||t.color,"stroke-width":r.connectorWidth,opacity:i[defined(i.newOpacity)?"newOpacity":"opacity"]})},t.prototype.drawConnector=function(){var t=this,e=t.series;t.connector||(t.connector=e.chart.renderer.path(t.getConnectorPath()).attr({zIndex:-1}).add(t.dataLabel)),t.series.chart.isInsidePlot(t.dataLabel.x,t.dataLabel.y)&&t.alignConnector()},t.prototype.getConnectorPath=function(){var t=this,e=t.series.chart,o=t.series.xAxis.len,i=e.inverted,r=i?"x2":"y2",n=t.dataLabel,s=n.targetPosition,a={x1:t.plotX,y1:t.plotY,x2:t.plotX,y2:(isNumber(s.y)?s:n).y},p=(n.alignAttr||n)[r[0]]<t.series.yAxis.len/2;return i&&(a={x1:t.plotY,y1:o-t.plotX,x2:s.x||n.x,y2:o-t.plotX}),p&&(a[r]+=n[i?"width":"height"]),objectEach(a,function(t,e){a[e]-=(n.alignAttr||n)[e[0]]}),e.renderer.crispLine([["M",a.x1,a.y1],["L",a.x2,a.y2]],n.options.connectorWidth)},t.prototype.init=function(){var t=o.prototype.init.apply(this,arguments);return t.name=pick(t.name,"Event"),t.y=1,t},t.prototype.isValid=function(){return null!==this.options.y},t.prototype.setState=function(){var t=o.prototype.setState;this.isNull||t.apply(this,arguments)},t.prototype.setVisible=function(t,e){var o=this.series;e=pick(e,o.options.ignoreHiddenPoint),PiePoint.prototype.setVisible.call(this,t,!1),o.processData(),e&&o.chart.redraw()},t.prototype.applyOptions=function(t,e){return t=Point.prototype.optionsToObject.call(this,t),this.userDLOptions=merge(this.userDLOptions,t.dataLabels),o.prototype.applyOptions.call(this,t,e)},t}(Series.prototype.pointClass);export default TimelinePoint;