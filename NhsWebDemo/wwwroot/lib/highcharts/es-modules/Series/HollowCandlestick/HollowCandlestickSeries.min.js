"use strict";var __extends=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();import HollowCandlestickPoint from"./HollowCandlestickPoint.js";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";import U from"../../Core/Utilities.js";import Axis from"../../Core/Axis/Axis.js";var CandlestickSeries=SeriesRegistry.seriesTypes.candlestick,addEvent=U.addEvent,merge=U.merge,HollowCandlestickSeries=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.hollowCandlestickData=[],t.options=void 0,t.points=void 0,t}return __extends(t,e),t.prototype.getPriceMovement=function(){var t=this,o=t.allGroupedData||t.yData,i=this.hollowCandlestickData;if(!i.length&&o&&o.length){i.push({isBullish:!0,trendDirection:"up"});for(var e=1;e<o.length;e++){var r=o[e],n=o[e-1];i.push(t.isBullish(r,n))}}},t.prototype.getLineColor=function(t){return"up"===t?this.options.upColor||"#06b535":this.options.color||"#f21313"},t.prototype.getPointFill=function(t){return t.isBullish?"transparent":"up"===t.trendDirection?this.options.upColor||"#06b535":this.options.color||"#f21313"},t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.hollowCandlestickData=[]},t.prototype.isBullish=function(t,o){return{isBullish:t[0]<=t[3],trendDirection:t[3]<o[3]?"down":"up"}},t.prototype.pointAttribs=function(t,o){var i=e.prototype.pointAttribs.call(this,t,o),t=t.index,t=this.hollowCandlestickData[t];return i.fill=this.getPointFill(t)||i.fill,i.stroke=this.getLineColor(t.trendDirection)||i.stroke,o&&(o=this.options.states[o],i.fill=o.color||i.fill,i.stroke=o.lineColor||i.stroke,i["stroke-width"]=o.lineWidth||i["stroke-width"]),i},t.defaultOptions=merge(CandlestickSeries.defaultOptions,{color:"#f21313",dataGrouping:{groupAll:!0,groupPixelWidth:10},lineColor:"#f21313",upColor:"#06b535",upLineColor:"#06b535"}),t}(CandlestickSeries);addEvent(HollowCandlestickSeries,"updatedData",function(){this.hollowCandlestickData.length&&(this.hollowCandlestickData.length=0)}),addEvent(Axis,"postProcessData",function(){this.series.forEach(function(t){t.is("hollowcandlestick")&&t.getPriceMovement()})}),HollowCandlestickSeries.prototype.pointClass=HollowCandlestickPoint,SeriesRegistry.registerSeriesType("hollowcandlestick",HollowCandlestickSeries);export default HollowCandlestickSeries;