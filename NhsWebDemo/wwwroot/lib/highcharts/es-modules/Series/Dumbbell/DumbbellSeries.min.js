"use strict";var __extends=this&&this.__extends||function(){var r=function(o,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t])})(o,e)};return function(o,e){function t(){this.constructor=o}r(o,e),o.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}();import ColumnSeries from"../Column/ColumnSeries.js";var colProto=ColumnSeries.prototype;import DumbbellPoint from"./DumbbellPoint.js";import H from"../../Core/Globals.js";var noop=H.noop;import Series from"../../Core/Series/Series.js";var seriesProto=Series.prototype;import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";var _a=SeriesRegistry.seriesTypes,AreaRangeSeries=_a.arearange,columnRangeProto=_a.columnrange.prototype,areaRangeProto=AreaRangeSeries.prototype;import SVGRenderer from"../../Core/Renderer/SVG/SVGRenderer.js";import U from"../../Core/Utilities.js";var extend=U.extend,merge=U.merge,pick=U.pick,DumbbellSeries=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.data=void 0,o.options=void 0,o.points=void 0,o.columnMetrics=void 0,o}return __extends(o,e),o.prototype.getConnectorAttribs=function(o){var e=this,t=e.chart,r=o.options,n=e.options,i=e.xAxis,s=e.yAxis,p=pick(r.connectorWidth,n.connectorWidth),a=pick(r.connectorColor,n.connectorColor,r.color,o.zone?o.zone.color:void 0,o.color),l=pick(n.states&&n.states.hover&&n.states.hover.connectorWidthPlus,1),c=pick(r.dashStyle,n.dashStyle),h=pick(o.plotLow,o.plotY),e=s.toPixels(n.threshold||0,!0),e=t.inverted?s.len-e:e,e=pick(o.plotHigh,e);return o.state&&(p+=l),h<0?h=0:h>=s.len&&(h=s.len),e<0?e=0:e>=s.len&&(e=s.len),(o.plotX<0||o.plotX>i.len)&&(p=0),o.upperGraphic&&(i={y:o.y,zone:o.zone},o.y=o.high,o.zone=o.zone?o.getZone():void 0,a=pick(r.connectorColor,n.connectorColor,r.color,o.zone?o.zone.color:void 0,o.color),extend(o,i)),e={d:SVGRenderer.prototype.crispLine([["M",o.plotX,h],["L",o.plotX,e]],p,"ceil")},t.styledMode||(e.stroke=a,e["stroke-width"]=p,c&&(e.dashstyle=c)),e},o.prototype.drawConnector=function(o){var e=this,t=pick(e.options.animationLimit,250),t=o.connector&&e.chart.pointCount<t?"animate":"attr";o.connector||(o.connector=e.chart.renderer.path().addClass("highcharts-lollipop-stem").attr({zIndex:-1}).add(e.markerGroup)),o.connector[t](this.getConnectorAttribs(o))},o.prototype.getColumnMetrics=function(){var o=colProto.getColumnMetrics.apply(this,arguments);return o.offset+=o.width/2,o},o.prototype.translate=function(){this.setShapeArgs.apply(this),this.translatePoint.apply(this,arguments),this.points.forEach(function(o){var e=o.shapeArgs,t=o.pointWidth;o.plotX=e.x,e.x=o.plotX-t/2,o.tooltipPos=null}),this.columnMetrics.offset-=this.columnMetrics.width/2},o.prototype.drawPoints=function(){var o,e,t=this,r=t.chart,n=t.points.length,i=t.lowColor=t.options.lowColor,s=0;for(this.seriesDrawPoints.apply(t,arguments);s<n;)o=t.points[s],t.drawConnector(o),o.upperGraphic&&(o.upperGraphic.element.point=o).upperGraphic.addClass("highcharts-lollipop-high"),(o.connector.element.point=o).lowerGraphic&&(e=o.zone&&o.zone.color,e=pick(o.options.lowColor,i,o.options.color,e,o.color,t.color),r.styledMode||o.lowerGraphic.attr({fill:e}),o.lowerGraphic.addClass("highcharts-lollipop-low")),s++},o.prototype.markerAttribs=function(){var o=areaRangeProto.markerAttribs.apply(this,arguments);return o.x=Math.floor(o.x||0),o.y=Math.floor(o.y||0),o},o.prototype.pointAttribs=function(o,e){var t=seriesProto.pointAttribs.apply(this,arguments);return"hover"===e&&delete t.fill,t},o.defaultOptions=merge(AreaRangeSeries.defaultOptions,{trackByArea:!1,fillColor:"none",lineWidth:0,pointRange:1,connectorWidth:1,stickyTracking:!1,groupPadding:.2,crisp:!1,pointPadding:.1,lowColor:"#333333",states:{hover:{lineWidthPlus:0,connectorWidthPlus:1,halo:!1}}}),o}(AreaRangeSeries);extend(DumbbellSeries.prototype,{crispCol:colProto.crispCol,drawGraph:noop,drawTracker:ColumnSeries.prototype.drawTracker,pointClass:DumbbellPoint,setShapeArgs:columnRangeProto.translate,seriesDrawPoints:areaRangeProto.drawPoints,trackerGroups:["group","markerGroup","dataLabelsGroup"],translatePoint:areaRangeProto.translate}),SeriesRegistry.registerSeriesType("dumbbell",DumbbellSeries);export default DumbbellSeries;