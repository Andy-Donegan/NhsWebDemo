"use strict";var __extends=this&&this.__extends||function(){var n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)};return function(t,i){function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}();import A from"../../Core/Animation/AnimationUtilities.js";var setAnimation=A.setAnimation;import Point from"../../Core/Series/Point.js";import U from"../../Core/Utilities.js";var addEvent=U.addEvent,defined=U.defined,extend=U.extend,isNumber=U.isNumber,pick=U.pick,relativeLength=U.relativeLength,PiePoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelDistance=void 0,t.options=void 0,t.series=void 0,t}return __extends(t,e),t.prototype.getConnectorPath=function(){var t=this.labelPosition,i=this.series.options.dataLabels,e=this.connectorShapes,n=i.connectorShape;return(n=e[n]?e[n]:n).call(this,{x:t.final.x,y:t.final.y,alignment:t.alignment},t.connectorPosition,i)},t.prototype.getTranslate=function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},t.prototype.haloPath=function(t){var i=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(i.x,i.y,i.r+t,i.r+t,{innerR:i.r-1,start:i.start,end:i.end})},t.prototype.init=function(){var i=this;e.prototype.init.apply(this,arguments),this.name=pick(this.name,"Slice");function t(t){i.slice("select"===t.type)}return addEvent(this,"select",t),addEvent(this,"unselect",t),this},t.prototype.isValid=function(){return isNumber(this.y)&&0<=this.y},t.prototype.setVisible=function(i,t){var e=this,n=this.series,s=n.chart,o=n.options.ignoreHiddenPoint;t=pick(t,o),i!==this.visible&&(this.visible=this.options.visible=i=void 0===i?!this.visible:i,n.options.data[n.data.indexOf(this)]=this.options,["graphic","dataLabel","connector","shadowGroup"].forEach(function(t){e[t]&&e[t][i?"show":"hide"](i)}),this.legendItem&&s.legend.colorizeItem(this,i),i||"hover"!==this.state||this.setState(""),o&&(n.isDirty=!0),t&&s.redraw())},t.prototype.slice=function(t,i,e){var n=this.series,s=n.chart;setAnimation(e,s),i=pick(i,!0),this.sliced=this.options.sliced=t=defined(t)?t:!this.sliced,n.options.data[n.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},t}(Point);extend(PiePoint.prototype,{connectorShapes:{fixedOffset:function(t,i,e){var n=i.breakAt,i=i.touchingSliceAt,n=e.softConnector?["C",t.x+("left"===t.alignment?-5:5),t.y,2*n.x-i.x,2*n.y-i.y,n.x,n.y]:["L",n.x,n.y];return[["M",t.x,t.y],n,["L",i.x,i.y]]},straight:function(t,i){i=i.touchingSliceAt;return[["M",t.x,t.y],["L",i.x,i.y]]},crookedLine:function(t,i,e){var n=i.touchingSliceAt,s=this.series,o=s.center[0],r=s.chart.plotWidth,a=s.chart.plotLeft,i=t.alignment,s=this.shapeArgs.r,e=relativeLength(e.crookDistance,1),o="left"===i?o+s+(r+a-o-s)*(1-e):a+(o-s)*e,s=["L",o,t.y],e=!0;("left"===i?o>t.x||o<n.x:o<t.x||o>n.x)&&(e=!1);t=[["M",t.x,t.y]];return e&&t.push(s),t.push(["L",n.x,n.y]),t}}});export default PiePoint;