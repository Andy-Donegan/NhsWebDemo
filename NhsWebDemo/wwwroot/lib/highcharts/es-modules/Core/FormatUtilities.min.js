"use strict";import D from"./DefaultOptions.js";var defaultOptions=D.defaultOptions,defaultTime=D.defaultTime;import U from"./Utilities.js";var getNestedProperty=U.getNestedProperty,isNumber=U.isNumber,pick=U.pick,pInt=U.pInt;function dateFormat(t,e,i){return defaultTime.dateFormat(t,e,i)}function format(t,e,i){for(var r,a,o,n,s="{",m=!1,p=/f$/,l=/\.([0-9])/,u=defaultOptions.lang,d=i&&i.time||defaultTime,f=i&&i.numberFormatter||numberFormat,h=[];t&&-1!==(r=t.indexOf(s));)a=t.slice(0,r),m?(o=a.split(":"),n=getNestedProperty(o.shift()||"",e),o.length&&"number"==typeof n&&(a=o.join(":"),p.test(a)?(o=parseInt((a.match(l)||["","-1"])[1],10),null!==n&&(n=f(n,o,u.decimalPoint,-1<a.indexOf(",")?u.thousandsSep:""))):n=d.dateFormat(a,n)),h.push(n)):h.push(a),t=t.slice(r+1),s=(m=!m)?"}":"{";return h.push(t),h.join("")}function numberFormat(t,e,i,r){e=+e;var a=defaultOptions.lang,o=((t=+t||0).toString().split(".")[1]||"").split("e")[0].length,n=t.toString().split("e"),s=e;-1===e?e=Math.min(o,20):isNumber(e)?e&&n[1]&&n[1]<0&&(0<=(p=e+ +n[1])?(n[0]=(+n[0]).toExponential(p).split("e")[0],e=p):(n[0]=n[0].split(".")[0]||0,t=e<20?(n[0]*Math.pow(10,n[1])).toFixed(e):0,n[1]=0)):e=2;var m=(Math.abs(n[1]?n[0]:t)+Math.pow(10,-Math.max(e,o)-1)).toFixed(e),p=String(pInt(m)),o=3<p.length?p.length%3:0;return i=pick(i,a.decimalPoint),r=pick(r,a.thousandsSep),t=t<0?"-":"",t+=o?p.substr(0,o)+r:"",+n[1]<0&&!s?t="0":t+=p.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+r),e&&(t+=i+m.slice(-e)),n[1]&&0!=+t&&(t+="e"+n[1]),t}var FormatUtilities={dateFormat:dateFormat,format:format,numberFormat:numberFormat};export default FormatUtilities;