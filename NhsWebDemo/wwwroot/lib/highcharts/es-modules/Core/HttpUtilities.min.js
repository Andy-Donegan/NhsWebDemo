"use strict";import G from"../Core/Globals.js";var doc=G.doc;import U from"../Core/Utilities.js";var createElement=U.createElement,discardElement=U.discardElement,merge=U.merge,objectEach=U.objectEach;function ajax(e){var a=merge(!0,{url:!1,type:"get",dataType:"json",success:!1,error:!1,data:!1,headers:{}},e),e={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},r=new XMLHttpRequest;function t(e,t){a.error&&a.error(e,t)}if(!a.url)return!1;r.open(a.type.toUpperCase(),a.url,!0),a.headers["Content-Type"]||r.setRequestHeader("Content-Type",e[a.dataType]||e.text),objectEach(a.headers,function(e,t){r.setRequestHeader(t,e)}),r.onreadystatechange=function(){var e;if(4===r.readyState){if(200===r.status){if(e=r.responseText,"json"===a.dataType)try{e=JSON.parse(e)}catch(e){return t(r,e)}return a.success&&a.success(e)}t(r,r.responseText)}};try{a.data=JSON.stringify(a.data)}catch(e){}r.send(a.data||!0)}function getJSON(e,t){HttpUtilities.ajax({url:e,success:t,dataType:"json",headers:{"Content-Type":"text/plain"}})}function post(e,t,a){var r=createElement("form",merge({method:"post",action:e,enctype:"multipart/form-data"},a),{display:"none"},doc.body);objectEach(t,function(e,t){createElement("input",{type:"hidden",name:t,value:e},null,r)}),r.submit(),discardElement(r)}var HttpUtilities={ajax:ajax,getJSON:getJSON,post:post};export default HttpUtilities;