"use strict";import U from"./Utilities.js";var Responsive,extend=U.extend,find=U.find,isArray=U.isArray,isObject=U.isObject,merge=U.merge,objectEach=U.objectEach,pick=U.pick,splat=U.splat,uniqueKey=U.uniqueKey;!function(t){var i=[];t.compose=function(t){return-1===i.indexOf(t)&&(i.push(t),extend(t.prototype,e.prototype)),t};var e=(n.prototype.currentOptions=function(t){var p=this,i={};return function e(t,n,s,o){var r;objectEach(t,function(t,i){if(!o&&-1<p.collectionsWithUpdate.indexOf(i)&&n[i])for(t=splat(t),s[i]=[],r=0;r<Math.max(t.length,n[i].length);r++)n[i][r]&&(void 0===t[r]?s[i][r]=n[i][r]:(s[i][r]={},e(t[r],n[i][r],s[i][r],o+1)));else isObject(t)?(s[i]=isArray(t)?[]:{},e(t,n[i]||{},s[i],o+1)):void 0===n[i]?s[i]=null:s[i]=n[i]})}(t,this.options,i,0),i},n.prototype.matchResponsiveRule=function(t,i){var e=t.condition;(e.callback||function(){return this.chartWidth<=pick(e.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=pick(e.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=pick(e.minWidth,0)&&this.chartHeight>=pick(e.minHeight,0)}).call(this)&&i.push(t._id)},n.prototype.setResponsive=function(t,i){var e=this,n=this.options.responsive,s=this.currentResponsive,o=[];!i&&n&&n.rules&&n.rules.forEach(function(t){void 0===t._id&&(t._id=uniqueKey()),e.matchResponsiveRule(t,o)},this);var r=merge.apply(void 0,o.map(function(i){return find((n||{}).rules||[],function(t){return t._id===i})}).map(function(t){return t&&t.chartOptions}));r.isResponsiveOptions=!0;o=o.toString()||void 0,i=s&&s.ruleIds;o!==i&&(s&&this.update(s.undoOptions,t,!0),o?((s=this.currentOptions(r)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:o,mergedOptions:r,undoOptions:s},this.update(r,t,!0)):this.currentResponsive=void 0)},n);function n(){}}(Responsive=Responsive||{});export default Responsive;