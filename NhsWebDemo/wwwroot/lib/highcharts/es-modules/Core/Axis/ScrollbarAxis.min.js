"use strict";import U from"../Utilities.js";var addEvent=U.addEvent,defined=U.defined,pick=U.pick,ScrollbarAxis=function(){function t(){}return t.compose=function(i,o){if(-1!==t.composed.indexOf(i))return i;t.composed.push(i);function a(i){var o=pick(i.options&&i.options.min,i.min),t=pick(i.options&&i.options.max,i.max);return{axisMin:o,axisMax:t,scrollMin:defined(i.dataMin)?Math.min(o,i.min,i.dataMin,pick(i.threshold,1/0)):o,scrollMax:defined(i.dataMax)?Math.max(t,i.max,i.dataMax,pick(i.threshold,-1/0)):t}}return addEvent(i,"afterInit",function(){var n=this;n.options&&n.options.scrollbar&&n.options.scrollbar.enabled&&(n.options.scrollbar.vertical=!n.horiz,n.options.startOnTick=n.options.endOnTick=!1,n.scrollbar=new o(n.chart.renderer,n.options.scrollbar,n.chart),addEvent(n.scrollbar,"changed",function(i){var o,t=a(n),e=t.axisMin,s=t.axisMax,r=t.scrollMin,t=t.scrollMax-r;defined(e)&&defined(s)&&(t=n.horiz&&!n.reversed||!n.horiz&&n.reversed?(o=r+t*this.to,r+t*this.from):(o=r+t*(1-this.from),r+t*(1-this.to)),this.shouldUpdateExtremes(i.DOMType)?n.setExtremes(t,o,!0,"mousemove"!==i.DOMType&&"touchmove"!==i.DOMType,i):this.setRange(this.from,this.to))}))}),addEvent(i,"afterRender",function(){var i=this,o=a(i),t=o.scrollMin,e=o.scrollMax,s=i.scrollbar,r=i.axisTitleMargin+(i.titleOffset||0),n=i.chart.scrollbarsOffsets,o=i.options.margin||0;s&&(o=i.horiz?(i.opposite||(n[1]+=r),s.position(i.left,i.top+i.height+2+n[1]-(i.opposite?o:0),i.width,i.height),i.opposite||(n[1]+=o),1):(i.opposite&&(n[0]+=r),r=void 0,r=s.options.opposite?i.left+i.width+2+n[0]-(i.opposite?0:o):i.opposite?0:o,s.position(r,i.top,i.width,i.height),i.opposite&&(n[0]+=o),0),n[o]+=s.size+s.options.margin,isNaN(t)||isNaN(e)||!defined(i.min)||!defined(i.max)||i.min===i.max?s.setRange(0,1):(o=(i.min-t)/(e-t),t=(i.max-t)/(e-t),i.horiz&&!i.reversed||!i.horiz&&i.reversed?s.setRange(o,t):s.setRange(1-t,1-o)))}),addEvent(i,"afterGetOffset",function(){var i=this,o=i.scrollbar&&!i.scrollbar.options.opposite,t=i.horiz?2:o?3:1,o=i.scrollbar;o&&(i.chart.scrollbarsOffsets=[0,0],i.chart.axisOffset[t]+=o.size+o.options.margin)}),i},t.composed=[],t}();export default ScrollbarAxis;