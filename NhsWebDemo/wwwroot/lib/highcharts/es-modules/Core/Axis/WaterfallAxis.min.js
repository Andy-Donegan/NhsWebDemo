"use strict";import StackItem from"../../Extensions/Stacking.js";import U from"../Utilities.js";var WaterfallAxis,addEvent=U.addEvent,objectEach=U.objectEach;!function(t){var a=(e.prototype.renderStackTotals=function(){var t=this.axis,a=t.waterfall.stacks,e=t.stacking&&t.stacking.stackTotalGroup,l=new StackItem(t,t.options.stackLabels,!1,0,void 0);this.dummyStackItem=l,objectEach(a,function(t){objectEach(t,function(t){l.total=t.stackTotal,t.label&&(l.label=t.label),StackItem.prototype.render.call(l,e),t.label=l.label,delete l.label})}),l.total=null},e);function e(t){this.axis=t,this.stacks={changed:!1}}function l(){var t=this.waterfall.stacks;t&&(t.changed=!1,delete t.alreadyChanged)}function s(){var t=this,a=t.options.stackLabels;a&&a.enabled&&t.waterfall.stacks&&t.waterfall.renderStackTotals()}function n(){for(var t=this.axes,a=this.series,e=a.length;e--;)a[e].options.stacking&&(t.forEach(function(t){t.isXAxis||(t.waterfall.stacks.changed=!0)}),e=0)}function i(){var t=this;t.waterfall||(t.waterfall=new a(t))}t.Composition=a,t.compose=function(t,a){addEvent(t,"init",i),addEvent(t,"afterBuildStacks",l),addEvent(t,"afterRender",s),addEvent(a,"beforeRedraw",n)}}(WaterfallAxis=WaterfallAxis||{});export default WaterfallAxis;