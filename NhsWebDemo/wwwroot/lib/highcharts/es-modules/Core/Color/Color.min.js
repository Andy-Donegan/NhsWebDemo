"use strict";import H from"../Globals.js";import U from"../Utilities.js";var isNumber=U.isNumber,merge=U.merge,pInt=U.pInt,Color=function(){function p(t){this.rgba=[NaN,NaN,NaN,NaN],this.input=t;var r=H.Color;return r&&r!==p?new r(t):this instanceof p?void this.init(t):new p(t)}return p.parse=function(t){return t?new p(t):p.None},p.prototype.init=function(t){var r,s,e,n,o,i;if("object"==typeof t&&void 0!==t.stops)this.stops=t.stops.map(function(t){return new p(t[1])});else if("string"==typeof t)if(this.input=t=p.names[t.toLowerCase()]||t,"#"===t.charAt(0)&&(o=t.length,i=parseInt(t.substr(1),16),7===o?s=[(16711680&i)>>16,(65280&i)>>8,255&i,1]:4===o&&(s=[(3840&i)>>4|(3840&i)>>8,(240&i)>>4|240&i,(15&i)<<4|15&i,1])),!s)for(e=p.parsers.length;e--&&!s;)(r=(n=p.parsers[e]).regex.exec(t))&&(s=n.parse(r));s&&(this.rgba=s)},p.prototype.get=function(s){var t=this.input,r=this.rgba;if("object"!=typeof t||void 0===this.stops)return r&&isNumber(r[0])?"rgb"===s||!s&&1===r[3]?"rgb("+r[0]+","+r[1]+","+r[2]+")":"a"===s?""+r[3]:"rgba("+r.join(",")+")":t;var e=merge(t);return e.stops=[].slice.call(e.stops),this.stops.forEach(function(t,r){e.stops[r]=[e.stops[r][0],t.get(s)]}),e},p.prototype.brighten=function(r){var t=this.rgba;if(this.stops)this.stops.forEach(function(t){t.brighten(r)});else if(isNumber(r)&&0!==r)for(var s=0;s<3;s++)t[s]+=pInt(255*r),t[s]<0&&(t[s]=0),255<t[s]&&(t[s]=255);return this},p.prototype.setOpacity=function(t){return this.rgba[3]=t,this},p.prototype.tweenTo=function(t,r){var s=this.rgba,e=t.rgba;if(!isNumber(s[0])||!isNumber(e[0]))return t.input||"none";t=1!==e[3]||1!==s[3];return(t?"rgba(":"rgb(")+Math.round(e[0]+(s[0]-e[0])*(1-r))+","+Math.round(e[1]+(s[1]-e[1])*(1-r))+","+Math.round(e[2]+(s[2]-e[2])*(1-r))+(t?","+(e[3]+(s[3]-e[3])*(1-r)):"")+")"},p.names={white:"#ffffff",black:"#000000"},p.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[pInt(t[1]),pInt(t[2]),pInt(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[pInt(t[1]),pInt(t[2]),pInt(t[3]),1]}}],p.None=new p(""),p}();export default Color;