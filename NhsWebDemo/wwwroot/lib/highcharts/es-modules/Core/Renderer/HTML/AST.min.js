"use strict";import H from"../../Globals.js";var SVG_NS=H.SVG_NS,win=H.win;import U from"../../Utilities.js";var attr=U.attr,createElement=U.createElement,error=U.error,isFunction=U.isFunction,isString=U.isString,objectEach=U.objectEach,splat=U.splat,trustedTypes=win.trustedTypes,trustedTypesPolicy=trustedTypes&&isFunction(trustedTypes.createPolicy)&&trustedTypes.createPolicy("highcharts",{createHTML:function(e){return e}}),emptyHTML=trustedTypesPolicy?trustedTypesPolicy.createHTML(""):"",hasValidDOMParser=function(){try{return Boolean((new DOMParser).parseFromString(emptyHTML,"text/html"))}catch(e){return!1}}(),AST=function(){function l(e){this.nodes="string"==typeof e?this.parseMarkup(e):e}return l.filterUserAttributes=function(a){return objectEach(a,function(t,e){var r=!0;-1===l.allowedAttributes.indexOf(e)&&(r=!1),(r=-1!==["background","dynsrc","href","lowsrc","src"].indexOf(e)?isString(t)&&l.allowedReferences.some(function(e){return 0===t.indexOf(e)}):r)||(error("Highcharts warning: Invalid attribute '"+e+"' in config"),delete a[e])}),a},l.setElementHTML=function(e,t){e.innerHTML=l.emptyHTML,t&&new l(t).addToDOM(e)},l.prototype.addToDOM=function(e){return function s(e,o){var c;return splat(e).forEach(function(e){var t,r,a,n=e.tagName,i=e.textContent?H.doc.createTextNode(e.textContent):void 0;n&&("#text"===n?t=i:-1!==l.allowedTags.indexOf(n)?(r="svg"!==n&&o.namespaceURI||SVG_NS,r=H.doc.createElementNS(r,n),a=e.attributes||{},objectEach(e,function(e,t){"tagName"!==t&&"attributes"!==t&&"children"!==t&&"textContent"!==t&&(a[t]=e)}),attr(r,l.filterUserAttributes(a)),i&&r.appendChild(i),s(e.children||[],r),t=r):error("Highcharts warning: Invalid tagName "+n+" in config")),t&&o.appendChild(t),c=t}),c}(this.nodes,e)},l.prototype.parseMarkup=function(e){var t=[];e=e.trim();function s(e,t){var r,a,n=e.nodeName.toLowerCase(),i={tagName:n};"#text"===n&&(i.textContent=e.textContent||""),(n=e.attributes)&&(r={},[].forEach.call(n,function(e){r[e.name]=e.value}),i.attributes=r),e.childNodes.length&&(a=[],[].forEach.call(e.childNodes,function(e){s(e,a)}),a.length&&(i.children=a)),t.push(i)}var r=hasValidDOMParser?(new DOMParser).parseFromString(trustedTypesPolicy?trustedTypesPolicy.createHTML(e):e,"text/html"):((r=createElement("div")).innerHTML=e,{body:r});return[].forEach.call(r.body.childNodes,function(e){return s(e,t)}),t},l.allowedAttributes=["aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","height","href","id","in","markerHeight","markerWidth","offset","opacity","orient","padding","paddingLeft","paddingRight","patternUnits","r","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","textAnchor","textLength","title","type","valign","width","x","x1","x2","y","y1","y2","zIndex"],l.allowedReferences=["https://","http://","mailto:","/","../","./","#"],l.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","thead","tbody","tspan","td","th","tr","u","ul","#text"],l.emptyHTML=emptyHTML,l}();export default AST;