"use strict";var __extends=this&&this.__extends||function(){var n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)};return function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();import H from"./Globals.js";var charts=H.charts,doc=H.doc,noop=H.noop,win=H.win;import Pointer from"./Pointer.js";import U from"./Utilities.js";var addEvent=U.addEvent,css=U.css,objectEach=U.objectEach,removeEvent=U.removeEvent,touches={},hasPointerEvent=!!win.PointerEvent;function getWebkitTouches(){var o=[];return o.item=function(t){return this[t]},objectEach(touches,function(t){o.push({pageX:t.pageX,pageY:t.pageY,target:t.target})}),o}function translateMSPointer(t,o,e,n){var r=charts[Pointer.hoverChartIndex||NaN];"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!r||(r=r.pointer,n(t),r[o]({type:e,target:t.currentTarget,preventDefault:noop,touches:getWebkitTouches()}))}var MSPointer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.isRequired=function(){return!(H.hasTouch||!win.PointerEvent&&!win.MSPointerEvent)},t.prototype.batchMSEvents=function(t){t(this.chart.container,hasPointerEvent?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,hasPointerEvent?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(doc,hasPointerEvent?"pointerup":"MSPointerUp",this.onDocumentPointerUp)},t.prototype.destroy=function(){this.batchMSEvents(removeEvent),e.prototype.destroy.call(this)},t.prototype.init=function(t,o){e.prototype.init.call(this,t,o),this.hasZoom&&css(t.container,{"-ms-touch-action":"none","touch-action":"none"})},t.prototype.onContainerPointerDown=function(t){translateMSPointer(t,"onContainerTouchStart","touchstart",function(t){touches[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},t.prototype.onContainerPointerMove=function(t){translateMSPointer(t,"onContainerTouchMove","touchmove",function(t){touches[t.pointerId]={pageX:t.pageX,pageY:t.pageY},touches[t.pointerId].target||(touches[t.pointerId].target=t.currentTarget)})},t.prototype.onDocumentPointerUp=function(t){translateMSPointer(t,"onDocumentTouchEnd","touchend",function(t){delete touches[t.pointerId]})},t.prototype.setDOMEvents=function(){e.prototype.setDOMEvents.call(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(addEvent)},t}(Pointer);export default MSPointer;