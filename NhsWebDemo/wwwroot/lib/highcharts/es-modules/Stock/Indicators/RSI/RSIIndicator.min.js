"use strict";var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var SMAIndicator=SeriesRegistry.seriesTypes.sma;import U from"../../../Core/Utilities.js";var isNumber=U.isNumber,merge=U.merge;function toFixed(t,e){return parseFloat(t.toFixed(e))}var RSIIndicator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.points=void 0,t.options=void 0,t}return __extends(t,e),t.prototype.getValues=function(t,e){var r,i,o,n,s,a,u=e.period,d=t.xData,t=t.yData,p=t?t.length:0,c=e.decimals,f=1,l=[],x=[],m=[],y=e.index,h=0,_=0;if(!(d.length<u)){for(a=isNumber(t[0])?t:(y=Math.min(y,t[0].length-1),t.map(function(t){return t[y]}));f<u;)0<(i=toFixed(a[f]-a[f-1],c))?h+=i:_+=Math.abs(i),f++;for(o=toFixed(h/(u-1),c),n=toFixed(_/(u-1),c),s=f;s<p;s++)_=0<(i=toFixed(a[s]-a[s-1],c))?(h=i,0):(h=0,Math.abs(i)),o=toFixed((o*(u-1)+h)/u,c),r=0===(n=toFixed((n*(u-1)+_)/u,c))?100:0===o?0:toFixed(100-100/(1+o/n),c),l.push([d[s],r]),x.push(d[s]),m.push(r);return{values:l,xData:x,yData:m}}},t.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{decimals:4,index:3}}),t}(SMAIndicator);SeriesRegistry.registerSeriesType("rsi",RSIIndicator);export default RSIIndicator;