"use strict";var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var SMAIndicator=SeriesRegistry.seriesTypes.sma;import U from"../../../Core/Utilities.js";var isNumber=U.isNumber,merge=U.merge,CMOIndicator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return __extends(t,e),t.prototype.getValues=function(t,e){var r,i=e.period,o=t.xData,t=t.yData,n=t?t.length:0,s=[],a=[],u=[],p=e.index;if(!(o.length<i)){for(var c,f,d=isNumber(t[0])?t:(p=Math.min(p,t[0].length-1),t.map(function(t){return t[p]})),h=0,y=0,m=i;0<m;m--)d[m]>d[m-1]?h+=d[m]-d[m-1]:d[m]<d[m-1]&&(y+=d[m-1]-d[m]);for(f=0<h+y?100*(h-y)/(h+y):0,a.push(o[i]),u.push(f),s.push([o[i],f]),r=i+1;r<n;r++)c=Math.abs(d[r-i-1]-d[r-i]),d[r]>d[r-1]?h+=d[r]-d[r-1]:d[r]<d[r-1]&&(y+=d[r-1]-d[r]),d[r-i]>d[r-i-1]?h-=c:y-=c,f=0<h+y?100*(h-y)/(h+y):0,a.push(o[r]),u.push(f),s.push([o[r],f]);return{values:s,xData:a,yData:u}}},t.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{period:20,index:3}}),t}(SMAIndicator);SeriesRegistry.registerSeriesType("cmo",CMOIndicator);export default CMOIndicator;