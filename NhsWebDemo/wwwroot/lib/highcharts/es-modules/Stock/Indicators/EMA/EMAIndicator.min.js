"use strict";var __extends=this&&this.__extends||function(){var o=function(t,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};return function(t,r){function e(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var SMAIndicator=SeriesRegistry.seriesTypes.sma;import U from"../../../Core/Utilities.js";var correctFloat=U.correctFloat,isArray=U.isArray,merge=U.merge,EMAIndicator=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return __extends(t,r),t.prototype.accumulatePeriodPoints=function(t,r,e){for(var o=0,i=0;i<t;)o+=r<0?e[i]:e[i][r],i++;return o},t.prototype.calculateEma=function(t,r,e,o,i,n,a){t=t[e-1],n=n<0?r[e-1]:r[e-1][n];return[t,void 0===i?a:correctFloat(n*o+i*(1-o))]},t.prototype.getValues=function(t,r){var e,o,i,n,a=r.period,s=t.xData,c=t.yData,u=c?c.length:0,p=2/(a+1),d=[],f=[],l=[],y=-1;if(!(u<a)){for(isArray(c[0])&&(y=r.index||0),e=this.accumulatePeriodPoints(a,y,c)/a,n=a;n<u+1;n++)i=this.calculateEma(s,c,n,p,o,y,e),d.push(i),f.push(i[0]),l.push(i[1]),o=i[1];return{values:d,xData:f,yData:l}}},t.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{index:3,period:9}}),t}(SMAIndicator);SeriesRegistry.registerSeriesType("ema",EMAIndicator);export default EMAIndicator;