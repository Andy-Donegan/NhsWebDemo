"use strict";var __extends=this&&this.__extends||function(){var i=function(r,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(r,t)};return function(r,t){function e(){this.constructor=r}i(r,t),r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var SMAIndicator=SeriesRegistry.seriesTypes.sma;import U from"../../../Core/Utilities.js";var isArray=U.isArray,merge=U.merge;function sumArray(r){return r.reduce(function(r,t){return r+t},0)}function meanDeviation(r,t){for(var e=r.length,i=0,n=0;n<e;n++)i+=Math.abs(t-r[n]);return i}var CCIIndicator=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.data=void 0,r.points=void 0,r.options=void 0,r}return __extends(r,t),r.prototype.getValues=function(r,t){var e,i,n,o,s,a,u=t.period,p=r.xData,c=r.yData,f=c?c.length:0,y=[],d=1,h=[],l=[],v=[];if(!(p.length<=u)&&isArray(c[0])&&4===c[0].length){for(;d<u;)i=c[d-1],y.push((i[1]+i[2]+i[3])/3),d++;for(a=u;a<=f;a++)o=((i=c[a-1])[1]+i[2]+i[3])/3,s=y.push(o),s=meanDeviation(e=y.slice(s-u),n=sumArray(e)/u)/u,h.push([p[a-1],s=(o-n)/(.015*s)]),l.push(p[a-1]),v.push(s);return{values:h,xData:l,yData:v}}},r.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{index:void 0}}),r}(SMAIndicator);SeriesRegistry.registerSeriesType("cci",CCIIndicator);export default CCIIndicator;