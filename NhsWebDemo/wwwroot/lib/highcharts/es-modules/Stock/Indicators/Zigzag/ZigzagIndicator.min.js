"use strict";var __extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var SMAIndicator=SeriesRegistry.seriesTypes.sma;import U from"../../../Core/Utilities.js";var merge=U.merge,extend=U.extend,ZigzagIndicator=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=void 0,e.points=void 0,e.options=void 0,e}return __extends(e,t),e.prototype.getValues=function(e,t){var i,r,o,n,s,a,p=t.lowIndex,u=t.highIndex,t=t.deviation/100,d=1+t,g=1-t,c=e.xData,h=e.yData,f=h?h.length:0,v=[],y=[],l=[],x=!1,_=!1;if(!(!c||c.length<=1||f&&(void 0===h[0][p]||void 0===h[0][u]))){for(n=h[0][p],s=h[0][u],i=1;i<f;i++)h[i][p]<=s*g?(v.push([c[0],s]),o=[c[i],h[i][p]],x=a=!0):h[i][u]>=n*d&&(v.push([c[0],n]),x=!(a=!(o=[c[i],h[i][u]]))),x&&(y.push(v[0][0]),l.push(v[0][1]),r=i++,i=f);for(i=r;i<f;i++)a?(h[i][p]<=o[1]&&(o=[c[i],h[i][p]]),h[i][u]>=o[1]*d&&(_=u)):(h[i][u]>=o[1]&&(o=[c[i],h[i][u]]),h[i][p]<=o[1]*g&&(_=p)),!1!==_&&(v.push(o),y.push(o[0]),l.push(o[1]),a=!a,_=!(o=[c[i],h[i][_]]));return 0!==(e=v.length)&&v[e-1][0]<c[f-1]&&(v.push(o),y.push(o[0]),l.push(o[1])),{values:v,xData:y,yData:l}}},e.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{index:void 0,period:void 0,lowIndex:2,highIndex:1,deviation:1}}),e}(SMAIndicator);extend(ZigzagIndicator.prototype,{nameComponents:["deviation"],nameSuffixes:["%"],nameBase:"Zig Zag"}),SeriesRegistry.registerSeriesType("zigzag",ZigzagIndicator);export default ZigzagIndicator;