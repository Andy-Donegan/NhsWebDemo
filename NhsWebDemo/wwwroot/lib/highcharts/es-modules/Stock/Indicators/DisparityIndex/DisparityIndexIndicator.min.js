"use strict";var __extends=this&&this.__extends||function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var SMAIndicator=SeriesRegistry.seriesTypes.sma;import U from"../../../Core/Utilities.js";var correctFloat=U.correctFloat,defined=U.defined,extend=U.extend,isArray=U.isArray,merge=U.merge,DisparityIndexIndicator=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.averageIndicator=void 0,e.data=void 0,e.options=void 0,e.points=void 0,e}return __extends(e,t),e.prototype.init=function(){var e=arguments,t=this,r=e[1].params,r=r&&r.average?r.average:void 0;t.averageIndicator=SeriesRegistry.seriesTypes[r]||SMAIndicator,t.averageIndicator.prototype.init.apply(t,e)},e.prototype.calculateDisparityIndex=function(e,t){return correctFloat(e-t)/t*100},e.prototype.getValues=function(e,t){var r=t.index,a=e.xData,i=e.yData,n=i?i.length:0,o=[],s=[],p=[],d=this.averageIndicator,c=isArray(i[0]),t=d.prototype.getValues(e,t),y=t.yData,u=a.indexOf(t.xData[0]);if(y&&0!==y.length&&defined(r)&&!(i.length<=u)){for(var f=u;f<n;f++){var v=this.calculateDisparityIndex(c?i[f][r]:i[f],y[f-u]);o.push([a[f],v]),s.push(a[f]),p.push(v)}return{values:o,xData:s,yData:p}}},e.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{average:"sma",index:3},marker:{enabled:!1},dataGrouping:{approximation:"averages"}}),e}(SMAIndicator);extend(DisparityIndexIndicator.prototype,{nameBase:"Disparity Index",nameComponents:["period","average"]}),SeriesRegistry.registerSeriesType("disparityindex",DisparityIndexIndicator);export default DisparityIndexIndicator;