"use strict";var __extends=this&&this.__extends||function(){var i=function(e,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)};return function(e,r){function t(){this.constructor=e}i(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}();import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var SMAIndicator=SeriesRegistry.seriesTypes.sma;import U from"../../../Core/Utilities.js";var isArray=U.isArray,merge=U.merge;function accumulateAverage(e,r,t,i,n){r=r[i],n=n<0?t[i]:t[i][n];e.push([r,n])}function weightedSumArray(e,r){r*=(r+1)/2;return e.reduce(function(e,r,t){return[null,e[1]+r[1]*(t+1)]})[1]/r}function populateAverage(e,r,t,i){var n=weightedSumArray(e,e.length),i=r[i-1];return e.shift(),[i,n]}var WMAIndicator=function(r){function e(){var e=null!==r&&r.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return __extends(e,r),e.prototype.getValues=function(e,r){var t,i,n,o=r.period,a=e.xData,s=e.yData,u=s?s.length:0,p=1,c=a[0],e=s[0],f=[],d=[],l=[],y=-1;if(!(a.length<o)){for(isArray(s[0])&&(y=r.index,e=s[0][y]),i=[[c,e]];p!==o;)accumulateAverage(i,a,s,p,y),p++;for(t=p;t<u;t++)n=populateAverage(i,a,s,t),f.push(n),d.push(n[0]),l.push(n[1]),accumulateAverage(i,a,s,t,y);return n=populateAverage(i,a,s,t),f.push(n),d.push(n[0]),l.push(n[1]),{values:f,xData:d,yData:l}}},e.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{index:3,period:9}}),e}(SMAIndicator);SeriesRegistry.registerSeriesType("wma",WMAIndicator);export default WMAIndicator;