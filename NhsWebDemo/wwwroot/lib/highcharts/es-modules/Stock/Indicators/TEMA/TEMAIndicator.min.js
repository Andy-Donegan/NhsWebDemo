"use strict";var __extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var EMAIndicator=SeriesRegistry.seriesTypes.ema;import U from"../../../Core/Utilities.js";var correctFloat=U.correctFloat,isArray=U.isArray,merge=U.merge,TEMAIndicator=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EMApercent=void 0,e.data=void 0,e.options=void 0,e.points=void 0,e}return __extends(e,t),e.prototype.getEMA=function(e,t,r,o,i,l){return EMAIndicator.prototype.calculateEma(l||[],e,void 0===i?1:i,this.EMApercent,t,void 0===o?-1:o,r)},e.prototype.getTemaPoint=function(e,t,r,o){return[e[o-3],correctFloat(3*r.level1-3*r.level2+r.level3)]},e.prototype.getValues=function(e,t){var r,o,i,l,n=t.period,s=2*n,a=3*n,p=e.xData,v=e.yData,c=v?v.length:0,u=-1,d=0,y=0,f=[],h=[],A=[],g=[],E=[],M={};if(this.EMApercent=2/(n+1),!(c<3*n-2)){for(isArray(v[0])&&(u=t.index||0),y=(d=EMAIndicator.prototype.accumulatePeriodPoints(n,u,v))/n,d=0,i=n;i<c+3;i++)i<c+1&&(M.level1=this.getEMA(v,r,y,u,i)[1],g.push(M.level1)),r=M.level1,i<s?d+=M.level1:(i===s&&(y=d/n,d=0),M.level1=g[i-n-1],M.level2=this.getEMA([M.level1],o,y)[1],E.push(M.level2),o=M.level2,i<a?d+=M.level2:(i===a&&(y=d/n),i===c+1&&(M.level1=g[i-n-1],M.level2=this.getEMA([M.level1],o,y)[1],E.push(M.level2)),M.level1=g[i-n-2],M.level2=E[i-2*n-1],M.level3=this.getEMA([M.level2],M.prevLevel3,y)[1],(l=this.getTemaPoint(p,a,M,i))&&(f.push(l),h.push(l[0]),A.push(l[1])),M.prevLevel3=M.level3));return{values:f,xData:h,yData:A}}},e.defaultOptions=merge(EMAIndicator.defaultOptions),e}(EMAIndicator);SeriesRegistry.registerSeriesType("tema",TEMAIndicator);export default TEMAIndicator;