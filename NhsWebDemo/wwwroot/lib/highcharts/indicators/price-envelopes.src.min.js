"use strict";!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/indicators/price-envelopes",["highcharts","highcharts/modules/stock"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){t=t?t._modules:{};function o(t,o,e,i){t.hasOwnProperty(o)||(t[o]=i.apply(null,e))}o(t,"Stock/Indicators/PriceEnvelopes/PriceEnvelopesIndicator.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(f,t){var i,o,e=this&&this.__extends||(i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),p=f.seriesTypes.sma,n=t.extend,g=t.isArray,a=t.merge,p=(e(s,o=p),s.prototype.init=function(){f.seriesTypes.sma.prototype.init.apply(this,arguments),this.options=a({topLine:{styles:{lineColor:this.color}},bottomLine:{styles:{lineColor:this.color}}},this.options)},s.prototype.toYData=function(t){return[t.top,t.middle,t.bottom]},s.prototype.translate=function(){var i=this,p=["plotTop","plotMiddle","plotBottom"];f.seriesTypes.sma.prototype.translate.apply(i),i.points.forEach(function(e){[e.top,e.middle,e.bottom].forEach(function(t,o){null!==t&&(e[p[o]]=i.yAxis.toPixels(t,!0))})})},s.prototype.drawGraph=function(){for(var t,e=this,o=e.points,i=o.length,p=e.options,n=e.graph,s={options:{gapSize:p.gapSize}},r=[[],[]];i--;)t=o[i],r[0].push({plotX:t.plotX,plotY:t.plotTop,isNull:t.isNull}),r[1].push({plotX:t.plotX,plotY:t.plotBottom,isNull:t.isNull});["topLine","bottomLine"].forEach(function(t,o){e.points=r[o],e.options=a(p[t].styles,s),e.graph=e["graph"+t],f.seriesTypes.sma.prototype.drawGraph.call(e),e["graph"+t]=e.graph}),e.points=o,e.options=p,e.graph=n,f.seriesTypes.sma.prototype.drawGraph.call(e)},s.prototype.getValues=function(t,o){var e,i,p,n,s,r=o.period,a=o.topBand,l=o.bottomBand,c=t.xData,d=t.yData,u=d?d.length:0,h=[],y=[],m=[];if(!(c.length<r)&&g(d[0])&&4===d[0].length){for(s=r;s<=u;s++)i=c.slice(s-r,s),p=d.slice(s-r,s),e=(n=f.seriesTypes.sma.prototype.getValues.call(this,{xData:i,yData:p},o)).xData[0],i=n.yData[0],h.push([e,p=i*(1+a),i,n=i*(1-l)]),y.push(e),m.push([p,i,n]);return{values:h,xData:y,yData:m}}},s.defaultOptions=a(p.defaultOptions,{marker:{enabled:!1},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span><b> {series.name}</b><br/>Top: {point.top}<br/>Middle: {point.middle}<br/>Bottom: {point.bottom}<br/>'},params:{period:20,topBand:.1,bottomBand:.1},bottomLine:{styles:{lineWidth:1,lineColor:void 0}},topLine:{styles:{lineWidth:1}},dataGrouping:{approximation:"averages"}}),s);function s(){var t=null!==o&&o.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return n(p.prototype,{nameComponents:["period","topBand","bottomBand"],nameBase:"Price envelopes",pointArrayMap:["top","middle","bottom"],parallelArrays:["x","y","top","bottom"],pointValKey:"middle"}),f.registerSeriesType("priceenvelopes",p),p}),o(t,"masters/indicators/price-envelopes.src.js",[],function(){})});