"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/indicators/regressions",["highcharts","highcharts/modules/stock"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){e=e?e._modules:{};function t(e,t,n,r){e.hasOwnProperty(t)||(e[t]=r.apply(null,n))}t(e,"Stock/Indicators/LinearRegression/LinearRegression.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var r,n,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=e.seriesTypes.sma,f=t.isArray,s=t.extend,t=t.merge,i=(o(a,n=i),a.prototype.getRegressionLineParameters=function(e,t){for(var n,r=this.options.params.index,o=function(e,t){return f(e)?e[t]:e},i=e.reduce(function(e,t){return t+e},0),s=t.reduce(function(e,t){return o(t,r)+e},0),a=i/e.length,p=s/t.length,u=0,c=0,l=0;l<e.length;l++)u+=(n=e[l]-a)*(o(t[l],r)-p),c+=Math.pow(n,2);return{slope:s=c?u/c:0,intercept:p-s*a}},a.prototype.getEndPointY=function(e,t){return e.slope*t+e.intercept},a.prototype.transformXData=function(e,t){var n=e[0];return e.map(function(e){return(e-n)/t})},a.prototype.findClosestDistance=function(e){for(var t,n,r=1;r<e.length-1;r++)0<(t=e[r]-e[r-1])&&(void 0===n||t<n)&&(n=t);return n},a.prototype.getValues=function(e,t){for(var n,r,o,i,s=e.xData,a=e.yData,p=t.period,u={xData:[],yData:[],values:[]},c=this.options.params.xAxisUnit||this.findClosestDistance(s),l=p-1;l<=s.length-1;l++)r=s[l],i=s.slice(n=l-p+1,o=l+1),o=a.slice(n,o),i=this.transformXData(i,c),o=this.getRegressionLineParameters(i,o),i=this.getEndPointY(o,i[i.length-1]),u.values.push({regressionLineParameters:o,x:r,y:i}),u.xData.push(r),u.yData.push(i);return u},a.defaultOptions=t(i.defaultOptions,{params:{xAxisUnit:null},tooltip:{valueDecimals:4}}),a);function a(){var e=null!==n&&n.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return s(i.prototype,{nameBase:"Linear Regression Indicator"}),e.registerSeriesType("linearRegression",i),i}),t(e,"Stock/Indicators/LinearRegressionSlopes/LinearRegressionSlopes.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var r,n,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=e.seriesTypes.linearRegression,s=t.extend,t=t.merge,i=(o(a,n=i),a.prototype.getEndPointY=function(e){return e.slope},a.defaultOptions=t(i.defaultOptions),a);function a(){var e=null!==n&&n.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return s(i.prototype,{nameBase:"Linear Regression Slope Indicator"}),e.registerSeriesType("linearRegressionSlope",i),i}),t(e,"Stock/Indicators/LinearRegressionIntercept/LinearRegressionIntercept.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var r,n,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=e.seriesTypes.linearRegression,s=t.extend,t=t.merge,i=(o(a,n=i),a.prototype.getEndPointY=function(e){return e.intercept},a.defaultOptions=t(i.defaultOptions),a);function a(){var e=null!==n&&n.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return s(i.prototype,{nameBase:"Linear Regression Intercept Indicator"}),e.registerSeriesType("linearRegressionIntercept",i),i}),t(e,"Stock/Indicators/LinearRegressionAngle/LinearRegressionAngle.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var r,n,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=e.seriesTypes.linearRegression,s=t.extend,t=t.merge,i=(o(a,n=i),a.prototype.slopeToAngle=function(e){return Math.atan(e)*(180/Math.PI)},a.prototype.getEndPointY=function(e){return this.slopeToAngle(e.slope)},a.defaultOptions=t(i.defaultOptions,{tooltip:{pointFormat:'<span style="color:{point.color}">●</span>{series.name}: <b>{point.y}°</b><br/>'}}),a);function a(){var e=null!==n&&n.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return s(i.prototype,{nameBase:"Linear Regression Angle Indicator"}),e.registerSeriesType("linearRegressionAngle",i),i}),t(e,"masters/indicators/regressions.src.js",[],function(){})});