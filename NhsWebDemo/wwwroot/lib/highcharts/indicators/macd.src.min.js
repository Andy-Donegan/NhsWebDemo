"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/indicators/macd",["highcharts","highcharts/modules/stock"],function(o){return t(o),t.Highcharts=o,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){o=o?o._modules:{};function t(o,t,e,s){o.hasOwnProperty(t)||(o[t]=s.apply(null,e))}t(o,"Stock/Indicators/MACD/MACDIndicator.js",[o["Core/Globals.js"],o["Core/Series/SeriesRegistry.js"],o["Core/Utilities.js"]],function(o,c,t){var s,n,e=this&&this.__extends||(s=function(o,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(o,t)},function(o,t){function e(){this.constructor=o}s(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=o.noop,r=c.seriesTypes,a=r.sma,r=(r.column,t.extend),d=t.correctFloat,u=t.defined,p=t.merge,a=(e(l,n=a),l.prototype.init=function(){c.seriesTypes.sma.prototype.init.apply(this,arguments),this.options&&(this.options=p({signalLine:{styles:{lineColor:this.color}},macdLine:{styles:{color:this.color}}},this.options),this.macdZones={zones:this.options.macdLine.zones,startIndex:0},this.signalZones={zones:this.macdZones.zones.concat(this.options.signalLine.zones),startIndex:this.macdZones.zones.length},this.resetZones=!0)},l.prototype.toYData=function(o){return[o.y,o.signal,o.MACD]},l.prototype.translate=function(){var s=this,n=["plotSignal","plotMACD"];o.seriesTypes.column.prototype.translate.apply(s),s.points.forEach(function(e){[e.signal,e.MACD].forEach(function(o,t){null!==o&&(e[n[t]]=s.yAxis.toPixels(o,!0))})})},l.prototype.destroy=function(){this.graph=null,this.graphmacd=this.graphmacd&&this.graphmacd.destroy(),this.graphsignal=this.graphsignal&&this.graphsignal.destroy(),c.seriesTypes.sma.prototype.destroy.apply(this,arguments)},l.prototype.drawGraph=function(){for(var o,e=this,t=e.points,s=t.length,n=e.options,i=e.zones,r={options:{gapSize:n.gapSize}},a=[[],[]];s--;)o=t[s],u(o.plotMACD)&&a[0].push({plotX:o.plotX,plotY:o.plotMACD,isNull:!u(o.plotMACD)}),u(o.plotSignal)&&a[1].push({plotX:o.plotX,plotY:o.plotSignal,isNull:!u(o.plotMACD)});["macd","signal"].forEach(function(o,t){e.points=a[t],e.options=p(n[o+"Line"].styles,r),e.graph=e["graph"+o],e.currentLineZone=o+"Zones",e.zones=e[e.currentLineZone].zones,c.seriesTypes.sma.prototype.drawGraph.call(e),e["graph"+o]=e.graph}),e.points=t,e.options=n,e.zones=i,e.currentLineZone=null},l.prototype.getZonesGraphs=function(o){var t=n.prototype.getZonesGraphs.call(this,o),e=t;return this.currentLineZone&&((e=t.splice(this[this.currentLineZone].startIndex+1)).length?e.splice(0,0,o[0]):e=[o[0]]),e},l.prototype.applyZones=function(){var o=this.zones;this.zones=this.signalZones.zones,c.seriesTypes.sma.prototype.applyZones.call(this),this.graphmacd&&this.options.macdLine.zones.length&&this.graphmacd.hide(),this.zones=o},l.prototype.getValues=function(o,t){var e,s,n,i,r=t.longPeriod-t.shortPeriod,a=0,p=[],l=[],h=[];if(!(o.xData.length<t.longPeriod+t.signalPeriod)){for(s=c.seriesTypes.ema.prototype.getValues(o,{period:t.shortPeriod,index:t.index}),n=c.seriesTypes.ema.prototype.getValues(o,{period:t.longPeriod,index:t.index}),s=s.values,n=n.values,i=0;i<=s.length;i++)u(n[i])&&u(n[i][1])&&u(s[i+r])&&u(s[i+r][0])&&p.push([s[i+r][0],0,null,s[i+r][1]-n[i][1]]);for(i=0;i<p.length;i++)l.push(p[i][0]),h.push([0,null,p[i][3]]);for(e=c.seriesTypes.ema.prototype.getValues({xData:l,yData:h},{period:t.signalPeriod,index:2}).values,i=0;i<p.length;i++)p[i][0]>=e[0][0]&&(p[i][2]=e[a][1],h[i]=[0,e[a][1],p[i][3]],null===p[i][3]?(p[i][1]=0,h[i][0]=0):(p[i][1]=d(p[i][3]-e[a][1]),h[i][0]=d(p[i][3]-e[a][1])),a++);return{values:p,xData:l,yData:h}}},l.defaultOptions=p(a.defaultOptions,{params:{shortPeriod:12,longPeriod:26,signalPeriod:9,period:26},signalLine:{zones:[],styles:{lineWidth:1,lineColor:void 0}},macdLine:{zones:[],styles:{lineWidth:1,lineColor:void 0}},threshold:0,groupPadding:.1,pointPadding:.1,crisp:!1,states:{hover:{halo:{size:0}}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> <b> {series.name}</b><br/>Value: {point.MACD}<br/>Signal: {point.signal}<br/>Histogram: {point.y}<br/>'},dataGrouping:{approximation:"averages"},minPointLength:0}),l);function l(){var o=null!==n&&n.apply(this,arguments)||this;return o.data=void 0,o.options=void 0,o.points=void 0,o.currentLineZone=void 0,o.graphmacd=void 0,o.graphsignal=void 0,o.macdZones=void 0,o.signalZones=void 0,o}return r(a.prototype,{nameComponents:["longPeriod","shortPeriod","signalPeriod"],pointArrayMap:["y","signal","MACD"],parallelArrays:["x","y","signal","MACD"],pointValKey:"y",markerAttribs:i,getColumnMetrics:o.seriesTypes.column.prototype.getColumnMetrics,crispCol:o.seriesTypes.column.prototype.crispCol,drawPoints:o.seriesTypes.column.prototype.drawPoints}),c.registerSeriesType("macd",a),a}),t(o,"masters/indicators/macd.src.js",[],function(){})});