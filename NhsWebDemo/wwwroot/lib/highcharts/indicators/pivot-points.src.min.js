"use strict";!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/indicators/pivot-points",["highcharts","highcharts/modules/stock"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){t=t?t._modules:{};function o(t,o,e,n){t.hasOwnProperty(o)||(t[o]=n.apply(null,e))}o(t,"Stock/Indicators/PivotPoints/PivotPointsPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(a){var n,o,t=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),e=a.seriesTypes.sma;function i(t,o){var e,n=t.series.pointArrayMap,i=n.length;for(a.seriesTypes.sma.prototype.pointClass.prototype[o].call(t);i--;)t[e="dataLabel"+n[i]]&&t[e].element&&t[e].destroy(),t[e]=null}function r(){var t=null!==o&&o.apply(this,arguments)||this;return t.P=void 0,t.pivotLine=void 0,t.series=void 0,t}return o=e.prototype.pointClass,t(r,o),r.prototype.destroyElements=function(){i(this,"destroyElements")},r.prototype.destroy=function(){i(this,"destroyElements")},r}),o(t,"Stock/Indicators/PivotPoints/PivotPointsIndicator.js",[t["Stock/Indicators/PivotPoints/PivotPointsPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,c,o){var n,e,i=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),a=c.seriesTypes.sma,r=o.merge,s=o.extend,u=o.defined,h=o.isArray,a=(i(p,e=a),p.prototype.toYData=function(t){return[t.P]},p.prototype.translate=function(){var e=this;c.seriesTypes.sma.prototype.translate.apply(e),e.points.forEach(function(o){e.pointArrayMap.forEach(function(t){u(o[t])&&(o["plot"+t]=e.yAxis.toPixels(o[t],!0))})}),e.plotEndPoint=e.xAxis.toPixels(e.endPoint,!0)},p.prototype.getGraphPath=function(t){for(var o,e,n,i=this,a=t.length,r=[[],[],[],[],[],[],[],[],[]],s=[],p=i.plotEndPoint,l=i.pointArrayMap.length;a--;){for(e=t[a],n=0;n<l;n++)o=i.pointArrayMap[n],u(e[o])&&r[n].push({plotX:e.plotX,plotY:e["plot"+o],isNull:!1},{plotX:p,plotY:e["plot"+o],isNull:!1},{plotX:p,plotY:null,isNull:!0});p=e.plotX}return r.forEach(function(t){s=s.concat(c.seriesTypes.sma.prototype.getGraphPath.call(i,t))}),s},p.prototype.drawDataLabels=function(){var e,n,i,a,r=this,s=r.pointArrayMap;r.options.dataLabels.enabled&&(n=r.points.length,s.concat([!1]).forEach(function(t,o){for(a=n;a--;)i=r.points[a],t?(i.y=i[t],i.pivotLine=t,i.plotY=i["plot"+t],e=i["dataLabel"+t],o&&(i["dataLabel"+s[o-1]]=i.dataLabel),i.dataLabels||(i.dataLabels=[]),i.dataLabels[0]=i.dataLabel=e=e&&e.element?e:null):i["dataLabel"+s[o-1]]=i.dataLabel;c.seriesTypes.sma.prototype.drawDataLabels.apply(r,arguments)}))},p.prototype.getValues=function(t,o){var e,n,i,a,r,s=o.period,p=t.xData,l=t.yData,c=l?l.length:0,u=this[o.algorithm+"Placement"],d=[],f=[],y=[];if(!(p.length<s)&&h(l[0])&&4===l[0].length){for(r=s+1;r<=c+s;r+=s)i=p.slice(r-s-1,r),a=l.slice(r-s-1,r),e=i[(n=i.length)-1],a=u(this.getPivotAndHLC(a)),a=d.push([e].concat(a)),f.push(e),y.push(d[a-1].slice(1));return this.endPoint=i[0]+(e-i[0])/n*s,{values:d,xData:f,yData:y}}},p.prototype.getPivotAndHLC=function(t){var o=-1/0,e=1/0,n=t[t.length-1][3];return t.forEach(function(t){o=Math.max(o,t[1]),e=Math.min(e,t[2])}),[(o+e+n)/3,o,e,n]},p.prototype.standardPlacement=function(t){var o=t[1]-t[2];return[null,null,t[0]+o,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-o,null,null]},p.prototype.camarillaPlacement=function(t){var o=t[1]-t[2];return[t[3]+1.5*o,t[3]+1.25*o,t[3]+1.1666*o,t[3]+1.0833*o,t[0],t[3]-1.0833*o,t[3]-1.1666*o,t[3]-1.25*o,t[3]-1.5*o]},p.prototype.fibonacciPlacement=function(t){var o=t[1]-t[2];return[null,t[0]+o,t[0]+.618*o,t[0]+.382*o,t[0],t[0]-.382*o,t[0]-.618*o,t[0]-o,null]},p.defaultOptions=r(a.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}}),p);function p(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.endPoint=void 0,t.plotEndPoint=void 0,t}return s(a.prototype,{nameBase:"Pivot Points",pointArrayMap:["R4","R3","R2","R1","P","S1","S2","S3","S4"],pointValKey:"P",pointClass:t}),c.registerSeriesType("pivotpoints",a),a}),o(t,"masters/indicators/pivot-points.src.js",[],function(){})});