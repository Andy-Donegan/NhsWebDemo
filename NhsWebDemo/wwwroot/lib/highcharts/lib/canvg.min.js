!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).canvg={})}(this,function(t){"use strict";var n=Math.tan,y=Math.atan2,d=Math.PI,r=Math.round,e=String.prototype,S=Math.max,P=Math.min,o=Math.ceil,p=Math.sin,v=Math.cos,A=Math.floor,m=Math.sqrt,x=Math.pow;function i(t,e){return t(e={exports:{}},e.exports),e.exports}function a(t,e){return RegExp(t,e)}function w(t){return t.replace(/(?!\u3000)\s+/gm," ")}function s(t){return t.replace(/^[\n \t]+/,"")}function u(t){return t.replace(/[\n \t]+$/,"")}function b(t){return((t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}function l(t){return En.test(t)?t.toLowerCase():t}function c(t){t=t.match(/url\(('([^']+)'|"([^"]+)"|([^'"\)]+))\)/)||[];return t[2]||t[3]||t[4]}function h(t,e){var n=t.match(e);return n?[t.replace(e," "),n.length]:[t,0]}function f(t){var e=[0,0,0],t=h(n=t.replace(/:not\(([^\)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),In),t=Rn(t,2),n=t[0],r=t[1];e[1]+=r;t=h(n,jn),t=Rn(t,2);n=t[0],r=t[1],e[0]+=r;t=h(n,Dn),t=Rn(t,2);n=t[0],r=t[1],e[1]+=r;t=h(n,zn),t=Rn(t,2);n=t[0],r=t[1],e[2]+=r;t=h(n,Mn),t=Rn(t,2);n=t[0],r=t[1],e[1]+=r;t=h(n,Bn),t=Rn(t,2);n=t[0],r=t[1],e[1]+=r;t=h(n=n.replace(/[\*\s\+>~]/g," ").replace(/[#\.]/g," "),Fn),t=Rn(t,2);return n=t[0],r=t[1],e[2]+=r,e.join("")}function g(t){return m(x(t[0],2)+x(t[1],2))}function k(t,e){return(t[0]*e[0]+t[1]*e[1])/(g(t)*g(e))}function E(t,e){var n=Math.acos;return(t[0]*e[1]<t[1]*e[0]?-1:1)*n(k(t,e))}function C(t){return t*t*t}function T(t){return 3*t*t*(1-t)}function O(t){return 3*t*(1-t)*(1-t)}function V(t){return(1-t)*(1-t)*(1-t)}function L(t){return t*t}function N(t){return 2*t*(1-t)}function R(t){return(1-t)*(1-t)}function I(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return n(t),0}s.done?e(u):Promise.resolve(u).then(r,i)}function j(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function D(){throw new Error("setTimeout has not been defined")}function z(){throw new Error("clearTimeout has not been defined")}function M(e){if(Va===setTimeout)return setTimeout(e,0);if((Va===D||!Va)&&setTimeout)return Va=setTimeout,setTimeout(e,0);try{return Va(e,0)}catch(t){try{return Va.call(null,e,0)}catch(t){return Va.call(this,e,0)}}}function B(){Ia&&Na&&(Ia=!1,Na.length?Ra=Na.concat(Ra):ja=-1,Ra.length&&F())}function F(){if(!Ia){var t=M(B);Ia=!0;for(var e=Ra.length;e;){for(Na=Ra,Ra=[];++ja<e;)Na&&Na[ja].run();ja=-1,e=Ra.length}Na=null,Ia=!1,function(e){if(La===clearTimeout)return clearTimeout(e);if((La===z||!La)&&clearTimeout)return La=clearTimeout,clearTimeout(e);try{La(e)}catch(t){try{return La.call(null,e)}catch(t){return La.call(this,e)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function $(){}function G(t){t=t.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function q(t,e,n,r,i,a){return t[n*r*4+4*e+a]}function W(t,e,n,r,i,a,o){t[n*r*4+4*e+a]=o}function H(t,e,n){e=t[e];return e*(e<0?n-255:n)}function X(t,e,n,r){return e+v(t)*n+p(t)*r}function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e,n,r,i,a){var o;isNaN(a)||a<1||(a|=0,o=function(t,e,n,r){var i,a,o,s,u,l,c,h,f,g,d,p,y,v,m,x,b,w,k,S,P,A,E,C,T,O=t.data,V=e-1,L=n-1,N=r+1,R=N*(N+1)/2,I=new bl,j=I;for(o=1;o<2*r+1;o++)j=j.next=new bl,o===N&&(T=j);j.next=I;var D=null,z=null;c=l=0;var M=ml[r],B=xl[r];for(a=0;a<n;a++){for(x=b=w=k=h=f=g=d=0,p=N*(S=O[l]),y=N*(P=O[l+1]),v=N*(A=O[l+2]),m=N*(E=O[l+3]),h+=R*S,f+=R*P,g+=R*A,d+=R*E,j=I,o=0;o<N;o++)j.r=S,j.g=P,j.b=A,j.a=E,j=j.next;for(o=1;o<N;o++)s=l+((V<o?V:o)<<2),h+=(j.r=S=O[s])*(C=N-o),f+=(j.g=P=O[s+1])*C,g+=(j.b=A=O[s+2])*C,d+=(j.a=E=O[s+3])*C,x+=S,b+=P,w+=A,k+=E,j=j.next;for(D=I,z=T,i=0;i<e;i++)O[l+3]=E=d*M>>B,0===E?O[l]=O[l+1]=O[l+2]=0:(E=255/E,O[l]=(h*M>>B)*E,O[l+1]=(f*M>>B)*E,O[l+2]=(g*M>>B)*E),h-=p,f-=y,g-=v,d-=m,p-=D.r,y-=D.g,v-=D.b,m-=D.a,s=c+((s=i+r+1)<V?s:V)<<2,x+=D.r=O[s],b+=D.g=O[s+1],w+=D.b=O[s+2],k+=D.a=O[s+3],h+=x,f+=b,g+=w,d+=k,D=D.next,p+=S=z.r,y+=P=z.g,v+=A=z.b,m+=E=z.a,x-=S,b-=P,w-=A,k-=E,z=z.next,l+=4;c+=e}for(i=0;i<e;i++){for(b=w=k=x=f=g=d=h=0,p=N*(S=O[l=i<<2]),y=N*(P=O[l+1]),v=N*(A=O[l+2]),m=N*(E=O[l+3]),h+=R*S,f+=R*P,g+=R*A,d+=R*E,j=I,o=0;o<N;o++)j.r=S,j.g=P,j.b=A,j.a=E,j=j.next;for(u=e,o=1;o<=r;o++)l=u+i<<2,h+=(j.r=S=O[l])*(C=N-o),f+=(j.g=P=O[l+1])*C,g+=(j.b=A=O[l+2])*C,d+=(j.a=E=O[l+3])*C,x+=S,b+=P,w+=A,k+=E,j=j.next,o<L&&(u+=e);for(l=i,D=I,z=T,a=0;a<n;a++)O[(s=l<<2)+3]=E=d*M>>B,0<E?(E=255/E,O[s]=(h*M>>B)*E,O[s+1]=(f*M>>B)*E,O[s+2]=(g*M>>B)*E):O[s]=O[s+1]=O[s+2]=0,h-=p,f-=y,g-=v,d-=m,p-=D.r,y-=D.g,v-=D.b,m-=D.a,s=i+((s=a+N)<L?s:L)*e<<2,h+=x+=D.r=O[s],f+=b+=D.g=O[s+1],g+=w+=D.b=O[s+2],d+=k+=D.a=O[s+3],D=D.next,p+=S=z.r,y+=P=z.g,v+=A=z.b,m+=E=z.a,x-=S,b-=P,w-=A,k-=E,z=z.next,l+=e}return t}(o=function(t,e,n,r,i){if(!((t="string"==typeof t?document.getElementById(t):t)&&"object"===U(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");t=t.getContext("2d");try{return t.getImageData(e,n,r,i)}catch(e){throw new Error("unable to access image data: "+e)}}(t,e,n,r,i),r,i,a),t.getContext("2d").putImageData(o,e,n))}function Q(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function Z(){return(Z=_r(Fr.mark(function t(n){var e,r,i=arguments;return Fr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=!!(1<i.length&&void 0!==i[1])&&i[1],r=document.createElement("img"),e&&(r.crossOrigin="Anonymous"),t.abrupt("return",new Promise(function(t,e){r.onload=function(){t(r)},r.onerror=function(){e()},r.src=n}));case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function K(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function J(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?K(Object(n),!0).forEach(function(t){$r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function tt(t){try{return!!t()}catch(t){return!0}}function et(t){return dt(pt(t))}function nt(e,n){try{Ot(at,e,n)}catch(t){at[e]=n}return n}var rt="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,it=function(t){return t&&t.Math==Math&&t},at=it("object"==typeof globalThis&&globalThis)||it("object"==typeof window&&window)||it("object"==typeof self&&self)||it("object"==typeof rt&&rt)||Function("return this")(),ot=!tt(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),st={}.propertyIsEnumerable,ut=Object.getOwnPropertyDescriptor,lt={f:ut&&!st.call({1:2},1)?function(t){t=ut(this,t);return!!t&&t.enumerable}:st},ct=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ht={}.toString,ft=function(t){return ht.call(t).slice(8,-1)},gt="".split,dt=tt(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==ft(t)?gt.call(t,""):Object(t)}:Object,pt=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},yt=function(t){return"object"==typeof t?null!==t:"function"==typeof t},vt=function(t,e){if(!yt(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!yt(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!yt(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!yt(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},mt={}.hasOwnProperty,xt=function(t,e){return mt.call(t,e)},bt=at.document,wt=yt(bt)&&yt(bt.createElement),kt=function(t){return wt?bt.createElement(t):{}},St=!ot&&!tt(function(){return 7!=Object.defineProperty(kt("div"),"a",{get:function(){return 7}}).a}),Pt=Object.getOwnPropertyDescriptor,At={f:ot?Pt:function(t,e){if(t=et(t),e=vt(e,!0),St)try{return Pt(t,e)}catch(t){}return xt(t,e)?ct(!lt.f.call(t,e),t[e]):void 0}},Et=function(t){if(!yt(t))throw TypeError(t+" is not an object");return t},Ct=Object.defineProperty,Tt={f:ot?Ct:function(t,e,n){if(Et(t),e=vt(e,!0),Et(n),St)try{return Ct(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ot=ot?function(t,e,n){return Tt.f(t,e,ct(1,n))}:function(t,e,n){return t[e]=n,t},Vt="__core-js_shared__",Lt=at[Vt]||nt(Vt,{}),Nt=Function.toString;"function"!=typeof Lt.inspectSource&&(Lt.inspectSource=function(t){return Nt.call(t)});function Rt(t){return"Symbol("+(void 0===t?"":t)+")_"+(++Ht+Xt).toString(36)}var It,jt,Dt,zt,Mt,Bt,Ft,_t,$t=Lt.inspectSource,Gt=at.WeakMap,qt="function"==typeof Gt&&/native code/.test($t(Gt)),Wt=i(function(t){(t.exports=function(t,e){return Lt[t]||(Lt[t]=void 0===e?{}:e)})("versions",[]).push({version:"3.6.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Ht=0,Xt=Math.random(),Ut=Wt("keys"),Yt=function(t){return Ut[t]||(Ut[t]=Rt(t))},Qt={},Zt=at.WeakMap;Ft=qt?(It=new Zt,jt=It.get,Dt=It.has,zt=It.set,Mt=function(t,e){return zt.call(It,t,e),e},Bt=function(t){return jt.call(It,t)||{}},function(t){return Dt.call(It,t)}):(_t=Yt("state"),Qt[_t]=!0,Mt=function(t,e){return Ot(t,_t,e),e},Bt=function(t){return xt(t,_t)?t[_t]:{}},function(t){return xt(t,_t)});function Kt(t){return"function"==typeof t?t:void 0}function Jt(t,e){return arguments.length<2?Kt(he[t])||Kt(at[t]):he[t]&&he[t][e]||at[t]&&at[t][e]}function te(t){return 0<t?P(fe(t),9007199254740991):0}function ee(t,e){return(t=fe(t))<0?S(t+e,0):P(t,e)}function ne(t,e){var n,r=et(t),i=0,a=[];for(n in r)!xt(Qt,n)&&xt(r,n)&&a.push(n);for(;e.length>i;)xt(r,n=e[i++])&&(~pe(a,n)||a.push(n));return a}function re(t,e){for(var n,r=be(e),i=Tt.f,a=At.f,o=0;o<r.length;o++)n=r[o],xt(t,n)||i(t,n,a(e,n))}function ie(t,e){var n,r,i,a=t.target,o=t.global,s=t.stat,u=o?at:s?at[a]||nt(a,{}):(at[a]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Te(u,n))&&i.value:u[n],!Ce(o?n:a+(s?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;re(r,i)}(t.sham||i&&i.sham)&&Ot(r,"sham",!0),ce(u,n,r,t)}}function ae(r,i,t){return Oe(r),void 0===i?r:0===t?function(){return r.call(i)}:1===t?function(t){return r.call(i,t)}:2===t?function(t,e){return r.call(i,t,e)}:3===t?function(t,e,n){return r.call(i,t,e,n)}:function(){return r.apply(i,arguments)}}function oe(t){return Object(pt(t))}function se(t){return xt(Re,t)||(Le&&xt(Ie,t)?Re[t]=Ie[t]:Re[t]=je("Symbol."+t)),Re[t]}function ue(t,e){var n;return Ve(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Ve(n.prototype)?yt(n)&&(null===(n=n[De])&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}var le={set:Mt,get:Bt,has:Ft,enforce:function(t){return Ft(t)?Bt(t):Mt(t,{})},getterFor:function(n){return function(t){var e;if(!yt(t)||(e=Bt(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},ce=i(function(t){var e=le.get,o=le.enforce,s=(String+"").split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,r=!!r&&!!r.noTargetGet;return"function"==typeof n&&("string"!=typeof e||xt(n,"name")||Ot(n,"name",e),o(n).source=s.join("string"==typeof e?e:"")),t===at?void(a?t[e]=n:nt(e,n)):(i?!r&&t[e]&&(a=!0):delete t[e],void(a?t[e]=n:Ot(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||$t(this)})}),he=at,fe=function(t){return isNaN(t=+t)?0:(0<t?A:o)(t)},ge=function(s){return function(t,e,n){var r,i=et(t),a=te(i.length),o=ee(n,a);if(s&&e!=e){for(;o<a;)if((r=i[o++])!=r)return!0}else for(;o<a;o++)if((s||o in i)&&i[o]===e)return s||o||0;return!s&&-1}},de={includes:ge(!0),indexOf:ge(!1)},pe=de.indexOf,ye=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ve=ye.concat("length","prototype"),me={f:Object.getOwnPropertyNames||function(t){return ne(t,ve)}},xe={f:Object.getOwnPropertySymbols},be=Jt("Reflect","ownKeys")||function(t){var e=me.f(Et(t)),n=xe.f;return n?e.concat(n(t)):e},we=/#|\.prototype\./,ke=function(t,e){t=Pe[Se(t)];return t==Ee||t!=Ae&&("function"==typeof e?tt(e):!!e)},Se=ke.normalize=function(t){return(t+"").replace(we,".").toLowerCase()},Pe=ke.data={},Ae=ke.NATIVE="N",Ee=ke.POLYFILL="P",Ce=ke,Te=At.f,Oe=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function");return t},Ve=Array.isArray||function(t){return"Array"==ft(t)},Le=!!Object.getOwnPropertySymbols&&!tt(function(){return!(Symbol()+"")}),Ne=Le&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Re=Wt("wks"),Ie=at.Symbol,je=Ne?Ie:Ie&&Ie.withoutSetter||Rt,De=se("species"),ze=[].push,Me=function(f){var g=1==f,d=4==f,p=6==f;return function(t,e,n,r){for(var i,a,o=oe(t),s=dt(o),u=ae(e,n,3),l=te(s.length),c=0,r=r||ue,h=g?r(t,l):2==f?r(t,0):void 0;c<l;c++)if((5==f||p||c in s)&&(a=u(i=s[c],c,o),f))if(g)h[c]=a;else if(a)switch(f){case 3:return!0;case 5:return i;case 6:return c;case 2:ze.call(h,i)}else if(d)return!1;return p?-1:3==f||d?d:h}},Be={forEach:Me(0),map:Me(1),filter:Me(2),some:Me(3),every:Me(4),find:Me(5),findIndex:Me(6)},Fe=Jt("navigator","userAgent")||"",_e=at.process,$e=_e&&_e.versions,Ge=$e&&$e.v8;Ge?Xr=(Hr=Ge.split("."))[0]+Hr[1]:Fe&&((Hr=Fe.match(/Edge\/(\d+)/))&&!(74<=Hr[1])||(Hr=Fe.match(/Chrome\/(\d+)/))&&(Xr=Hr[1]));var qe=Xr&&+Xr,We=se("species"),He=function(e){return 51<=qe||!tt(function(){var t=[];return(t.constructor={})[We]=function(){return{foo:1}},1!==t[e](Boolean).foo})},Xe=Be.map,Ue=He("map"),Ye=Ue&&!tt(function(){[].map.call({length:-1,0:1},function(t){throw t})});ie({target:"Array",proto:!0,forced:!Ue||!Ye},{map:function(t){return Xe(this,t,1<arguments.length?arguments[1]:void 0)}});var Qe="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Ze=RegExp("^"+Qe+Qe+"*"),Ke=RegExp(Qe+Qe+"*$"),Je=function(e){return function(t){t=pt(t)+"";return 1&e&&(t=t.replace(Ze,"")),t=2&e?t.replace(Ke,""):t}},tn={start:Je(1),end:Je(2),trim:Je(3)},en=tn.trim,nn=at.parseFloat,rn=1/nn("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0?function(t){var e=en(t+""),t=nn(e);return 0===t&&"-"==e.charAt(0)?-0:t}:nn;ie({global:!0,forced:parseFloat!=rn},{parseFloat:rn});function an(){var t=Et(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}var on={UNSUPPORTED_Y:tt(function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),BROKEN_CARET:tt(function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")})},sn=RegExp.prototype.exec,un=e.replace,ln=sn,cn=(ki=/a/,Pi=/b*/g,sn.call(ki,"a"),sn.call(Pi,"a"),0!==ki.lastIndex||0!==Pi.lastIndex),hn=on.UNSUPPORTED_Y||on.BROKEN_CARET,fn=void 0!==/()??/.exec("")[1],gn=ln=cn||fn||hn?function(t){var e,n,r,i,a=this,o=hn&&a.sticky,s=an.call(a),u=a.source,l=0,c=t;return o&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),c=(t+"").slice(a.lastIndex),0<a.lastIndex&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(u="(?: "+u+")",c=" "+c,l++),n=new RegExp("^(?:"+u+")",s)),fn&&(n=new RegExp("^"+u+"$(?!\\s)",s)),cn&&(e=a.lastIndex),r=sn.call(o?n:a,c),o?r?(r.input=r.input.slice(l),r[0]=r[0].slice(l),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:cn&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),fn&&r&&1<r.length&&un.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}:ln;ie({target:"RegExp",proto:!0,forced:/./.exec!==gn},{exec:gn});function dn(t,e,n){return e+(n?Sn(t,e).length:1)}function pn(t,e){var n=t.exec;if("function"==typeof n){n=n.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==ft(t))throw TypeError("RegExp#exec called on incompatible receiver");return gn.call(t,e)}var yn=se("species"),vn=!tt(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),mn="$0"==="a".replace(/./,"$0"),xn=!tt(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};t="ab".split(t);return 2!==t.length||"a"!==t[0]||"b"!==t[1]}),bn=function(n,t,e,r){var a,i,o=se(n),s=!tt(function(){var t={};return t[o]=function(){return 7},7!=""[n](t)}),u=s&&!tt(function(){var t=!1,e=/a/;return"split"===n&&((e={}).constructor={},e.constructor[yn]=function(){return e},e.flags="",e[o]=/./[o]),e.exec=function(){return t=!0,null},e[o](""),!t});s&&u&&("replace"!==n||vn&&mn)&&("split"!==n||xn)||(a=/./[o],e=(u=e(o,""[n],function(t,e,n,r,i){return e.exec===gn?s&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}},{REPLACE_KEEPS_$0:mn}))[0],i=u[1],ce(String.prototype,n,e),ce(RegExp.prototype,o,2==t?function(t,e){return i.call(t,this,e)}:function(t){return i.call(t,this)})),r&&Ot(RegExp.prototype[o],"sham",!0)},wn=function(a){return function(t,e){var n,r=pt(t)+"",i=fe(e),t=r.length;return i<0||t<=i?a?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?a?r.charAt(i):e:a?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},kn={codeAt:wn(!1),charAt:wn(!0)},Sn=kn.charAt;bn("match",1,function(r,u,l){return[function(t){var e=pt(this),n=null==t?void 0:t[r];return void 0===n?new RegExp(t)[r](e+""):n.call(t,e)},function(t){var e=l(u,t,this);if(e.done)return e.value;var n=Et(t),r=this+"";if(!n.global)return pn(n,r);for(var i,a=n.unicode,o=[],s=n.lastIndex=0;null!==(i=pn(n,r));)i=i[0]+"",(o[s]=i)||(n.lastIndex=dn(r,te(n.lastIndex),a)),s++;return 0===s?null:o}]});var Pn=/\$([$&'`]|\d\d?|<[^>]*>)/g,An=/\$([$&'`]|\d\d?)/g;bn("replace",2,function(i,b,w,k){return[function(t,e){var n=pt(this),r=null==t?void 0:t[i];return void 0===r?b.call(n+"",t,e):r.call(t,n,e)},function(t,e){if(k.REPLACE_KEEPS_$0||"string"==typeof e&&-1===e.indexOf("$0")){var n=w(b,t,this,e);if(n.done)return n.value}var r=Et(t),i=this+"",a="function"==typeof e;a||(e+="");var o,s=r.global;s&&(o=r.unicode,r.lastIndex=0);for(var u=[];null!==(g=pn(r,i))&&(u.push(g),s);)g[0]+""||(r.lastIndex=dn(i,te(r.lastIndex),o));for(var l,c="",h=0,f=0;f<u.length;f++){for(var g,d=(g=u[f])[0]+"",p=S(P(fe(g.index),i.length),0),y=[],v=1;v<g.length;v++)y.push(void 0===(l=g[v])?l:l+"");var m,x=g.groups,x=a?(m=[d].concat(y,p,i),void 0!==x&&m.push(x),e.apply(void 0,m)+""):function(a,o,s,u,l,t){var c=s+a.length,h=u.length,e=An;return void 0!==l&&(l=oe(l),e=Pn),b.call(t,e,function(t,e){var n;switch(e.charAt(0)){case"$":return"$";case"&":return a;case"`":return o.slice(0,s);case"'":return o.slice(c);case"<":n=l[e.slice(1,-1)];break;default:var r=+e;if(0==r)return t;if(h<r){var i=A(r/10);return 0!==i&&i<=h?void 0===u[i-1]?e.charAt(1):u[i-1]+e.charAt(1):t}n=u[r-1]}return void 0===n?"":n})}(d,i,p,y,x,e);h<=p&&(c+=i.slice(h,p)+x,h=p+d.length)}return c+i.slice(h)}]});var En=/^[A-Z-]+$/,Cn=function(t,e){var n=[][t];return!n||!tt(function(){n.call(null,e||function(){throw 1},1)})},Tn=[].join,On=dt!=Object,it=Cn("join",",");ie({target:"Array",proto:!0,forced:On||it},{join:function(t){return Tn.call(et(this),void 0===t?",":t)}});function Vn(){}var Ln,Nn=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},Rn=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||Nn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()},In=/(\[[^\]]+\])/g,jn=/(#[^\s\+>~\.\[:]+)/g,Dn=/(\.[^\s\+>~\.\[:]+)/g,zn=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,Mn=/(:[\w-]+\([^\)]*\))/gi,Bn=/(:[^\s\+>~\.\[:]+)/g,Fn=/([^\s\+>~\.\[:]+)/g,_n=1e-8,$n=Object.keys||function(t){return ne(t,ye)},Gn=ot?Object.defineProperties:function(t,e){Et(t);for(var n,r=$n(e),i=r.length,a=0;a<i;)Tt.f(t,n=r[a++],e[n]);return t},qn=Jt("document","documentElement"),Wn="prototype",Hn="script",Xn=Yt("IE_PROTO"),Un=function(t){return"<"+Hn+">"+t+"</"+Hn+">"},Yn=function(){try{Ln=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var t;Yn=Ln?function(t){t.write(Un("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ln):((t=kt("iframe")).style.display="none",qn.appendChild(t),t.src="java"+Hn+":",(t=t.contentWindow.document).open(),t.write(Un("document.F=Object")),t.close(),t.F);for(var e=ye.length;e--;)delete Yn[Wn][ye[e]];return Yn()};Qt[Xn]=!0;function Qn(t){var e=he.Symbol||(he.Symbol={});xt(e,t)||sr(e,t,{value:or.f(t)})}function Zn(t,e){var n=Pr[t]=nr(mr[dr]);return pr(n,{type:gr,tag:t,description:e}),ot||(n.description=e),n}function Kn(t,e,n){return t===vr&&Kn(Ar,e,n),Et(t),e=vt(e,!0),Et(n),xt(Pr,e)?(n.enumerable?(xt(t,fr)&&t[fr][e]&&(t[fr][e]=!1),n=nr(n,{enumerable:ct(0,!1)})):(xt(t,fr)||wr(t,fr,ct(1,{})),t[fr][e]=!0),Or(t,e,n)):wr(t,e,n)}function Jn(e,t){Et(e);var n=et(t),t=$n(n).concat(er(n));return hr(t,function(t){ot&&!tr.call(n,t)||Kn(e,t,n[t])}),e}function tr(t){var e=vt(t,!0),t=Sr.call(this,e);return(this!==vr||!xt(Pr,e)||xt(Ar,e))&&(!(t||!xt(this,e)||!xt(Pr,e)||xt(this,fr)&&this[fr][e])||t)}function er(t){var e=t===vr,t=kr(e?Ar:et(t)),n=[];return hr(t,function(t){!xt(Pr,t)||e&&!xt(vr,t)||n.push(Pr[t])}),n}var nr=Object.create||function(t,e){var n;return null===t?n=Yn():(Vn[Wn]=Et(t),n=new Vn,Vn[Wn]=null,n[Xn]=t),void 0===e?n:Gn(n,e)},rr=me.f,ir={}.toString,ar="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],st={f:function(t){return ar&&"[object Window]"==ir.call(t)?function(t){try{return rr(t)}catch(t){return ar.slice()}}(t):rr(et(t))}},or={f:se},sr=Tt.f,ur=Tt.f,lr=se("toStringTag"),cr=function(t,e,n){t&&!xt(t=n?t:t.prototype,lr)&&ur(t,lr,{configurable:!0,value:e})},hr=Be.forEach,fr=Yt("hidden"),gr="Symbol",dr="prototype",Vt=se("toPrimitive"),pr=le.set,yr=le.getterFor(gr),vr=Object[dr],mr=at.Symbol,xr=Jt("JSON","stringify"),br=At.f,wr=Tt.f,kr=st.f,Sr=lt.f,Pr=Wt("symbols"),Ar=Wt("op-symbols"),Er=Wt("string-to-symbol-registry"),Cr=Wt("symbol-to-string-registry"),Gt=Wt("wks"),qt=at.QObject,Tr=!qt||!qt[dr]||!qt[dr].findChild,Or=ot&&tt(function(){return 7!=nr(wr({},"a",{get:function(){return wr(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=br(vr,e);r&&delete vr[e],wr(t,e,n),r&&t!==vr&&wr(vr,e,r)}:wr,Vr=Ne?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof mr},Zt=function(t,e){var n=et(t),t=vt(e,!0);if(n!==vr||!xt(Pr,t)||xt(Ar,t)){e=br(n,t);return!e||!xt(Pr,t)||xt(n,fr)&&n[fr][t]||(e.enumerable=!0),e}},ge=function(t){var t=kr(et(t)),e=[];return hr(t,function(t){xt(Pr,t)||xt(Qt,t)||e.push(t)}),e};Le||(ce((mr=function(){if(this instanceof mr)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?arguments[0]+"":void 0,e=Rt(t),n=function(t){this===vr&&n.call(Ar,t),xt(this,fr)&&xt(this[fr],e)&&(this[fr][e]=!1),Or(this,e,ct(1,t))};return ot&&Tr&&Or(vr,e,{configurable:!0,set:n}),Zn(e,t)})[dr],"toString",function(){return yr(this).tag}),ce(mr,"withoutSetter",function(t){return Zn(Rt(t),t)}),lt.f=tr,Tt.f=Kn,At.f=Zt,me.f=st.f=ge,xe.f=er,or.f=function(t){return Zn(se(t),t)},ot&&(wr(mr[dr],"description",{configurable:!0,get:function(){return yr(this).description}}),ce(vr,"propertyIsEnumerable",tr,{unsafe:!0}))),ie({global:!0,wrap:!0,forced:!Le,sham:!Le},{Symbol:mr}),hr($n(Gt),function(t){Qn(t)}),ie({target:gr,stat:!0,forced:!Le},{for:function(t){var e=t+"";if(xt(Er,e))return Er[e];t=mr(e);return Er[e]=t,Cr[t]=e,t},keyFor:function(t){if(!Vr(t))throw TypeError(t+" is not a symbol");return xt(Cr,t)?Cr[t]:void 0},useSetter:function(){Tr=!0},useSimple:function(){Tr=!1}}),ie({target:"Object",stat:!0,forced:!Le,sham:!ot},{create:function(t,e){return void 0===e?nr(t):Jn(nr(t),e)},defineProperty:Kn,defineProperties:Jn,getOwnPropertyDescriptor:Zt}),ie({target:"Object",stat:!0,forced:!Le},{getOwnPropertyNames:ge,getOwnPropertySymbols:er}),ie({target:"Object",stat:!0,forced:tt(function(){xe.f(1)})},{getOwnPropertySymbols:function(t){return xe.f(oe(t))}}),xr&&(va=!Le||tt(function(){var t=mr();return"[null]"!=xr([t])||"{}"!=xr({a:t})||"{}"!=xr(Object(t))}),ie({target:"JSON",stat:!0,forced:va},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((yt(n=e)||void 0!==t)&&!Vr(t))return Ve(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Vr(e))return e}),r[1]=e,xr.apply(null,r)}})),mr[dr][Vt]||Ot(mr[dr],Vt,mr[dr].valueOf),cr(mr,gr),Qt[fr]=!0;var Lr=Be.filter,ke=He("filter"),Me=ke&&!tt(function(){[].filter.call({length:-1,0:1},function(t){throw t})});ie({target:"Array",proto:!0,forced:!ke||!Me},{filter:function(t){return Lr(this,t,1<arguments.length?arguments[1]:void 0)}});var Nr=Be.forEach,Rr=Cn("forEach")?function(t){return Nr(this,t,1<arguments.length?arguments[1]:void 0)}:[].forEach;ie({target:"Array",proto:!0,forced:[].forEach!=Rr},{forEach:Rr}),ie({target:"Object",stat:!0,forced:!ot,sham:!ot},{defineProperties:Gn}),ie({target:"Object",stat:!0,forced:!ot,sham:!ot},{defineProperty:Tt.f});var Ir=At.f,_e=tt(function(){Ir(1)});ie({target:"Object",stat:!0,forced:!ot||_e,sham:!ot},{getOwnPropertyDescriptor:function(t,e){return Ir(et(t),e)}});function jr(t,e,n){(e=vt(e))in t?Tt.f(t,e,ct(0,n)):t[e]=n}ie({target:"Object",stat:!0,sham:!ot},{getOwnPropertyDescriptors:function(t){for(var e,n,r=et(t),i=At.f,a=be(r),o={},s=0;a.length>s;)void 0!==(n=i(r,e=a[s++]))&&jr(o,e,n);return o}});$e=tt(function(){$n(1)});ie({target:"Object",stat:!0,forced:$e},{keys:function(t){return $n(oe(t))}});var Dr,zr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(Dr in zr){var Mr=at[Dr],Mr=Mr&&Mr.prototype;if(Mr&&Mr.forEach!==Rr)try{Ot(Mr,"forEach",Rr)}catch(t){Mr.forEach=Rr}}function Br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Fr=i(function(t){var e=function(a){function o(t,e,n,r){var i,a,o,s,e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),r=new h(r||[]);return e._invoke=(i=t,a=n,o=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return f()}for(o.method=t,o.arg=e;;){var n=o.delegate;if(n){var r=function t(e,n){var r=e.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=g,t(e,n),"throw"===n.method))return b;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var r=u(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b;{if(!r.done)return r;n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g)}return n.delegate=null,b}(n,o);if(r){if(r===b)continue;return r}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===s)throw s="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s="executing";r=u(i,a,o);if("normal"===r.type){if(s=o.done?"completed":"suspendedYield",r.arg===b)continue;return{value:r.arg,done:o.done}}"throw"===r.type&&(s="completed",o.method="throw",o.arg=r.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function l(){}function e(){}function n(){}function t(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(o){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){t=u(o[t],o,n);if("throw"!==t.type){var a=t.arg;return(n=a.value)&&"object"==typeof n&&p.call(n,"__await")?Promise.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(n).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,i)})}i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function r(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function c(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(r,this),this.reset(!0)}function i(e){if(e){var t=e[v];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,t=function t(){for(;++n<e.length;)if(p.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return t.next=t}}return{next:f}}function f(){return{value:g,done:!0}}var g,d=Object.prototype,p=d.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},v=y.iterator||"@@iterator",m=y.asyncIterator||"@@asyncIterator",x=y.toStringTag||"@@toStringTag";a.wrap=o;var b={},w={};w[v]=function(){return this};y=Object.getPrototypeOf,y=y&&y(y(i([])));y&&y!==d&&p.call(y,v)&&(w=y);var k=n.prototype=l.prototype=Object.create(w);return(e.prototype=k.constructor=n).constructor=e,n[x]=e.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,n):(t.__proto__=n,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(k),t},a.awrap=function(t){return{__await:t}},t(s.prototype),s.prototype[m]=function(){return this},a.AsyncIterator=s,a.async=function(t,e,n,r){var i=new s(o(t,e,n,r));return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},t(k),k[x]="Generator",k[v]=function(){return this},k.toString=function(){return"[object Generator]"},a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=i,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(c),!t)for(var e in this)"t"===e.charAt(0)&&p.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){function t(t,e){return a.type="throw",a.arg=n,r.next=t,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw n;for(var r=this,e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=p.call(i,"catchLoc"),s=p.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n,r=this.tryEntries.length-1;0<=r;--r)if((n=this.tryEntries[r]).tryLoc<=this.prev&&p.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),c(e),b},catch:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).tryLoc===t){var r,i=e.completion;return"throw"===i.type&&(r=i.arg,c(e)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:i(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),b}},a}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}),_r=function(s){return function(){var t=this,o=arguments;return new Promise(function(e,n){function r(t){I(a,e,n,r,i,"next",t)}function i(t){I(a,e,n,r,i,"throw",t)}var a=s.apply(t,o);r(void 0)})}},$r=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},Ge=function(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),t},Gr=se("isConcatSpreadable"),qr=9007199254740991,Wr="Maximum allowed index exceeded",Hr=51<=qe||!tt(function(){var t=[];return t[Gr]=!1,t.concat()[0]!==t}),Xr=He("concat");ie({target:"Array",proto:!0,forced:!Hr||!Xr},{concat:function(){for(var t,e,n,r=oe(this),i=ue(r,0),a=0,o=-1,s=arguments.length;o<s;o++)if(function(t){if(!yt(t))return!1;var e=t[Gr];return void 0===e?Ve(t):!!e}(n=-1===o?r:arguments[o])){if(e=te(n.length),qr<a+e)throw TypeError(Wr);for(t=0;t<e;t++,a++)t in n&&jr(i,a,n[t])}else{if(qr<=a)throw TypeError(Wr);jr(i,a++,n)}return i.length=a,i}});var Ur=Be.every;ie({target:"Array",proto:!0,forced:Cn("every")},{every:function(t){return Ur(this,t,1<arguments.length?arguments[1]:void 0)}});var Ue=function(l){return function(t,e,n,r){Oe(e);var i=oe(t),a=dt(i),o=te(i.length),s=l?o-1:0,u=l?-1:1;if(n<2)for(;;){if(s in a){r=a[s],s+=u;break}if(s+=u,l?s<0:o<=s)throw TypeError("Reduce of empty array with no initial value")}for(;l?0<=s:s<o;s+=u)s in a&&(r=e(r,a[s],s,i));return r}},Yr={left:Ue(!1),right:Ue(!0)}.left;ie({target:"Array",proto:!0,forced:Cn("reduce")},{reduce:function(t){return Yr(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Ye=Date.prototype,Qr="Invalid Date",Qe="toString",Zr=Ye[Qe],Kr=Ye.getTime;new Date(NaN)+""!=Qr&&ce(Ye,Qe,function(){var t=Kr.call(this);return t==t?Zr.call(this):Qr});Je={};Je[se("toStringTag")]="z";function Jr(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=ni(e=Object(t),ti))?t:ei?ft(e):"Object"==(t=ft(e))&&"function"==typeof e.callee?"Arguments":t}var rn="[object z]"==Je+"",ti=se("toStringTag"),ei="Arguments"==ft(function(){return arguments}()),ni=function(t,e){try{return t[e]}catch(t){}};rn||ce(Object.prototype,"toString",function(){return"[object "+Jr(this)+"]"},{unsafe:!0});function ri(t,e,n){for(var r in e)ce(t,r,e[r],n);return t}function ii(t){var e=Jt(t),t=Tt.f;ot&&e&&!e[li]&&t(e,li,{configurable:!0,get:function(){return this}})}function ai(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function oi(t){return void 0!==t&&(ci.Array===t||fi[hi]===t)}function si(t){if(null!=t)return t[gi]||t["@@iterator"]||ci[Jr(t)]}function ui(t,e,n,r){try{return r?e(Et(n)[0],n[1]):e(n)}catch(e){n=t.return;throw void 0!==n&&Et(n.call(t)),e}}var e=at.Promise,li=se("species"),ci={},hi=se("iterator"),fi=Array.prototype,gi=se("iterator"),di=i(function(t){function f(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var a,o,s,u,l,c,h=ae(e,n,r?2:1);if(i)a=t;else{if("function"!=typeof(i=si(t)))throw TypeError("Target is not iterable");if(oi(i)){for(o=0,s=te(t.length);o<s;o++)if((u=r?h(Et(c=t[o])[0],c[1]):h(t[o]))&&u instanceof f)return u;return new f(!1)}a=i.call(t)}for(l=a.next;!(c=l.call(a)).done;)if("object"==typeof(u=ui(a,h,c.value,r))&&u&&u instanceof f)return u;return new f(!1)}).stop=function(t){return new f(!0,t)}}),pi=se("iterator"),yi=!1;try{var vi=0,mi={next:function(){return{done:!!vi++}},return:function(){yi=!0}};mi[pi]=function(){return this},Array.from(mi,function(){throw 2})}catch(t){}function xi(t,e){var n;return void 0===(t=Et(t).constructor)||null==(n=Et(t)[Si])?e:Oe(n)}function bi(t){return function(){Li(t)}}var wi,ki=function(t,e){if(!e&&!yi)return!1;var n=!1;try{var r={};r[pi]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Si=se("species"),Pi=/(iphone|ipod|ipad).*applewebkit/i.test(Fe),Ai=at.location,on=at.setImmediate,ln=at.clearImmediate,Ei=at.process,wn=at.MessageChannel,Ci=at.Dispatch,Ti=0,Oi={},Vi="onreadystatechange",Li=function(t){var e;Oi.hasOwnProperty(t)&&(e=Oi[t],delete Oi[t],e())},On=function(t){Li(t.data)},it=function(t){at.postMessage(t+"",Ai.protocol+"//"+Ai.host)};on&&ln||(on=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return Oi[++Ti]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},wi(Ti),Ti},ln=function(t){delete Oi[t]},"process"==ft(Ei)?wi=function(t){Ei.nextTick(bi(t))}:Ci&&Ci.now?wi=function(t){Ci.now(bi(t))}:wn&&!Pi?(ks=(bs=new wn).port2,bs.port1.onmessage=On,wi=ae(ks.postMessage,ks,1)):!at.addEventListener||"function"!=typeof postMessage||at.importScripts||tt(it)?wi=Vi in kt("script")?function(t){qn.appendChild(kt("script"))[Vi]=function(){qn.removeChild(this),Li(t)}}:function(t){setTimeout(bi(t),0)}:(wi=it,at.addEventListener("message",On,!1)));var Ni,Ri,Ii,ji,Di,zi,Mi,Bi,Wt={set:on,clear:ln},qt=At.f,Fi=Wt.set,Ne=at.MutationObserver||at.WebKitMutationObserver,_i=at.process,st=at.Promise,$i="process"==ft(_i),Gt=qt(at,"queueMicrotask"),Zt=Gt&&Gt.value;Zt||(Ni=function(){var t,e;for($i&&(t=_i.domain)&&t.exit();Ri;){e=Ri.fn,Ri=Ri.next;try{e()}catch(t){throw Ri?ji():Ii=void 0,t}}Ii=void 0,t&&t.enter()},ji=$i?function(){_i.nextTick(Ni)}:Ne&&!Pi?(Di=!0,zi=document.createTextNode(""),new Ne(Ni).observe(zi,{characterData:!0}),function(){zi.data=Di=!Di}):st&&st.resolve?(Mi=st.resolve(void 0),Bi=Mi.then,function(){Bi.call(Mi,Ni)}):function(){Fi.call(at,Ni)});function Gi(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Oe(n),this.reject=Oe(r)}function qi(t,e){return Et(t),yt(e)&&e.constructor===t?e:((0,(t=Qi.f(t)).resolve)(e),t.promise)}var Wi,Hi,Xi,Ui,Yi=Zt||function(t){t={fn:t,next:void 0};Ii&&(Ii.next=t),Ri||(Ri=t,ji()),Ii=t},Qi={f:function(t){return new Gi(t)}},Zi=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Ki=Wt.set,Ji=se("species"),ta="Promise",ea=le.get,na=le.set,ra=le.getterFor(ta),ia=e,aa=at.TypeError,oa=at.document,sa=at.process,ua=Jt("fetch"),la=Qi.f,ca=la,ha="process"==ft(sa),fa=!!(oa&&oa.createEvent&&at.dispatchEvent),ga="unhandledrejection",da=1,pa=1,ya=2,ge=Ce(ta,function(){if(!($t(ia)!==ia+"")){if(66===qe)return!0;if(!ha&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=qe&&/native code/.test(ia))return!1;function t(t){t(function(){},function(){})}var e=ia.resolve(1);return(e.constructor={})[Ji]=t,!(e.then(function(){})instanceof t)}),va=ge||!ki(function(t){ia.all(t).catch(function(){})}),ma=function(t){var e;return!(!yt(t)||"function"!=typeof(e=t.then))&&e},xa=function(g,d,p){var y;d.notified||(d.notified=!0,y=d.reactions,Yi(function(){for(var n,r,t=d.value,e=d.state==da,i=0;y.length>i;){var a,o,s,u=y[i++],l=e?u.ok:u.fail,c=u.resolve,h=u.reject,f=u.domain;try{l?(e||(d.rejection===ya&&function(t,e){Ki.call(at,function(){ha?sa.emit("rejectionHandled",t):ba("rejectionhandled",t,e.value)})}(g,d),d.rejection=pa),!0===l?a=t:(f&&f.enter(),a=l(t),f&&(f.exit(),s=!0)),a===u.promise?h(aa("Promise-chain cycle")):(o=ma(a))?o.call(a,c,h):c(a)):h(t)}catch(t){f&&!s&&f.exit(),h(t)}}d.reactions=[],d.notified=!1,p&&!d.rejection&&(n=g,r=d,Ki.call(at,function(){var t,e=r.value;if(wa(r)&&(t=Zi(function(){ha?sa.emit("unhandledRejection",e,n):ba(ga,n,e)}),r.rejection=ha||wa(r)?ya:pa,t.error))throw t.value}))}))},ba=function(t,e,n){var r;fa?((r=oa.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),at.dispatchEvent(r)):r={promise:e,reason:n},(e=at["on"+t])?e(r):t===ga&&function(t,e){var n=at.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},wa=function(t){return t.rejection!==pa&&!t.parent},ka=function(e,n,r,i){return function(t){e(n,r,t,i)}},Sa=function(t,e,n,r){e.done||(e.done=!0,(e=r?r:e).value=n,e.state=2,xa(t,e,!0))},Pa=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw aa("Promise can't be resolved itself");var i=ma(t);i?Yi(function(){var e={done:!1};try{i.call(t,ka(Pa,n,e,r),ka(Sa,n,e,r))}catch(t){Sa(n,e,t,r)}}):(r.value=t,r.state=da,xa(n,r,!1))}catch(t){Sa(n,{done:!1},t,r)}}};ge&&(ia=function(t){ai(this,ia,ta),Oe(t),Wi.call(this);var e=ea(this);try{t(ka(Pa,this,e),ka(Sa,this,e))}catch(t){Sa(this,e,t)}},(Wi=function(){na(this,{type:ta,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=ri(ia.prototype,{then:function(t,e){var n=ra(this),r=la(xi(this,ia));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=ha?sa.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&xa(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Hi=function(){var t=new Wi,e=ea(t);this.promise=t,this.resolve=ka(Pa,t,e),this.reject=ka(Sa,t,e)},Qi.f=la=function(t){return t===ia||t===Xi?new Hi:ca(t)},"function"==typeof e&&(Ui=e.prototype.then,ce(e.prototype,"then",function(t,e){var n=this;return new ia(function(t,e){Ui.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof ua&&ie({global:!0,enumerable:!0,forced:!0},{fetch:function(){return qi(ia,ua.apply(at,arguments))}}))),ie({global:!0,wrap:!0,forced:ge},{Promise:ia}),cr(ia,ta,!1),ii(ta),Xi=Jt(ta),ie({target:ta,stat:!0,forced:ge},{reject:function(t){var e=la(this);return e.reject.call(void 0,t),e.promise}}),ie({target:ta,stat:!0,forced:ge},{resolve:function(t){return qi(this,t)}}),ie({target:ta,stat:!0,forced:va},{all:function(t){var s=this,e=la(s),u=e.resolve,l=e.reject,n=Zi(function(){var r=Oe(s.resolve),i=[],a=0,o=1;di(t,function(t){var e=a++,n=!1;i.push(void 0),o++,r.call(s,t).then(function(t){n||(n=!0,i[e]=t,--o||u(i))},l)}),--o||u(i)});return n.error&&l(n.value),e.promise},race:function(t){var n=this,r=la(n),i=r.reject,e=Zi(function(){var e=Oe(n.resolve);di(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}});function Aa(t){var e;return yt(t)&&(void 0===(e=t[Ea])?"RegExp"==ft(t):!!e)}var Ea=se("match"),Ca=[].push,Ta=4294967295,Oa=!tt(function(){return!RegExp(Ta,"y")});bn("split",2,function(i,d,p){var y="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var n=pt(this)+"",r=void 0===e?Ta:e>>>0;if(0==r)return[];if(void 0===t)return[n];if(!Aa(t))return d.call(n,t,r);for(var i,a,o,s=[],e=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,l=new RegExp(t.source,e+"g");(i=gn.call(l,n))&&!(u<(a=l.lastIndex)&&(s.push(n.slice(u,i.index)),1<i.length&&i.index<n.length&&Ca.apply(s,i.slice(1)),o=i[0].length,u=a,s.length>=r));)l.lastIndex===i.index&&l.lastIndex++;return u===n.length?!o&&l.test("")||s.push(""):s.push(n.slice(u)),s.length>r?s.slice(0,r):s}:function(t,e){return void 0===t&&0===e?[]:d.call(this,t,e)};return[function(t,e){var n=pt(this),r=null==t?void 0:t[i];return void 0===r?y.call(n+"",t,e):r.call(t,n,e)},function(t,e){var n=p(y,t,this,e,y!==d);if(n.done)return n.value;var r=Et(t),i=this+"",n=xi(r,RegExp),a=r.unicode,t=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(Oa?"y":"g"),o=new n(Oa?r:"^(?:"+r.source+")",t),s=void 0===e?Ta:e>>>0;if(0==s)return[];if(0===i.length)return null===pn(o,i)?[i]:[];for(var u=0,l=0,c=[];l<i.length;){o.lastIndex=Oa?l:0;var h,f=pn(o,Oa?i:i.slice(l));if(null===f||(h=P(te(o.lastIndex+(Oa?0:l)),i.length))===u)l=dn(i,l,a);else{if(c.push(i.slice(u,l)),c.length===s)return c;for(var g=1;g<=f.length-1;g++)if(c.push(f[g]),c.length===s)return c;l=u=h}}return c.push(i.slice(u)),c}]},!Oa);var Vt="undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,Va=D,La=z;"function"==typeof Vt.setTimeout&&(Va=setTimeout),"function"==typeof Vt.clearTimeout&&(La=clearTimeout);var Na,Ra=[],Ia=!1,ja=-1;_.prototype.run=function(){this.fun.apply(null,this.array)};for(var Da,za,Ma,Ba=Vt.performance||{},Fa=Ba.now||Ba.mozNow||Ba.msNow||Ba.oNow||Ba.webkitNow||function(){return(new Date).getTime()},_a=new Date,$a={nextTick:function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Ra.push(new _(t,e)),1!==Ra.length||Ia||M(F)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:$,addListener:$,once:$,off:$,removeListener:$,removeAllListeners:$,emit:$,binding:function(){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*Fa.call(Ba),n=A(e),e=A(e%1*1e9);return t&&(n-=t[0],(e-=t[1])<0&&(n--,e+=1e9)),[n,e]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-_a)/1e3}},Ga=i(function(o){!function(){var t,e,n,r,i,a;"undefined"!=typeof performance&&null!==performance&&performance.now?o.exports=function(){return performance.now()}:null!=$a&&$a.hrtime?(o.exports=function(){return(t()-i)/1e6},e=$a.hrtime,r=(t=function(){var t=e();return 1e9*t[0]+t[1]})(),a=1e9*$a.uptime(),i=r-a):n=Date.now?(o.exports=function(){return Date.now()-n},Date.now()):(o.exports=function(){return(new Date).getTime()-n},(new Date).getTime())}.call(rt)}),qa="undefined"==typeof window?rt:window,Wa=["moz","webkit"],Ha="AnimationFrame",Xa=qa["request"+Ha],Ua=qa["cancel"+Ha]||qa["cancelRequest"+Ha],Ya=0;!Xa&&Ya<Wa.length;Ya++)Xa=qa[Wa[Ya]+"Request"+Ha],Ua=qa[Wa[Ya]+"Cancel"+Ha]||qa[Wa[Ya]+"CancelRequest"+Ha];Xa&&Ua||(za=Da=0,Ma=[],Xa=function(t){var e,n;return 0===Ma.length&&(e=Ga(),n=S(0,1e3/60-(e-Da)),Da=n+e,setTimeout(function(){for(var t=Ma.slice(0),e=Ma.length=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(Da)}catch(e){setTimeout(function(){throw e},0)}},r(n))),Ma.push({handle:++za,callback:t,cancelled:!1}),za},Ua=function(t){for(var e=0;e<Ma.length;e++)Ma[e].handle===t&&(Ma[e].cancelled=!0)});function Qa(t){return Xa.call(qa,t)}Qa.cancel=function(){Ua.apply(qa,arguments)},Qa.polyfill=function(t){(t=t||qa).requestAnimationFrame=Xa,t.cancelAnimationFrame=Ua};var ke=Tt.f,Me=Function.prototype,Za=Me.toString,Ka=/^\s*function ([^ (]*)/;!ot||"name"in Me||ke(Me,"name",{configurable:!0,get:function(){try{return Za.call(this).match(Ka)[1]}catch(t){return""}}});function Ja(t){this.ok=!1,this.alpha=1,t=(t=(t="#"==t.charAt(0)?t.substr(1,6):t).replace(/ /g,"")).toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=c[t]||t;for(var h=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],e=0;e<h.length;e++){var n=h[e].re,r=h[e].process,n=n.exec(t);n&&(n=r(n),this.r=n[0],this.g=n[1],this.b=n[2],3<n.length&&(this.alpha=n[3]),this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.alpha=this.alpha<0?0:1<this.alpha||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return"#"+(t=1==t.length?"0"+t:t)+(e=1==e.length?"0"+e:e)+(n=1==n.length?"0"+n:n)},this.getHelpXML=function(){for(var t,e=[],n=0;n<h.length;n++)for(var r=h[n].example,i=0;i<r.length;i++)e[e.length]=r[i];for(t in c)e[e.length]=t;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(n=0;n<e.length;n++)try{var o=document.createElement("li"),s=new RGBColor(e[n]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+s.toHex()+"; color:"+s.toHex(),u.appendChild(document.createTextNode("test"));var l=document.createTextNode(" "+e[n]+" -> "+s.toRGB()+" -> "+s.toHex());o.appendChild(u),o.appendChild(l),a.appendChild(o)}catch(t){}return a}}var to=(Ge(eo,[{key:"hasValue",value:function(){var t=this.value;return null!==t&&""!==t&&0!==t&&void 0!==t}},{key:"isString",value:function(t){var e=this.value,n="string"==typeof e;return n&&t?t.test(e):n}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case/px$/.test(t):case/^[0-9]+$/.test(t):return!0;default:return!1}}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"getValue",value:function(t){return void 0===t||this.hasValue()?this.value:t}},{key:"getNumber",value:function(t){if(!this.hasValue())return void 0===t?0:parseFloat(t);t=this.value,t=parseFloat(t);return this.isString(/%$/)&&(t/=100),t}},{key:"getString",value:function(t){return void 0===t||this.hasValue()?void 0===this.value?"":this.value+"":t+""}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9\.\-]/g,"")}},{key:"getPixels",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!this.hasValue())return 0;var t=Rn("boolean"==typeof t?[void 0,t]:[t],2),n=t[0],t=t[1],r=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*P(r.computeSize("x"),r.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*S(r.computeSize("x"),r.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*r.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*r.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&t:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*r.computeSize(n);default:var i=this.getNumber();return e&&i<1?i*r.computeSize(n):i}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(d/180);case this.isString(/grad$/):return this.getNumber()*(d/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(d/180)}}},{key:"getDefinition",value:function(){var t=this.getString(),e=(e=t.match(/#([^\)'"]+)/))&&e[1];return this.document.definitions[e=e||t]}},{key:"getFillStyleDefinition",value:function(t,e){var n,r=this.getDefinition();return r?"function"==typeof r.createGradient?r.createGradient(this.document.ctx,t,e):"function"!=typeof r.createPattern?null:(r.getHrefAttribute().hasValue()&&(n=r.getAttribute("patternTransform"),r=r.getHrefAttribute().getDefinition(),n.hasValue()&&r.getAttribute("patternTransform",!0).setValue(n.value)),r.createPattern(this.document.ctx,t,e)):null}},{key:"getTextBaseline",value:function(){return this.hasValue()?eo.textBaselineMapping[this.getString()]:null}},{key:"addOpacity",value:function(t){for(var e,n=this.value,r=n.length,i=0,a=0;a<r&&(","===n[a]&&i++,3!==i);a++);return t.hasValue()&&this.isString()&&3!==i&&((e=new Ja(n)).ok&&(n="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(t.getNumber(),")"))),new eo(this.document,this.name,n)}}],[{key:"empty",value:function(t){return new eo(t,"EMPTY","")}}]),eo);function eo(t,e,n){Br(this,eo),this.document=t,this.name=e,this.value=n}to.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var no=(Ge(ho,[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(t,e){this.viewPorts.push({width:t,height:e})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getCurrent",value:function(){var t=this.viewPorts;return t[t.length-1]}},{key:"computeSize",value:function(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:m(x(this.width,2)+x(this.height,2))/m(2)}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}}]),ho),ro=(Ge(co,[{key:"angleTo",value:function(t){return y(t.y-this.y,t.x-this.x)}},{key:"applyTransform",value:function(t){var e=this.x,n=this.y,r=e*t[0]+n*t[2]+t[4],t=e*t[1]+n*t[3]+t[5];this.x=r,this.y=t}}],[{key:"parse",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=b(t),t=Rn(n,2),n=t[0],t=t[1];return new co(void 0===n?e:n,void 0===t?e:t)}},{key:"parseScale",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=b(t),t=Rn(n,2),n=t[0],n=void 0===n?e:n,t=t[1];return new co(n,void 0===t?n:t)}},{key:"parsePath",value:function(t){for(var e=b(t),n=e.length,r=[],i=0;i<n;i+=2)r.push(new co(e[i],e[i+1]));return r}}]),co),io=(Ge(lo,[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){var t,e,n;this.working||(n=this.screen,t=this.onClick,e=this.onMouseMove,(n=n.ctx.canvas).onclick=t,n.onmousemove=e,this.working=!0)}},{key:"stop",value:function(){var t;this.working&&(t=this.screen.ctx.canvas,this.working=!1,t.onclick=null,t.onmousemove=null)}},{key:"hasEvents",value:function(){return this.working&&0<this.events.length}},{key:"runEvents",value:function(){var t,i,e;this.working&&(e=this.screen,t=this.events,i=this.eventElements,(e=e.ctx.canvas.style)&&(e.cursor=""),t.forEach(function(t,e){for(var n=t.run,r=i[e];r;)n(r),r=r.parent}),this.events=[],this.eventElements=[])}},{key:"checkPath",value:function(r,i){var t,a;this.working&&i&&(t=this.events,a=this.eventElements,t.forEach(function(t,e){var n=t.x,t=t.y;!a[e]&&i.isPointInPath&&i.isPointInPath(n,t)&&(a[e]=r)}))}},{key:"checkBoundingBox",value:function(r,i){var t,a;this.working&&i&&(t=this.events,a=this.eventElements,t.forEach(function(t,e){var n=t.x,t=t.y;!a[e]&&i.isPointInBox(n,t)&&(a[e]=r)}))}},{key:"mapXY",value:function(t,e){for(var n=this.screen,r=n.window,n=n.ctx,i=new ro(t,e),a=n.canvas;a;)i.x-=a.offsetLeft,i.y-=a.offsetTop,a=a.offsetParent;return r.scrollX&&(i.x+=r.scrollX),r.scrollY&&(i.y+=r.scrollY),i}},{key:"onClick",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),t=e.x,e=e.y;this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onClick&&t.onClick()}})}},{key:"onMouseMove",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),t=e.x,e=e.y;this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onMouseMove&&t.onMouseMove()}})}}]),lo),ao="undefined"==typeof window?null:window,oo="undefined"==typeof fetch?null:fetch.bind(window),so=(Ge(uo,[{key:"wait",value:function(t){this.waits.push(t)}},{key:"ready",value:function(){return this.readyPromise||Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var t=this.waits.every(function(t){return t()});return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t}},{key:"setDefaults",value:function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}},{key:"setViewBox",value:function(t){var e=t.document,n=t.ctx,r=t.aspectRatio,i=t.width,a=t.desiredWidth,o=t.height,s=t.desiredHeight,u=t.minX,l=void 0===u?0:u,c=t.minY,h=void 0===c?0:c,f=t.refX,g=t.refY,d=t.clip,u=t.clipX,c=void 0===u?0:u,u=t.clipY,t=void 0===u?0:u,u=w(r).replace(/^defer\s/,"").split(" "),r=Rn(u,2),u=r[0]||"xMidYMid",r=r[1]||"meet",p=i/a,y=o/s,v=P(p,y),m=S(p,y),a=a,s=s;"meet"===r&&(a*=v,s*=v),"slice"===r&&(a*=m,s*=m);var x,b,f=new to(e,"refX",f),e=new to(e,"refY",g),g=f.hasValue()&&e.hasValue();switch(g&&n.translate(-v*f.getPixels("x"),-v*e.getPixels("y")),void 0!==d&&d&&(b=v*c,x=v*t,n.beginPath(),n.moveTo(b,x),n.lineTo(i,x),n.lineTo(i,o),n.lineTo(b,o),n.closePath(),n.clip()),g||(t="meet"===r&&v===y,x="slice"===r&&m===y,b="meet"===r&&v===p,g="slice"===r&&m===p,/^xMid/.test(u)&&(t||x)&&n.translate(i/2-a/2,0),/YMid$/.test(u)&&(b||g)&&n.translate(0,o/2-s/2),/^xMax/.test(u)&&(t||x)&&n.translate(i-a,0),/YMax$/.test(u)&&(b||g)&&n.translate(0,o-s)),!0){case"none"===u:n.scale(p,y);break;case"meet"===r:n.scale(v,v);break;case"slice"===r:n.scale(m,m)}n.translate(-l,-h)}},{key:"start",value:function(e){var n,r,i,a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.enableRedraw,s=t.ignoreMouse,u=t.ignoreAnimation,l=t.ignoreDimensions,c=void 0!==l&&l,l=t.ignoreClear,h=void 0!==l&&l,f=t.forceRedraw,g=t.scaleWidth,d=t.scaleHeight,p=t.offsetX,y=t.offsetY,t=this.FRAMERATE,v=this.mouse,m=1e3/t;this.frameDuration=m,this.readyPromise=new Promise(function(t){a.resolveReady=t}),this.isReady()&&this.render(e,c,h,g,d,p,y),void 0!==o&&o&&(n=Date.now(),r=n,o=function t(){n=Date.now(),m<=(i=n-r)&&(r=n-i%m,a.shouldUpdate(void 0!==u&&u,f)&&(a.render(e,c,h,g,d,p,y),v.runEvents())),a.intervalId=Qa(t)},void(i=0)!==s&&s||v.start(),this.intervalId=Qa(o))}},{key:"stop",value:function(){this.intervalId&&(Qa.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(t,e){if(!t){var n=this.frameDuration;if(this.animations.reduce(function(t,e){return e.update(n)||t},!1))return!0}return!("function"!=typeof e||!e())||!this.isReadyLock&&this.isReady()||!!this.mouse.hasEvents()}},{key:"render",value:function(t,e,n,r,i,a,o){var s=this.CLIENT_WIDTH,u=this.CLIENT_HEIGHT,l=this.viewPort,c=this.ctx,h=this.isFirstRender,f=c.canvas;l.clear(),f.width&&f.height?l.setCurrent(f.width,f.height):l.setCurrent(s,u);var g=t.getStyle("width"),s=t.getStyle("height");!e&&(h||"number"!=typeof r&&"number"!=typeof i)&&(g.hasValue()&&(f.width=g.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),s.hasValue()&&(f.height=s.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));var d,u=f.clientWidth||f.width,f=f.clientHeight||f.height;e&&g.hasValue()&&s.hasValue()&&(u=g.getPixels("x"),f=s.getPixels("y")),l.setCurrent(u,f),"number"==typeof a&&t.getAttribute("x",!0).setValue(a),"number"==typeof o&&t.getAttribute("y",!0).setValue(o),"number"!=typeof r&&"number"!=typeof i||(l=b(t.getAttribute("viewBox").getString()),o=a=0,"number"==typeof r&&((d=t.getStyle("width")).hasValue()?a=d.getPixels("x")/r:isNaN(l[2])||(a=l[2]/r)),"number"==typeof i&&((d=t.getStyle("height")).hasValue()?o=d.getPixels("y")/i:isNaN(l[3])||(o=l[3]/i)),a=a||o,o=o||a,t.getAttribute("width",!0).setValue(r),t.getAttribute("height",!0).setValue(i),(i=t.getStyle("transform",!0,!0)).setValue("".concat(i.getString()," scale(").concat(1/a,", ").concat(1/o,")"))),n||c.clearRect(0,0,u,f),t.render(c),h&&(this.isFirstRender=!1)}}]),uo);function uo(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.fetch,n=void 0===n?oo:n,e=e.window,e=void 0===e?ao:e;Br(this,uo),this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new no,this.mouse=new io(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=e,this.fetch=n}function lo(t){Br(this,lo),this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}function co(t,e){Br(this,co),this.x=t,this.y=e}function ho(){Br(this,ho),this.viewPorts=[]}so.defaultWindow=ao,so.defaultFetch=oo;function fo(t,e){return!e||"object"!==xo(e)&&"function"!=typeof e?bo(t):e}var go,po,yo=so.defaultFetch,vo="undefined"==typeof DOMParser?null:DOMParser,mo=(Ge(So,[{key:"parse",value:(po=_r(Fr.mark(function t(e){return Fr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(/^</.test(e))return t.abrupt("return",this.parseFromString(e));t.next=2;break;case 2:return t.abrupt("return",this.load(e));case 3:case"end":return t.stop()}},t,this)})),function(){return po.apply(this,arguments)})},{key:"parseFromString",value:function(e){try{return(new this.DOMParser).parseFromString(e,"image/svg+xml")}catch(t){return(new this.DOMParser).parseFromString(e,"text/xml")}}},{key:"load",value:(go=_r(Fr.mark(function t(e){var n;return Fr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(e);case 2:return n=t.sent,t.next=5,n.text();case 5:return n=t.sent,t.abrupt("return",this.parseFromString(n));case 7:case"end":return t.stop()}},t,this)})),function(){return go.apply(this,arguments)})}]),So),xo=i(function(e){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n}),bo=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},wo=i(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),ko=i(function(n){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r}),_e=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ko(t,e)},$e=!ki(function(t){Array.from(t)});function So(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.fetch,e=void 0===e?yo:e,t=t.DOMParser,t=void 0===t?vo:t;Br(this,So),this.fetch=e,this.DOMParser=t}ie({target:"Array",stat:!0,forced:$e},{from:function(t){var e,n,r,i,a,o=oe(t),s="function"==typeof this?this:Array,u=arguments.length,l=1<u?arguments[1]:void 0,c=void 0!==l,h=0,t=si(o);if(c&&(l=ae(l,2<u?arguments[2]:void 0,2)),null==t||s==Array&&oi(t))for(n=new s(e=te(o.length));h<e;h++)jr(n,h,c?l(o[h],h):o[h]);else for(a=(i=t.call(o)).next,n=new s;!(r=a.call(i)).done;h++)jr(n,h,c?ui(i,l,[r.value,h],!0):r.value);return n.length=h,n}});var Po=se("unscopables"),Ao=Array.prototype;null==Ao[Po]&&Tt.f(Ao,Po,{configurable:!0,value:nr(null)});var He=function(t){Ao[Po][t]=!0},Eo=de.includes;ie({target:"Array",proto:!0},{includes:function(t){return Eo(this,t,1<arguments.length?arguments[1]:void 0)}}),He("includes");var Co=Be.some;ie({target:"Array",proto:!0,forced:Cn("some")},{some:function(t){return Co(this,t,1<arguments.length?arguments[1]:void 0)}});var To=se("match");ie({target:"String",proto:!0,forced:!function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[To]=!1,"/./"[e](n)}catch(e){}}}("includes")},{includes:function(t){return!!~(pt(this)+"").indexOf(function(t){if(Aa(t))throw TypeError("The method doesn't accept regular expressions");return t}(t),1<arguments.length?arguments[1]:void 0)}});var Hr=!tt(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Oo=Yt("IE_PROTO"),Vo=Object.prototype,Lo=Hr?Object.getPrototypeOf:function(t){return t=oe(t),xt(t,Oo)?t[Oo]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Vo:null},Xr=se("iterator"),Ue=!1;[].keys&&("next"in(Zs=[].keys())?(vu=Lo(Lo(Zs)))!==Object.prototype&&(Cu=vu):Ue=!0),xt(Cu=null==Cu?{}:Cu,Xr)||Ot(Cu,Xr,function(){return this});function No(){return this}function Ro(t,e,n,r,i,a,o){function s(t){return t===i&&g?g:!Mo&&t in h?h[t]:"keys"===t||t===Fo||t===_o?function(){return new n(this,t)}:function(){return new n(this)}}!function(t,e,n){e+=" Iterator";t.prototype=nr(Io,{next:ct(1,n)}),cr(t,e,!1),ci[e]=jo}(n,e,r);var u,l,c=!1,h=t.prototype,f=h[Bo]||h["@@iterator"]||i&&h[i],g=!Mo&&f||s(i);if((r="Array"==e&&h.entries||f)&&(t=Lo(r.call(new t)),zo!==Object.prototype&&t.next&&(Lo(t)!==zo&&(Do?Do(t,zo):"function"!=typeof t[Bo]&&Ot(t,Bo,No)),cr(t,e+" Iterator",!0))),i==Fo&&f&&f.name!==Fo&&(c=!0,g=function(){return f.call(this)}),h[Bo]!==g&&Ot(h,Bo,g),ci[e]=g,i)if(u={values:s(Fo),keys:a?g:s("keys"),entries:s(_o)},o)for(l in u)!Mo&&!c&&l in h||ce(h,l,u[l]);else ie({target:e,proto:!0,forced:Mo||c},u);return u}var Ye={IteratorPrototype:Cu,BUGGY_SAFARI_ITERATORS:Ue},Io=Ye.IteratorPrototype,jo=function(){return this},Do=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(r){}return function(t,e){return Et(t),function(t){if(!yt(t)&&null!==t)throw TypeError("Can't set "+t+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),zo=Ye.IteratorPrototype,Mo=Ye.BUGGY_SAFARI_ITERATORS,Bo=se("iterator"),Fo="values",_o="entries",$o=kn.charAt,Go="String Iterator",qo=le.set,Wo=le.getterFor(Go);Ro(String,"String",function(t){qo(this,{type:Go,string:t+"",index:0})},function(){var t=Wo(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=$o(e,n),t.index+=n.length,{value:n,done:!1})});var Ho,Xo=tn.trim;ie({target:"String",proto:!0,forced:(Ho="trim",tt(function(){return"\t\n\v\f\r                　\u2028\u2029\ufeff"[Ho]()||"​᠎"!="​᠎"[Ho]()||"\t\n\v\f\r                　\u2028\u2029\ufeff"[Ho].name!==Ho}))},{trim:function(){return Xo(this)}});Ge(Uo,[{key:"getAttribute",value:function(t){var e=this.attributes[t];if(e||!(!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1]))return e||to.empty(this.document);e=new to(this.document,t,"");return this.attributes[t]=e}},{key:"getHrefAttribute",value:function(){for(var t in this.attributes)if("href"==t||/:href$/.test(t))return this.attributes[t];return to.empty(this.document)}},{key:"getStyle",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=this.styles[t];if(r)return r;var i=this.getAttribute(t);if(i&&i.hasValue())return this.styles[t]=i;if(!n){n=this.parent;if(n){n=n.getStyle(t);if(n&&n.hasValue())return n}}if(e){e=new to(this.document,t,"");return this.styles[t]=e}return r||to.empty(this.document)}},{key:"render",value:function(t){var e;"none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()&&(t.save(),this.getStyle("mask").hasValue()?(e=this.getStyle("mask").getDefinition())&&e.apply(t,this):"none"!==this.getStyle("filter").getValue("none")?(e=this.getStyle("filter").getDefinition())&&e.apply(t,this):(this.setContext(t),this.renderChildren(t),this.clearContext(t)),t.restore())}},{key:"setContext",value:function(){}},{key:"clearContext",value:function(){}},{key:"renderChildren",value:function(e){this.children.forEach(function(t){t.render(e)})}},{key:"addChild",value:function(t){t=t instanceof Uo?t:this.document.createElement(t);t.parent=this,Uo.ignoreChildTypes.includes(t.type)||this.children.push(t)}},{key:"matchesSelector",value:function(e){var t=this.node;if("function"==typeof t.matches)return t.matches(e);t=t.getAttribute("class");return!(!t||""===t)&&t.split(" ").some(function(t){if(".".concat(t)===e)return!0})}},{key:"addStylesFromStyleDefinition",value:function(){var t,e=this.document,n=e.styles,r=e.stylesSpecificity;for(t in n)if("@"!==t[0]&&this.matchesSelector(t)){var i=n[t],a=r[t];if(i)for(var o in i){var s=this.stylesSpecificity[o];(s=void 0===s?"000":s)<=a&&(this.styles[o]=i[o],this.stylesSpecificity[o]=a)}}}}]),Qe=Uo;function Uo(n,t){var e,r,i=this,a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];Br(this,Uo),this.document=n,this.node=t,this.captureTextNodes=a,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],t&&1===t.nodeType&&(Array.from(t.attributes).forEach(function(t){var e=l(t.nodeName);i.attributes[e]=new to(n,e,t.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(function(t){return t.trim()}).forEach(function(t){var e;t&&(e=t.split(":"),e=(t=Rn(e,2))[0],t=t[1],i.styles[e]=new to(n,e.trim(),t.trim()))}),e=n.definitions,(r=this.getAttribute("id")).hasValue()&&!e[r.getValue()]&&(e[r.getValue()]=this),Array.from(t.childNodes).forEach(function(t){1===t.nodeType?i.addChild(t):!a||3!==t.nodeType&&4!==t.nodeType||0<(t=n.createTextNode(t)).getText().length&&i.addChild(t)}))}Qe.ignoreChildTypes=["title"];var Yo=(_e(Jo,Qe),Jo),Qo=de.indexOf,Zo=[].indexOf,Ko=!!Zo&&1/[1].indexOf(1,-0)<0,Je=Cn("indexOf");function Jo(t,e,n){return Br(this,Jo),n=fo(this,wo(Jo).call(this,t,e,n)),console.warn("Element ".concat(e.nodeName," not yet implemented.")),n}ie({target:"Array",proto:!0,forced:Ko||Je},{indexOf:function(t){return Ko?Zo.apply(this,arguments)||0:Qo(this,t,1<arguments.length?arguments[1]:void 0)}});var ts=[].reverse,rn=[1,2];ie({target:"Array",proto:!0,forced:rn+""==rn.reverse()+""},{reverse:function(){return Ve(this)&&(this.length=this.length),ts.call(this)}});var es=i(function(r){function i(t,e,n){return r.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wo(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}},i(t,e,n||t)}r.exports=i}),ns=(Ge(rs,[{key:"toString",value:function(){return[(t=this.fontStyle)&&("normal"===(t=t.trim().toLowerCase())||"italic"===t||"oblique"===t||"inherit"===t||"initial"===t||"unset"===t||/^oblique\s+(-|)\d+deg$/.test(t))?t:"",this.fontVariant,(t=this.fontWeight)&&("normal"===(t=t.trim().toLowerCase())||"bold"===t||"lighter"===t||"bolder"===t||"inherit"===t||"initial"===t||"unset"===t||/^[\d.]+$/.test(t))?t:"",this.fontSize,(t=this.fontFamily,"undefined"==typeof process?t:t.trim().split(",").map(G).join(","))].join(" ").trim();var t}}],[{key:"parse",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length?arguments[1]:void 0,n="",r="",i="",a="",o="",t=w(t).trim().split(" "),s={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return t.forEach(function(t){switch(!0){case!s.fontStyle&&rs.styles.includes(t):"inherit"!==t&&(n=t),s.fontStyle=!0;break;case!s.fontVariant&&rs.variants.includes(t):"inherit"!==t&&(r=t),s.fontStyle=!0,s.fontVariant=!0;break;case!s.fontWeight&&rs.weights.includes(t):"inherit"!==t&&(i=t),s.fontStyle=!0,s.fontVariant=!0,s.fontWeight=!0;break;case!s.fontSize:var e;"inherit"!==t&&(e=t.split("/"),e=Rn(e,1),a=e[0]),s.fontStyle=!0,s.fontVariant=!0,s.fontWeight=!0,s.fontSize=!0;break;default:"inherit"!==t&&(o+=t)}}),new rs(n,r,i,a,o,e)}}]),rs);function rs(t,e,n,r,i,a){Br(this,rs);a=a?"string"==typeof a?rs.parse(a):a:{};this.fontFamily=i||a.fontFamily,this.fontSize=r||a.fontSize,this.fontStyle=t||a.fontStyle,this.fontWeight=n||a.fontWeight,this.fontVariant=e||a.fontVariant}ns.styles="normal|italic|oblique|inherit",ns.variants="normal|small-caps|inherit",ns.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";function is(t,e,n){var r,i;return Do&&"function"==typeof(r=e.constructor)&&r!==n&&yt(i=r.prototype)&&i!==n.prototype&&Do(t,i),t}function as(t){var e,n,r,i,a,o,s,u=vt(t,!1);if("string"==typeof u&&2<u.length)if(43===(e=(u=us(u)).charCodeAt(0))||45===e){if(88===(t=u.charCodeAt(2))||120===t)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+u}for(a=(i=u.slice(2)).length,o=0;o<a;o++)if((s=i.charCodeAt(o))<48||r<s)return NaN;return parseInt(i,n)}return+u}var mi=me.f,os=At.f,ss=Tt.f,us=tn.trim,ls="Number",cs=at[ls],hs=cs.prototype,fs=ft(nr(hs))==ls;if(Ce(ls,!cs(" 0o1")||!cs("0b1")||cs("+0x1"))){for(var gs,ds=function(t){var t=arguments.length<1?0:t,e=this;return e instanceof ds&&(fs?tt(function(){hs.valueOf.call(e)}):ft(e)!=ls)?is(new cs(as(t)),e,ds):as(t)},ps=ot?mi(cs):["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY","EPSILON","isFinite","isInteger","isNaN","isSafeInteger","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","parseFloat","parseInt","isInteger"],ys=0;ps.length>ys;ys++)xt(cs,gs=ps[ys])&&!xt(ds,gs)&&ss(ds,gs,os(cs,gs));(ds.prototype=hs).constructor=ds,ce(at,ls,ds)}var vs=(Ge(ws,[{key:"addPoint",value:function(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addBoundingBox",value:function(t){var e,n,r;t&&(e=t.x1,n=t.y1,r=t.x2,t=t.y2,this.addPoint(e,n),this.addPoint(r,t))}},{key:"sumCubic",value:function(t,e,n,r,i){return x(1-t,3)*e+3*x(1-t,2)*t*n+3*(1-t)*x(t,2)*r+x(t,3)*i}},{key:"bezierCurveAdd",value:function(t,e,n,r,i){var a,o,s=6*e-12*n+6*r,u=-3*e+9*n-9*r+3*i,l=3*n-3*e;0!=u?(a=x(s,2)-4*l*u)<0||(0<(o=(-s+m(a))/(2*u))&&o<1&&(t?this.addX(this.sumCubic(o,e,n,r,i)):this.addY(this.sumCubic(o,e,n,r,i))),0<(u=(-s-m(a))/(2*u))&&u<1&&(t?this.addX(this.sumCubic(u,e,n,r,i)):this.addY(this.sumCubic(u,e,n,r,i)))):0==s||0<(s=-l/s)&&s<1&&(t?this.addX(this.sumCubic(s,e,n,r,i)):this.addY(this.sumCubic(s,e,n,r,i)))}},{key:"addBezierCurve",value:function(t,e,n,r,i,a,o,s){this.addPoint(t,e),this.addPoint(o,s),this.bezierCurveAdd(!0,t,n,i,o),this.bezierCurveAdd(!1,e,r,a,s)}},{key:"addQuadraticCurve",value:function(t,e,n,r,i,a){n=t+2/3*(n-t),r=e+2/3*(r-e);this.addBezierCurve(t,e,n,n+1/3*(i-t),r,r+1/3*(a-e),i,a)}},{key:"isPointInBox",value:function(t,e){var n=this.x1,r=this.y1,i=this.x2,a=this.y2;return n<=t&&t<=i&&r<=e&&e<=a}},{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}}]),ws),Fe="toString",ms=RegExp.prototype,xs=ms[Fe],wn=tt(function(){return"/a/b"!=xs.call({source:"a",flags:"b"})}),bs=xs.name!=Fe;function ws(){var t=Number.NaN,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t;Br(this,ws),this.x1=e,this.y1=n,this.x2=r,this.y2=t,this.addPoint(e,n),this.addPoint(r,t)}(wn||bs)&&ce(RegExp.prototype,Fe,function(){var t=Et(this),e=t.source+"",n=t.flags;return"/"+e+"/"+((void 0===n&&t instanceof RegExp&&!("flags"in ms)?an.call(t):n)+"")},{unsafe:!0});var ks=(Ge(Ls,[{key:"apply",value:function(t){var e=this.point,n=e.x,e=e.y;t.translate(n||0,e||0)}},{key:"unapply",value:function(t){var e=this.point,n=e.x,e=e.y;t.translate(-1*n||0,-1*e||0)}},{key:"applyToPoint",value:function(t){var e=this.point,n=e.x,e=e.y;t.applyTransform([1,0,0,1,n||0,e||0])}}]),Ls),it=(Ge(Vs,[{key:"apply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(r.getRadians()),t.translate(-e,-n)}},{key:"unapply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(-1*r.getRadians()),t.translate(-e,-n)}},{key:"applyToPoint",value:function(t){var e=this.cx,n=this.cy,r=this.angle.getRadians();t.applyTransform([1,0,0,1,e||0,n||0]),t.applyTransform([v(r),p(r),-p(r),v(r),0,0]),t.applyTransform([1,0,0,1,-e||0,-n||0])}}]),Vs),On=(Ge(Os,[{key:"apply",value:function(t){var e=this.scale,n=e.x,e=e.y;t.scale(n,e||n)}},{key:"unapply",value:function(t){var e=this.scale,n=e.x,e=e.y;t.scale(1/n,1/e||n)}},{key:"applyToPoint",value:function(t){var e=this.scale,n=e.x,e=e.y;t.applyTransform([n||0,0,0,e||0,0,0])}}]),Os),on=(Ge(Ts,[{key:"apply",value:function(t){var e=this.matrix;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},{key:"unapply",value:function(t){var e=this.matrix,n=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],e=1/(n*(+o-0*s)-r*(+a-0*s)+i*(0*a-0*o));t.transform(e*(+o-0*s),e*(0*s-+a),e*(0*i-+r),e*(+n-0*i),e*(r*s-i*o),e*(i*a-n*s))}},{key:"applyToPoint",value:function(t){t.applyTransform(this.matrix)}}]),Ts),ln=(_e(Cs,on),Cs),qt=(_e(Es,ln),Es),Gt=(_e(As,ln),As),Ss=(Ge(Ps,[{key:"apply",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].apply(t)}},{key:"unapply",value:function(t){for(var e=this.transforms,n=e.length-1;0<=n;n--)e[n].unapply(t)}},{key:"applyToPoint",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].applyToPoint(t)}}],[{key:"fromElement",value:function(t,e){var n=e.getStyle("transform",!1,!0),e=e.getStyle("transform-origin",!1,!0);return n.hasValue()?new Ps(t,n.getString(),e.getString()):null}}]),Ps);function Ps(t,e,n){var r=this;Br(this,Ps),this.document=t,this.transforms=[];var e=w(e).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),i=n?b(n):[];e.forEach(function(t){var e;"none"!==t&&(t=(e=t).split("("),t=(e=Rn(t,2))[0],e=e[1],t=[t.trim(),e.trim().replace(")","")],t=(e=Rn(t,2))[0],e=e[1],void 0!==(t=Ps.transformTypes[t])&&r.transforms.push(new t(r.document,e,i)))})}function As(t,e){return Br(this,As),(e=fo(this,wo(As).call(this,t,e))).type="skewY",e.matrix=[1,n(e.angle.getRadians()),0,1,0,0],e}function Es(t,e){return Br(this,Es),(e=fo(this,wo(Es).call(this,t,e))).type="skewX",e.matrix=[1,0,n(e.angle.getRadians()),1,0,0],e}function Cs(t,e){var n;return Br(this,Cs),(n=fo(this,wo(Cs).call(this,t,e))).type="skew",n.angle=null,n.angle=new to(t,"angle",e),n}function Ts(t,e){Br(this,Ts),this.type="matrix",this.matrix=[],this.matrix=b(e)}function Os(t,e){Br(this,Os),this.type="scale",this.scale=null;e=ro.parseScale(e);0!==e.x&&0!==e.y||(e.x=_n,e.y=_n),this.scale=e}function Vs(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];Br(this,Vs),this.type="rotate",this.angle=null,this.cx=0,this.cy=0;e=b(e);this.angle=new to(t,"angle",e[0]),this.cx=(e[1]||0)+(n[0]||0),this.cy=(e[2]||0)+(n[1]||0)}function Ls(t,e){Br(this,Ls),this.type="translate",this.point=null,this.point=ro.parse(e)}Ss.transformTypes={translate:ks,rotate:it,scale:On,matrix:on,skewX:qt,skewY:Gt};var Pi=(_e(Ds,Qe),Ge(Ds,[{key:"calculateOpacity",value:function(){for(var t,e=1,n=this;n;)(t=n.getStyle("opacity",!1,!0)).hasValue()&&(e*=t.getNumber()),n=n.parent;return e}},{key:"setContext",value:function(t){var e,n,r,i,a,o,s,u,l,c,h;!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1]||(n=this.getStyle("fill"),r=this.getStyle("fill-opacity"),i=this.getStyle("stroke"),o=this.getStyle("stroke-opacity"),n.isUrlDefinition()?(e=n.getFillStyleDefinition(this,r))&&(t.fillStyle=e):n.hasValue()&&("currentColor"===n.getString()&&n.setValue(this.getStyle("color").getValue()),"inherit"!==(n=n.getString())&&(t.fillStyle="none"===n?"rgba(0,0,0,0)":n)),r.hasValue()&&(r=new to(this.document,"fill",t.fillStyle).addOpacity(r).getString(),t.fillStyle=r),i.isUrlDefinition()?(s=i.getFillStyleDefinition(this,o))&&(t.strokeStyle=s):i.hasValue()&&("currentColor"===i.getString()&&i.setValue(this.getStyle("color").getValue()),"inherit"!==(a=i.getString())&&(t.strokeStyle="none"===a?"rgba(0,0,0,0)":a)),o.hasValue()&&(h=new to(this.document,"stroke",t.strokeStyle).addOpacity(o).getString(),t.strokeStyle=h),(s=this.getStyle("stroke-width")).hasValue()&&(l=s.getPixels(),t.lineWidth=l||_n),i=this.getStyle("stroke-linecap"),a=this.getStyle("stroke-linejoin"),o=this.getStyle("stroke-miterlimit"),h=this.getStyle("paint-order"),s=this.getStyle("stroke-dasharray"),l=this.getStyle("stroke-dashoffset"),i.hasValue()&&(t.lineCap=i.getString()),a.hasValue()&&(t.lineJoin=a.getString()),o.hasValue()&&(t.miterLimit=o.getNumber()),h.hasValue()&&(t.paintOrder=h.getValue()),s.hasValue()&&"none"!==s.getString()&&(u=b(s.getString()),void 0===t.setLineDash?void 0===t.webkitLineDash?void 0===t.mozDash||1===u.length&&0===u[0]||(t.mozDash=u):t.webkitLineDash=u:t.setLineDash(u),c=l.getPixels(),void 0===t.lineDashOffset?void 0===t.webkitLineDashOffset?void 0!==t.mozDashOffset&&(t.mozDashOffset=c):t.webkitLineDashOffset=c:t.lineDashOffset=c)),this.modifiedEmSizeStack=!1,void 0!==t.font&&(h=this.getStyle("font"),s=this.getStyle("font-style"),u=this.getStyle("font-variant"),l=this.getStyle("font-weight"),f=this.getStyle("font-size"),c=this.getStyle("font-family"),h=new ns(s.getString(),u.getString(),l.getString(),f.hasValue()?"".concat(f.getPixels(!0),"px"):"",c.getString(),ns.parse(h.getString(),t.font)),s.setValue(h.fontStyle),u.setValue(h.fontVariant),l.setValue(h.fontWeight),f.setValue(h.fontSize),c.setValue(h.fontFamily),t.font=h.toString(),f.isPixels()&&(this.document.emSize=f.getPixels(),this.modifiedEmSizeStack=!0));var f=Ss.fromElement(this.document,this);f&&f.apply(t);f=this.getStyle("clip-path",!1,!0);!f.hasValue()||(f=f.getDefinition())&&f.apply(t),t.globalAlpha=this.calculateOpacity()}},{key:"clearContext",value:function(t){es(wo(Ds.prototype),"clearContext",this).call(this,t),this.modifiedEmSizeStack&&this.document.popEmSize()}}]),Ds),Ne=(_e(js,Pi),Ge(js,[{key:"setContext",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];es(wo(js.prototype),"setContext",this).call(this,t,e);e=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();e&&(t.textBaseline=e)}},{key:"initializeCoordinates",value:function(t){this.x=this.getAttribute("x").getPixels("x"),this.y=this.getAttribute("y").getPixels("y");var e=this.getAttribute("dx"),n=this.getAttribute("dy");e.hasValue()&&(this.x+=e.getPixels("x")),n.hasValue()&&(this.y+=n.getPixels("y")),this.x+=this.getAnchorDelta(t,this,0)}},{key:"getBoundingBox",value:function(n){var r=this;if("text"!==this.type)return this.getTElementBoundingBox(n);this.initializeCoordinates(n);var i=null;return this.children.forEach(function(t,e){e=r.getChildBoundingBox(n,r,r,e);i?i.addBoundingBox(e):i=e}),i}},{key:"getFontSize",value:function(){var t=this.document,e=this.parent,t=ns.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(t)}},{key:"getTElementBoundingBox",value:function(t){var e=this.getFontSize();return new vs(this.x,this.y-e,this.x+this.measureText(t),this.y)}},{key:"getGlyph",value:function(t,e,n){var r,i,a=e[n],o=null;return t.isArabic?(r=e.length,i=e[n-1],e=e[n+1],void 0!==t.glyphs[a]&&((o=t.glyphs[a][0<n&&" "!==i&&(n===r-1||" "===e)?"initial":0<n&&" "!==i&&n<r-2&&" "!==e?"medial":(0===n||" "===i)&&n<r-2&&" "!==e?"terminal":"isolated"])||"glyph"!==t.glyphs[a].type||(o=t.glyphs[a]))):o=t.glyphs[a],o=o||t.missingGlyph}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(t){var e=t||this.node,n=Array.from(e.parentNode.childNodes),t=n.indexOf(e),n=n.length-1,e=w(e.value||e.text||e.textContent||"");return 0===t&&(e=s(e)),e=t===n?u(e):e}},{key:"renderChildren",value:function(n){var t,r=this;"text"===this.type?(this.initializeCoordinates(n),this.children.forEach(function(t,e){r.renderChild(n,r,r,e)}),(t=this.document.screen.mouse).isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(n))):this.renderTElementChildren(n)}},{key:"renderTElementChildren",value:function(t){var e=this.document,n=this.parent,r=this.getText(),i=n.getStyle("font-family").getDefinition();if(i)for(var a,o=i.fontFace.unitsPerEm,s=ns.parse(e.ctx.font),u=n.getStyle("font-size").getNumber(s.fontSize),l=n.getStyle("font-style").getString(s.fontStyle),c=u/o,h=i.isRTL?r.split("").reverse().join(""):r,f=b(n.getAttribute("dx").getString()),g=h.length,d=0;d<g;d++){a=this.getGlyph(i,h,d),t.translate(this.x,this.y),t.scale(c,-c);var p=t.lineWidth;t.lineWidth=t.lineWidth*o/u,"italic"===l&&t.transform(1,0,.4,1,0,0),a.render(t),"italic"===l&&t.transform(1,0,-.4,1,0,0),t.lineWidth=p,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=u*(a.horizAdvX||i.horizAdvX)/o,void 0===f[d]||isNaN(f[d])||(this.x+=f[d])}else{s=this.x,n=this.y;"stroke"===t.paintOrder?(t.strokeStyle&&t.strokeText(r,s,n),t.fillStyle&&t.fillText(r,s,n)):(t.fillStyle&&t.fillText(r,s,n),t.strokeStyle&&t.strokeText(r,s,n))}}},{key:"getAnchorDelta",value:function(t,e,n){var r=this.getStyle("text-anchor").getString("start");if("start"===r)return 0;for(var i=e.children,a=i.length,o=null,s=0,u=n;u<a&&(o=i[u],!(n<u&&o.getAttribute("x").hasValue()||o.getAttribute("text-anchor").hasValue()));u++)s+=o.measureTextRecursive(t);return-1*("end"===r?s:s/2)}},{key:"adjustChildCoordinates",value:function(t,e,n,r){var i=n.children[r];if("function"!=typeof i.measureText)return i;var a,o=i.getAttribute("x"),s=i.getAttribute("y"),u=i.getAttribute("dx"),l=i.getAttribute("dy"),c=i.getAttribute("text-anchor").getString("start");return 0===r&&"textNode"!==i.type&&(o.hasValue()||o.setValue(e.getAttribute("x").getValue("0")),s.hasValue()||s.setValue(e.getAttribute("y").getValue("0")),u.hasValue()||u.setValue(e.getAttribute("dx").getValue("0")),l.hasValue()||l.setValue(e.getAttribute("dy").getValue("0"))),o.hasValue()?(i.x=o.getPixels("x")+e.getAnchorDelta(t,n,r),"start"!==c&&(a=i.measureTextRecursive(t),i.x+=-1*("end"===c?a:a/2)),u.hasValue()&&(i.x+=u.getPixels("x"))):("start"!==c&&(a=i.measureTextRecursive(t),e.x+=-1*("end"===c?a:a/2)),u.hasValue()&&(e.x+=u.getPixels("x")),i.x=e.x),e.x=i.x+i.measureText(t),s.hasValue()?(i.y=s.getPixels("y"),l.hasValue()&&(i.y+=l.getPixels("y"))):(l.hasValue()&&(e.y+=l.getPixels("y")),i.y=e.y),e.y=i.y,i}},{key:"getChildBoundingBox",value:function(n,r,t,e){var i=this.adjustChildCoordinates(n,r,t,e),a=i.getBoundingBox(n);return a?(i.children.forEach(function(t,e){e=r.getChildBoundingBox(n,r,i,e);a.addBoundingBox(e)}),a):null}},{key:"renderChild",value:function(n,r,t,e){var i=this.adjustChildCoordinates(n,r,t,e);i.render(n),i.children.forEach(function(t,e){r.renderChild(n,r,i,e)})}},{key:"measureTextRecursive",value:function(n){return this.children.reduce(function(t,e){return t+e.measureTextRecursive(n)},this.measureText(n))}},{key:"measureText",value:function(t){var e=this.measureCache;if(~e)return e;e=this.getText(),e=this.measureTargetText(t,e);return this.measureCache=e}},{key:"measureTargetText",value:function(t,e){if(!e.length)return 0;var n=this.parent,r=n.getStyle("font-family").getDefinition();if(r){for(var i=this.getFontSize(),a=r.isRTL?e.split("").reverse().join(""):e,o=b(n.getAttribute("dx").getString()),s=a.length,u=0,l=0;l<s;l++)u+=(this.getGlyph(r,a,l).horizAdvX||r.horizAdvX)*i/r.fontFace.unitsPerEm,void 0===o[l]||isNaN(o[l])||(u+=o[l]);return u}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);e=t.measureText(e).width;return t.restore(),e}}]),js),st=(_e(Is,Ne),Ge(Is,[{key:"getText",value:function(){return this.text}}]),Is),Ns=(_e(Rs,st),Rs);function Rs(){var t;return Br(this,Rs),(t=fo(this,wo(Rs).apply(this,arguments))).type="textNode",t}function Is(t,e,n){return Br(this,Is),(n=fo(this,wo(Is).call(this,t,e,(this instanceof Is?this.constructor:void 0)===Is||n))).type="tspan",n.text=0<n.children.length?"":n.getTextFromNode(),n}function js(t,e,n){return Br(this,js),(n=fo(this,wo(js).call(this,t,e,(this instanceof js?this.constructor:void 0)===js||n))).type="text",n.x=0,n.y=0,n.measureCache=-1,n}function Ds(){var t;return Br(this,Ds),(t=fo(this,wo(Ds).apply(this,arguments))).modifiedEmSizeStack=!1,t}ie({target:"Array",proto:!0},{fill:function(t){for(var e=oe(this),n=te(e.length),r=arguments.length,i=ee(1<r?arguments[1]:void 0,n),r=2<r?arguments[2]:void 0,a=void 0===r?n:ee(r,n);i<a;)e[i++]=t;return e}}),He("fill");var zs=(Ge(Ys,[{key:"reset",value:function(){this.i=-1,this.command="",this.previousCommand="",this.start=new ro(0,0),this.control=new ro(0,0),this.current=new ro(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){return this.i>=this.tokens.length-1}},{key:"isCommandOrEnd",value:function(){if(this.isEnd())return!0;var t=this.i,e=this.tokens;return/^[A-Za-z]$/.test(e[t+1])}},{key:"isRelativeCommand",value:function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0;default:return!1}}},{key:"getToken",value:function(){return this.i++,this.tokens[this.i]}},{key:"getScalar",value:function(){return parseFloat(this.getToken())}},{key:"nextCommand",value:function(){this.previousCommand=this.command,this.command=this.getToken()}},{key:"getPoint",value:function(){var t=new ro(this.getScalar(),this.getScalar());return this.makeAbsolute(t)}},{key:"getAsControlPoint",value:function(){var t=this.getPoint();return this.control=t}},{key:"getAsCurrentPoint",value:function(){var t=this.getPoint();return this.current=t}},{key:"getReflectedControlPoint",value:function(){var t=this.previousCommand.toLowerCase();if("c"!==t&&"s"!==t&&"q"!==t&&"t"!==t)return this.current;var e=this.current,n=e.x,r=e.y,t=this.control,e=t.x,t=t.y;return new ro(2*n-e,2*r-t)}},{key:"makeAbsolute",value:function(t){var e,n;return this.isRelativeCommand()&&(e=(n=this.current).x,n=n.y,t.x+=e,t.y+=n),t}},{key:"addMarker",value:function(t,e,n){var r=this.points,i=this.angles;n&&0<i.length&&!i[i.length-1]&&(i[i.length-1]=r[r.length-1].angleTo(n)),this.addMarkerAngle(t,e?e.angleTo(t):null)}},{key:"addMarkerAngle",value:function(t,e){this.points.push(t),this.angles.push(e)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var t=this.angles,e=t.length,n=0;n<e;n++)if(!t[n])for(var r=n+1;r<e;r++)if(t[r]){t[n]=t[r];break}return t}}]),Ys),Zt=(_e(Us,Pi),Ge(Us,[{key:"path",value:function(t){var e=this.pathParser,n=new vs;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":this.pathM(t,n);break;case"L":case"l":this.pathL(t,n);break;case"H":case"h":this.pathH(t,n);break;case"V":case"v":this.pathV(t,n);break;case"C":case"c":this.pathC(t,n);break;case"S":case"s":this.pathS(t,n);break;case"Q":case"q":this.pathQ(t,n);break;case"T":case"t":this.pathT(t,n);break;case"A":case"a":this.pathA(t,n);break;case"Z":case"z":this.pathZ(t,n)}return n}},{key:"getBoundingBox",value:function(){return this.path()}},{key:"getMarkers",value:function(){var t=this.pathParser,e=t.getMarkerPoints(),n=t.getMarkerAngles();return e.map(function(t,e){return[t,n[e]]})}},{key:"renderChildren",value:function(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"===e.getString("inherit")?t.fill():t.fill(e.getString())),""!==t.strokeStyle&&t.stroke();var n=this.getMarkers();if(n){var r,i=n.length-1,a=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),s=this.getStyle("marker-end");if(a.isUrlDefinition()&&(e=a.getDefinition(),a=(r=Rn(n[0],2))[0],r=r[1],e.render(t,a,r)),o.isUrlDefinition())for(var u=o.getDefinition(),l=1;l<i;l++){var c=Rn(n[l],2),h=c[0],c=c[1];u.render(t,h,c)}s.isUrlDefinition()&&(r=s.getDefinition(),s=(o=Rn(n[i],2))[0],o=o[1],r.render(t,s,o))}}},{key:"pathM",value:function(t,e){var n=this.pathParser,r=n.getAsCurrentPoint(),i=r.x,a=r.y;for(n.addMarker(r),e.addPoint(i,a),t&&t.moveTo(i,a),n.start=n.current;!n.isCommandOrEnd();){var o=n.getAsCurrentPoint(),s=o.x,u=o.y;n.addMarker(o,n.start),e.addPoint(s,u),t&&t.lineTo(s,u)}}},{key:"pathL",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getAsCurrentPoint(),a=i.x,o=i.y;n.addMarker(i,r),e.addPoint(a,o),t&&t.lineTo(a,o)}}},{key:"pathH",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=new ro((n.isRelativeCommand()?r.x:0)+n.getScalar(),r.y);n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathV",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=new ro(r.x,(n.isRelativeCommand()?r.y:0)+n.getScalar());n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathC",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathS",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getReflectedControlPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathQ",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getAsControlPoint(),a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathT",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getReflectedControlPoint();n.control=i;var a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathA",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getScalar(),a=n.getScalar(),o=n.getScalar()*(d/180),s=n.getScalar(),u=n.getScalar(),l=n.getAsCurrentPoint(),c=new ro(v(o)*(r.x-l.x)/2+p(o)*(r.y-l.y)/2,-p(o)*(r.x-l.x)/2+v(o)*(r.y-l.y)/2),h=x(c.x,2)/x(i,2)+x(c.y,2)/x(a,2);1<h&&(i*=m(h),a*=m(h));var f=(s===u?-1:1)*m((x(i,2)*x(a,2)-x(i,2)*x(c.y,2)-x(a,2)*x(c.x,2))/(x(i,2)*x(c.y,2)+x(a,2)*x(c.x,2)));isNaN(f)&&(f=0);var g=new ro(f*i*c.y/a,f*-a*c.x/i),h=new ro((r.x+l.x)/2+v(o)*g.x-p(o)*g.y,(r.y+l.y)/2+p(o)*g.x+v(o)*g.y),s=E([1,0],[(c.x-g.x)/i,(c.y-g.y)/a]),f=[(c.x-g.x)/i,(c.y-g.y)/a],r=[(-c.x-g.x)/i,(-c.y-g.y)/a],c=E(f,r);k(f,r)<=-1&&(c=d);g=1-u?1:-1,f=s+(c=1<=k(f,r)?0:c)/2*g,r=new ro(h.x+i*v(f),h.y+a*p(f));n.addMarkerAngle(r,f-g*d/2),n.addMarkerAngle(l,f-g*d),e.addPoint(l.x,l.y),!t||isNaN(s)||isNaN(c)||(g=a<i?i:a,l=a<i?1:i/a,i=a<i?a/i:1,t.translate(h.x,h.y),t.rotate(o),t.scale(l,i),t.arc(0,0,g,s,s+c,!!(1-u)),t.scale(1/l,1/i),t.rotate(-o),t.translate(-h.x,-h.y))}}},{key:"pathZ",value:function(t,e){var n=this.pathParser;t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath(),n.current=n.start}}]),Us),Ms=(_e(Xs,Pi),Ge(Xs,[{key:"clearContext",value:function(t){es(wo(Xs.prototype),"clearContext",this).call(this,t),this.document.screen.viewPort.removeCurrent()}},{key:"setContext",value:function(t){var e=this.document,n=e.screen,r=e.window,i=t.canvas;n.setDefaults(t),i.style&&void 0!==t.font&&r&&void 0!==r.getComputedStyle&&(t.font=r.getComputedStyle(i).getPropertyValue("font"),(f=new to(e,"fontSize",ns.parse(t.font).fontSize)).hasValue()&&(e.rootEmSize=f.getPixels("y"),e.emSize=e.rootEmSize)),es(wo(Xs.prototype),"setContext",this).call(this,t),this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y"));var a=n.viewPort,o=a.width,s=a.height;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%");var u=this.getAttribute("refX"),l=this.getAttribute("refY"),c=this.getAttribute("viewBox"),h=c.hasValue()?b(c.getString()):null,r=!this.root&&"visible"!==this.getAttribute("overflow").getValue("hidden"),i=0,f=0,a=0,c=0;h&&(i=h[0],f=h[1]),this.root||(o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y"),"marker"===this.type&&(a=i,c=f,f=i=0)),n.viewPort.setCurrent(o,s),h&&(o=h[2],s=h[3]),e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n.viewPort.width,desiredWidth:o,height:n.viewPort.height,desiredHeight:s,minX:i,minY:f,refX:u.getValue(),refY:l.getValue(),clip:r,clipX:a,clipY:c}),h&&(n.viewPort.removeCurrent(),n.viewPort.setCurrent(o,s))}},{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=this.getAttribute("width",!0),i=this.getAttribute("height",!0),a=this.getAttribute("viewBox"),o=this.getAttribute("style"),s=r.getNumber(0),u=i.getNumber(0);n&&("string"==typeof n?this.getAttribute("preserveAspectRatio",!0).setValue(n):(n=this.getAttribute("preserveAspectRatio")).hasValue()&&n.setValue(n.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))),r.setValue(t),i.setValue(e),a.hasValue()||a.setValue("0 0 ".concat(s||t," ").concat(u||e)),o.hasValue()&&(u=this.getStyle("width"),o=this.getStyle("height"),u.hasValue()&&u.setValue("".concat(t,"px")),o.hasValue()&&o.setValue("".concat(e,"px")))}}]),Xs),Bs=(_e(Hs,Zt),Ge(Hs,[{key:"path",value:function(t){var e=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),i=this.getStyle("height").getPixels("y"),a=this.getAttribute("rx"),o=this.getAttribute("ry"),s=a.getPixels("x"),u=o.getPixels("y");return a.hasValue()&&!o.hasValue()&&(u=s),o.hasValue()&&!a.hasValue()&&(s=u),s=P(s,r/2),u=P(u,i/2),t&&(a=(m(2)-1)/3*4,t.beginPath(),0<i&&0<r&&(t.moveTo(e+s,n),t.lineTo(e+r-s,n),t.bezierCurveTo(e+r-s+a*s,n,e+r,n+u-a*u,e+r,n+u),t.lineTo(e+r,n+i-u),t.bezierCurveTo(e+r,n+i-u+a*u,e+r-s+a*s,n+i,e+r-s,n+i),t.lineTo(e+s,n+i),t.bezierCurveTo(e+s-a*s,n+i,e,n+i-u+a*u,e,n+i-u),t.lineTo(e,n+u),t.bezierCurveTo(e,n+u-a*u,e+s-a*s,n,e+s,n),t.closePath())),new vs(e,n,e+r,n+i)}},{key:"getMarkers",value:function(){return null}}]),Hs),Wt=(_e(Ws,Zt),Ge(Ws,[{key:"path",value:function(t){var e=this.getAttribute("cx").getPixels("x"),n=this.getAttribute("cy").getPixels("y"),r=this.getAttribute("r").getPixels();return t&&0<r&&(t.beginPath(),t.arc(e,n,r,0,2*d,!1),t.closePath()),new vs(e-r,n-r,e+r,n+r)}},{key:"getMarkers",value:function(){return null}}]),Ws),e=(_e(qs,Zt),Ge(qs,[{key:"path",value:function(t){var e=(m(2)-1)/3*4,n=this.getAttribute("rx").getPixels("x"),r=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return t&&(t.beginPath(),t.moveTo(i+n,a),t.bezierCurveTo(i+n,a+e*r,i+e*n,a+r,i,a+r),t.bezierCurveTo(i-e*n,a+r,i-n,a+e*r,i-n,a),t.bezierCurveTo(i-n,a-e*r,i-e*n,a-r,i,a-r),t.bezierCurveTo(i+e*n,a-r,i+n,a-e*r,i+n,a),t.closePath()),new vs(i-n,a-r,i+n,a+r)}},{key:"getMarkers",value:function(){return null}}]),qs),ge=(_e(Gs,Zt),Ge(Gs,[{key:"getPoints",value:function(){return[new ro(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new ro(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(t){var e=this.getPoints(),n=Rn(e,2),r=n[0],i=r.x,e=r.y,r=n[1],n=r.x,r=r.y;return t&&(t.beginPath(),t.moveTo(i,e),t.lineTo(n,r)),new vs(i,e,n,r)}},{key:"getMarkers",value:function(){var t=this.getPoints(),e=Rn(t,2),n=e[0],t=e[1],e=n.angleTo(t);return[[n,e],[t,e]]}}]),Gs),va=(_e($s,Zt),Ge($s,[{key:"path",value:function(n){var t=this.points,e=Rn(t,1)[0],r=e.x,e=e.y,i=new vs(r,e);return n&&(n.beginPath(),n.moveTo(r,e)),t.forEach(function(t){var e=t.x,t=t.y;i.addPoint(e,t),n&&n.lineTo(e,t)}),i}},{key:"getMarkers",value:function(){var n=this.points,r=n.length-1,i=[];return n.forEach(function(t,e){e===r||i.push([t,t.angleTo(n[e+1])])}),0<i.length&&i.push([n[n.length-1],i[i.length-1][1]]),i}}]),$s),bn=(_e(_s,va),Ge(_s,[{key:"path",value:function(t){var e=es(wo(_s.prototype),"path",this).call(this,t),n=Rn(this.points,1)[0],r=n.x,n=n.y;return t&&(t.lineTo(r,n),t.closePath()),e}}]),_s),Fs=At.f;function _s(){var t;return Br(this,_s),(t=fo(this,wo(_s).apply(this,arguments))).type="polygon",t}function $s(t,e,n){return Br(this,$s),(n=fo(this,wo($s).call(this,t,e,n))).type="polyline",n.points=[],n.points=ro.parsePath(n.getAttribute("points").getString()),n}function Gs(){var t;return Br(this,Gs),(t=fo(this,wo(Gs).apply(this,arguments))).type="line",t}function qs(){var t;return Br(this,qs),(t=fo(this,wo(qs).apply(this,arguments))).type="ellipse",t}function Ws(){var t;return Br(this,Ws),(t=fo(this,wo(Ws).apply(this,arguments))).type="circle",t}function Hs(){var t;return Br(this,Hs),(t=fo(this,wo(Hs).apply(this,arguments))).type="rect",t}function Xs(){var t;return Br(this,Xs),(t=fo(this,wo(Xs).apply(this,arguments))).type="svg",t.root=!1,t}function Us(t,e,n){return Br(this,Us),(n=fo(this,wo(Us).call(this,t,e,n))).type="path",n.pathParser=null,n.pathParser=new zs(n.getAttribute("d").getString()),n}function Ys(t){Br(this,Ys),this.control=null,this.start=null,this.current=null,this.command="",this.tokens=[],this.i=-1,this.previousCommand="",this.points=[],this.angles=[],this.tokens=w(t.replace(/,/gm," ").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2").replace(/([0-9])([+\-])/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ")).trim().split(" ")}ie({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=Fs(Et(t),e);return(!n||n.configurable)&&delete t[e]}});var Vt=(_e(lu,Qe),Ge(lu,[{key:"createPattern",value:function(t,e,n){var r=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),a=new Ms(this.document,null);a.attributes.viewBox=new to(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new to(this.document,"width","".concat(r,"px")),a.attributes.height=new to(this.document,"height","".concat(i,"px")),a.attributes.transform=new to(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;var o=this.document.createCanvas(r,i),s=o.getContext("2d"),r=this.getAttribute("x"),i=this.getAttribute("y");r.hasValue()&&i.hasValue()&&s.translate(r.getPixels("x",!0),i.getPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:Reflect.deleteProperty(this.styles,"fill-opacity");for(var u=-1;u<=1;u++)for(var l=-1;l<=1;l++)s.save(),a.attributes.x=new to(this.document,"x",u*o.width),a.attributes.y=new to(this.document,"y",l*o.height),a.render(s),s.restore();return t.createPattern(o,"repeat")}}]),lu),ke=(_e(uu,Qe),Ge(uu,[{key:"render",value:function(t,e,n){var r,i,a,o;e&&(r=e.x,i=e.y,a=this.getAttribute("orient").getValue("auto"),o=this.getAttribute("markerUnits").getValue("strokeWidth"),t.translate(r,i),"auto"===a&&t.rotate(n),"strokeWidth"===o&&t.scale(t.lineWidth,t.lineWidth),t.save(),(e=new Ms(this.document,null)).type=this.type,e.attributes.viewBox=new to(this.document,"viewBox",this.getAttribute("viewBox").getValue()),e.attributes.refX=new to(this.document,"refX",this.getAttribute("refX").getValue()),e.attributes.refY=new to(this.document,"refY",this.getAttribute("refY").getValue()),e.attributes.width=new to(this.document,"width",this.getAttribute("markerWidth").getValue()),e.attributes.height=new to(this.document,"height",this.getAttribute("markerHeight").getValue()),e.attributes.overflow=new to(this.document,"overflow",this.getAttribute("overflow").getValue()),e.attributes.fill=new to(this.document,"fill",this.getAttribute("fill").getValue("black")),e.attributes.stroke=new to(this.document,"stroke",this.getAttribute("stroke").getValue("none")),e.children=this.children,e.render(t),t.restore(),"strokeWidth"===o&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===a&&t.rotate(-n),t.translate(-r,-i))}}]),uu),Me=(_e(su,Qe),Ge(su,[{key:"render",value:function(){}}]),su),Qs=(_e(ou,Pi),Ge(ou,[{key:"getBoundingBox",value:function(e){var n=new vs;return this.children.forEach(function(t){n.addBoundingBox(t.getBoundingBox(e))}),n}}]),ou),$e=(_e(au,Qe),Ge(au,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(t,e,n){var r=this,i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var a=i.stops,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(n,a[a.length-1].color);if(a.forEach(function(t){o.addColorStop(t.offset,r.addParentOpacity(n,t.color))}),this.getAttribute("gradientTransform").hasValue()){i=this.document,t=i.screen,e=t.MAX_VIRTUAL_PIXELS,a=t.viewPort,t=Rn(a.viewPorts,1)[0],a=new Bs(i,null);a.attributes.x=new to(i,"x",-e/3),a.attributes.y=new to(i,"y",-e/3),a.attributes.width=new to(i,"width",e),a.attributes.height=new to(i,"height",e);e=new Qs(i,null);e.attributes.transform=new to(i,"transform",this.getAttribute("gradientTransform").getValue()),e.children=[a];a=new Ms(i,null);a.attributes.x=new to(i,"x",0),a.attributes.y=new to(i,"y",0),a.attributes.width=new to(i,"width",t.width),a.attributes.height=new to(i,"height",t.height),a.children=[e];i=i.createCanvas(t.width,t.height),t=i.getContext("2d");return t.fillStyle=o,a.render(t),t.createPattern(i,"no-repeat")}return o}},{key:"inheritStopContainer",value:function(e){var n=this;this.attributesToInherit.forEach(function(t){!n.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&n.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())})}},{key:"addParentOpacity",value:function(t,e){return t.hasValue()?new to(this.document,"color",e).addOpacity(t).getString():e}}]),au),Be=(_e(iu,$e),Ge(iu,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=n?e.getBoundingBox(t):null;if(n&&!r)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var i=n?r.x+r.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=n?r.y+r.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),e=n?r.x+r.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),r=n?r.y+r.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===e&&a===r?null:t.createLinearGradient(i,a,e,r)}}]),iu),Yt=(_e(ru,$e),Ge(ru,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=e.getBoundingBox(t);if(n&&!r)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var i=n?r.x+r.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=n?r.y+r.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=i,e=a;this.getAttribute("fx").hasValue()&&(o=n?r.x+r.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(e=n?r.y+r.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));n=n?(r.width+r.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),r=this.getAttribute("fr").getPixels();return t.createRadialGradient(o,e,r,i,a,n)}}]),ru),Zs=(_e(nu,Qe),nu),Ks="Array Iterator",Js=le.set,tu=le.getterFor(Ks),eu=Ro(Array,"Array",function(t,e){Js(this,{type:Ks,target:et(t),index:0,kind:e})},function(){var t=tu(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");function nu(t,e,n){var r;Br(this,nu),(r=fo(this,wo(nu).call(this,t,e,n))).type="stop";t=S(0,P(1,r.getAttribute("offset").getNumber())),e=r.getStyle("stop-opacity"),n=r.getStyle("stop-color",!0);return""===n.getString()&&n.setValue("#000"),e.hasValue()&&(n=n.addOpacity(e)),r.offset=t,r.color=n.getString(),r}function ru(t,e,n){return Br(this,ru),(n=fo(this,wo(ru).call(this,t,e,n))).type="radialGradient",n.attributesToInherit.push("cx","cy","r","fx","fy","fr"),n}function iu(t,e,n){return Br(this,iu),(n=fo(this,wo(iu).call(this,t,e,n))).type="linearGradient",n.attributesToInherit.push("x1","y1","x2","y2"),n}function au(t,e,n){Br(this,au),(e=fo(this,wo(au).call(this,t,e,n))).attributesToInherit=["gradientUnits"],e.stops=[];var n=bo(e),r=n.stops;return n.children.forEach(function(t){"stop"===t.type&&r.push(t)}),e}function ou(){var t;return Br(this,ou),(t=fo(this,wo(ou).apply(this,arguments))).type="g",t}function su(){var t;return Br(this,su),(t=fo(this,wo(su).apply(this,arguments))).type="defs",t}function uu(){var t;return Br(this,uu),(t=fo(this,wo(uu).apply(this,arguments))).type="marker",t}function lu(){var t;return Br(this,lu),(t=fo(this,wo(lu).apply(this,arguments))).type="pattern",t}ci.Arguments=ci.Array,He("keys"),He("values"),He("entries");var cu,hu=se("iterator"),fu=se("toStringTag"),gu=eu.values;for(cu in zr){var du=at[cu],pu=du&&du.prototype;if(pu){if(pu[hu]!==gu)try{Ot(pu,hu,gu)}catch(t){pu[hu]=gu}if(pu[fu]||Ot(pu,fu,cu),zr[cu])for(var yu in eu)if(pu[yu]!==eu[yu])try{Ot(pu,yu,eu[yu])}catch(t){pu[yu]=eu[yu]}}}var vu=(_e(wu,Qe),Ge(wu,[{key:"getProperty",value:function(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}},{key:"calcValue",value:function(){var t=this.initialUnits,e=this.getProgress(),n=e.progress,r=e.from,e=e.to,n=r.getNumber()+(e.getNumber()-r.getNumber())*n;return"%"===t&&(n*=100),"".concat(n).concat(t)}},{key:"update",value:function(t){var e=this.parent,n=this.getProperty();if(this.initialValue||(this.initialValue=n.getString(),this.initialUnits=n.getUnits()),this.duration>this.maxDuration){var r=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==r||this.frozen){if("remove"===r&&!this.removed)return this.removed=!0,n.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=n.getString();return!1}this.duration+=t;r=!1;return this.begin<this.duration&&(e=this.calcValue(),(t=this.getAttribute("type")).hasValue()&&(t=t.getString(),e="".concat(t,"(").concat(e,")")),n.setValue(e),r=!0),r}},{key:"getProgress",value:function(){var t,e,n,r=this.document,i=this.values,a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};return i.hasValue()?(t=a.progress*(i.getValue().length-1),e=A(t),n=o(t),a.from=new to(r,"from",parseFloat(i.getValue()[e])),a.to=new to(r,"to",parseFloat(i.getValue()[n])),a.progress=(t-e)/(n-e)):(a.from=this.from,a.to=this.to),a}}]),wu),mu=tn.trim,xu=at.parseInt,bu=/^[+-]?0[Xx]/,Xr=8!==xu("\t\n\v\f\r                　\u2028\u2029\ufeff08")||22!==xu("\t\n\v\f\r                　\u2028\u2029\ufeff0x16")?function(t,e){t=mu(t+"");return xu(t,e>>>0||(bu.test(t)?16:10))}:xu;function wu(t,e,n){return Br(this,wu),(n=fo(this,wo(wu).call(this,t,e,n))).type="animate",n.duration=0,n.initialValue=null,n.initialUnits="",n.removed=!1,n.frozen=!1,t.screen.animations.push(bo(n)),n.begin=n.getAttribute("begin").getMilliseconds(),n.maxDuration=n.begin+n.getAttribute("dur").getMilliseconds(),n.from=n.getAttribute("from"),n.to=n.getAttribute("to"),n.values=n.getAttribute("values"),n.values.hasValue()&&n.values.setValue(n.values.getString().split(";")),n}ie({global:!0,forced:parseInt!=Xr},{parseInt:Xr});var ku,Su,Pu,Au,Eu,Cu=(_e(Vu,vu),Ge(Vu,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,n=t.from,r=t.to,i=new Ja(n.getString()),t=new Ja(r.getString());if(i.ok&&t.ok){n=i.r+(t.r-i.r)*e,r=i.g+(t.g-i.g)*e,e=i.b+(t.b-i.b)*e;return"rgb(".concat(parseInt(n,10),", ").concat(parseInt(r,10),", ").concat(parseInt(e,10),")")}return this.getAttribute("from").getString()}}]),Vu),Ue=(_e(Ou,vu),Ge(Ou,[{key:"calcValue",value:function(){var t=this.getProgress(),n=t.progress,e=t.from,t=t.to,e=b(e.getString()),r=b(t.getString());return e.map(function(t,e){return t+(r[e]-t)*n}).join(" ")}}]),Ou),Ye=Tt.f,Tu=at.Symbol;function Ou(){var t;return Br(this,Ou),(t=fo(this,wo(Ou).apply(this,arguments))).type="animateTransform",t}function Vu(){var t;return Br(this,Vu),(t=fo(this,wo(Vu).apply(this,arguments))).type="animateColor",t}!ot||"function"!=typeof Tu||"description"in Tu.prototype&&void 0===Tu().description||(ku={},re(Su=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:arguments[0]+"",e=this instanceof Su?new Tu(t):void 0===t?Tu():Tu(t);return""===t&&(ku[e]=!0),e},Tu),(Uu=Su.prototype=Tu.prototype).constructor=Su,Pu=Uu.toString,Au="Symbol(test)"==Tu("test")+"",Eu=/^Symbol\((.*)\)[^)]+$/,Ye(Uu,"description",{configurable:!0,get:function(){var t=yt(this)?this.valueOf():this,e=Pu.call(t);if(xt(ku,t))return"";e=Au?e.slice(7,-1):e.replace(Eu,"$1");return""===e?void 0:e}}),ie({global:!0,forced:!0},{Symbol:Su})),Qn("iterator");var Lu,Nu,Ru,Iu,ju,Du,zu,Mu,Bu,Fu,_u,kn=(_e(ol,Qe),Ge(ol,[{key:"render",value:function(){}}]),ol),de=(_e(al,Qe),al),Cn=(_e(il,Zt),il),Je=(_e(rl,Zt),rl),rn=(_e(nl,Ne),Ge(nl,[{key:"getText",value:function(){var t=this.getHrefAttribute().getDefinition();if(t){t=t.children[0];if(t)return t.getText()}return""}}]),nl),mi=(_e(el,Ne),Ge(el,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(t){var e,n,r,i;this.hasText?(es(wo(el.prototype),"renderChildren",this).call(this,t),r=this.document,e=this.x,i=this.y,n=r.screen.mouse,r=new to(r,"fontSize",ns.parse(r.ctx.font).fontSize),n.isWorking()&&n.checkBoundingBox(this,new vs(e,i-r.getPixels("y"),e+this.measureText(t),i))):0<this.children.length&&((i=new Qs(this.document,null)).children=this.children,i.parent=this,i.render(t))}},{key:"onClick",value:function(){var t=this.document.window;t&&t.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){this.document.ctx.canvas.style.cursor="pointer"}}]),el),$u=!tt(function(){return Object.isExtensible(Object.preventExtensions({}))}),wn=i(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=Tt.f,r=Rt("meta"),i=0,a=Object.isExtensible||function(){return!0},o=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!yt(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!xt(t,r)){if(!a(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!xt(t,r)){if(!a(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return $u&&o.REQUIRED&&a(t)&&!xt(t,r)&&n(t),t}};Qt[r]=!0}),Gu=(wn.REQUIRED,wn.fastKey,wn.getWeakData,wn.onFreeze,Tt.f),qu=wn.fastKey,Wu=le.set,Hu=le.getterFor,tn=(bs=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Fe={getConstructor:function(t,n,r,i){function a(t,e,n){var r,i=u(t),a=o(t,e);return a?a.value=n:(i.last=a={index:r=qu(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),ot?i.size++:t.size++,"F"!==r&&(i.index[r]=a)),t}function o(t,e){var n,r=u(t);if("F"!==(t=qu(e)))return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n}var s=t(function(t,e){ai(t,s,n),Wu(t,{type:n,index:nr(null),first:void 0,last:void 0,size:0}),ot||(t.size=0),null!=e&&di(e,t[i],t,r)}),u=Hu(n);return ri(s.prototype,{clear:function(){for(var t=u(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,ot?t.size=0:this.size=0},delete:function(t){var e,n=u(this),r=o(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),ot?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=u(this),r=ae(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!o(this,t)}}),ri(s.prototype,r?{get:function(t){t=o(this,t);return t&&t.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),ot&&Gu(s.prototype,"size",{get:function(){return u(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=Hu(e),a=Hu(r);Ro(t,e,function(t,e){Wu(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=a(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),ii(e)}},Du=-1!==(Iu="Map").indexOf("Map"),zu=-1!==Iu.indexOf("Weak"),Mu=Du?"set":"add",Bu=at.Map,Fu=Bu&&Bu.prototype,He={},Ce(Iu,"function"!=typeof(_u=Bu)||!(zu||Fu.forEach&&!tt(function(){(new Bu).entries().next()})))?(_u=Fe.getConstructor(bs,Iu,Du,Mu),wn.REQUIRED=!0):Ce(Iu,!0)&&(vl=(ju=new _u)[Mu](zu?{}:-0,1)!=ju,pl=tt(function(){ju.has(1)}),cl=ki(function(t){new Bu(t)}),yl=!zu&&tt(function(){for(var t=new Bu,e=5;e--;)t[Mu](e,e);return!t.has(-0)}),cl||(((_u=bs(function(t,e){ai(t,_u,Iu);t=is(new Bu,t,_u);return null!=e&&di(e,t[Mu],t,Du),t})).prototype=Fu).constructor=_u),(pl||yl)&&(tl("delete"),tl("has"),Du&&tl("get")),(yl||vl)&&tl(Mu),zu&&Fu.clear&&delete Fu.clear),He.Map=_u,ie({global:!0,forced:_u!=Bu},He),cr(_u,Iu),zu||Fe.setStrong(_u,Iu,Du),_e(Ju,Ne),Ge(Ju,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(g){var t=this.dataArray;g&&g.beginPath(),t.forEach(function(t){var e=t.command,n=t.points;switch(e){case"L":g&&g.lineTo(n[0],n[1]);break;case"M":g&&g.moveTo(n[0],n[1]);break;case"C":g&&g.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case"Q":g&&g.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case"A":var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=o<a?a:o,f=o<a?1:a/o,a=o<a?o/a:1;g&&(g.translate(r,i),g.rotate(l),g.scale(f,a),g.arc(0,0,h,s,s+u,!!(1-c)),g.scale(1/f,1/a),g.rotate(-l),g.translate(-r,-i));break;case"z":g&&g.closePath()}})}},{key:"renderChildren",value:function(i){this.setTextData(i),i.save();var a=this.parent.getStyle("text-decoration").getString(),o=this.getFontSize(),s=this.glyphInfo,t=i.fillStyle;"underline"===a&&i.beginPath(),s.forEach(function(t,e){var n=t.p0,r=t.p1,t=t.text;i.save(),i.translate(n.x,n.y),i.rotate(s[e].rotation),i.fillStyle&&i.fillText(t,0,0),i.strokeStyle&&i.strokeText(t,0,0),i.restore(),"underline"===a&&(0===e&&i.moveTo(n.x,n.y+o/8),i.lineTo(r.x,r.y+o/5))}),"underline"===a&&(i.lineWidth=o/20,i.strokeStyle=t,i.stroke(),i.closePath()),i.restore()}},{key:"getLetterSpacingAt",value:function(){return this.letterSpacingCache[0<arguments.length&&void 0!==arguments[0]?arguments[0]:0]||0}},{key:"findSegmentToFitChar",value:function(t,e,n,r,i,a,o,s){t=this.measureText(t,o);" "===o&&"justify"===e&&n<r&&(t+=(r-n)/i),-1<s&&(a+=this.getLetterSpacingAt(s));s=this.textHeight/20,s={p0:this.getEquidistantPointOnPath(a,s),p1:this.getEquidistantPointOnPath(a+t,s)};return{offset:a+=t,segment:s}}},{key:"measureText",value:function(t,e){var n=this.measuresCache,e=e||this.getText();if(n.has(e))return n.get(e);t=this.measureTargetText(t,e);return n.set(e,t),t}},{key:"setTextData",value:function(i){var a=this;if(!this.glyphInfo){var t=this.getText(),o=t.split(""),s=t.split(" ").length-1,e=b(this.parent.getAttribute("dx").getString("0")),u=this.parent.getStyle("text-anchor").getString("start"),n=this.getStyle("letter-spacing"),r=this.parent.getStyle("letter-spacing"),l=0;n.hasValue()&&"inherit"!==n.getValue()?n.hasValue()&&"initial"!==n.getValue()&&"unset"!==n.getValue()&&(l=n.getPixels()):l=r.getPixels();var c=[],h=t.length;this.letterSpacingCache=c;for(var f=0;f<h;f++)c.push(void 0===e[f]?l:e[f]);t=c.reduce(function(t,e){return t+e||0},0);this.textWidth=this.measureText(i),this.textHeight=this.getFontSize();var g=S(this.textWidth+t,0);this.glyphInfo=[];var d=this.getPathLength(),t=this.getStyle("startOffset").getNumber(0)*d,p="end"!==u&&"right"!==u?"middle"!==u&&"center"!==u?0:-g/2:-g;p+=t,o.forEach(function(t,e){var n=a.findSegmentToFitChar(i,u,g,d,s,p,t,e),r=n.offset,t=n.segment;p=r,t.p0&&t.p1&&(n=a.getLineLength(t.p0.x,t.p0.y,t.p1.x,t.p1.y),r=a.getPointOnLine(0+n/2,t.p0.x,t.p0.y,t.p1.x,t.p1.y),n=y(t.p1.y-t.p0.y,t.p1.x-t.p0.x),a.glyphInfo.push({transposeX:r.x,transposeY:r.y,text:o[e],p0:t.p0,p1:t.p1,rotation:n}))})}}},{key:"parsePathData",value:function(t){if(this.pathLength=-1,!t)return[];var e=[],n=t.pathParser;for(n.reset();!n.isEnd();){var r=n.current,i=r?r.x:0,a=r?r.y:0,o="",s=[];n.nextCommand();r=n.command.toUpperCase();switch(n.command){case"M":case"m":o=this.pathM(n,s);break;case"L":case"l":o=this.pathL(n,s);break;case"H":case"h":o=this.pathH(n,s);break;case"V":case"v":o=this.pathV(n,s);break;case"C":case"c":this.pathC(n,s);break;case"S":case"s":o=this.pathS(n,s);break;case"Q":case"q":this.pathQ(n,s);break;case"T":case"t":o=this.pathT(n,s);break;case"A":case"a":s=this.pathA(n);break;case"Z":case"z":n.current=n.start}"Z"===r?e.push({command:"z",points:[],pathLength:0}):e.push({command:o||r,points:s,start:{x:i,y:a},pathLength:this.calcLength(i,a,o||r,s)})}return e}},{key:"pathM",value:function(t,e){var n=t.getAsCurrentPoint();for(e.push(n.x,n.y),t.start=t.current;!t.isCommandOrEnd();){var r=t.getAsCurrentPoint();return e.push(r.x,r.y),"L"}}},{key:"pathL",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getAsCurrentPoint();e.push(n.x,n.y)}return"L"}},{key:"pathH",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.current,n=new ro((t.isRelativeCommand()?n.x:0)+t.getScalar(),n.y);e.push(n.x,n.y),t.current=n}return"L"}},{key:"pathV",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.current,n=new ro(n.x,(t.isRelativeCommand()?n.y:0)+t.getScalar());e.push(n.x,n.y),t.current=n}return"L"}},{key:"pathC",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}}},{key:"pathS",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getReflectedControlPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}return"C"}},{key:"pathQ",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getAsControlPoint(),r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}}},{key:"pathT",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getReflectedControlPoint();t.control=n;var r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}return"Q"}},{key:"pathA",value:function(t){for(;!t.isCommandOrEnd();){var e=t.current,n=t.getScalar(),r=t.getScalar(),i=t.getScalar()*(d/180),a=t.getScalar(),o=t.getScalar(),s=t.getAsCurrentPoint(),u=new ro(v(i)*(e.x-s.x)/2+p(i)*(e.y-s.y)/2,-p(i)*(e.x-s.x)/2+v(i)*(e.y-s.y)/2),l=x(u.x,2)/x(n,2)+x(u.y,2)/x(r,2);1<l&&(n*=m(l),r*=m(l));l=(a===o?-1:1)*m((x(n,2)*x(r,2)-x(n,2)*x(u.y,2)-x(r,2)*x(u.x,2))/(x(n,2)*x(u.y,2)+x(r,2)*x(u.x,2)));isNaN(l)&&(l=0);a=new ro(l*n*u.y/r,l*-r*u.x/n),l=new ro((e.x+s.x)/2+v(i)*a.x-p(i)*a.y,(e.y+s.y)/2+p(i)*a.x+v(i)*a.y),e=E([1,0],[(u.x-a.x)/n,(u.y-a.y)/r]),s=[(u.x-a.x)/n,(u.y-a.y)/r],u=[(-u.x-a.x)/n,(-u.y-a.y)/r],a=E(s,u);return k(s,u)<=-1&&(a=d),1<=k(s,u)&&(a=0),0===o&&0<a&&(a-=2*d),1===o&&a<0&&(a+=2*d),[l.x,l.y,n,r,e,a,i,o]}}},{key:"calcLength",value:function(t,e,n,r){var i=Math.abs,a=0,o=null,s=null,u=0;switch(n){case"L":return this.getLineLength(t,e,r[0],r[1]);case"C":for(o=this.getPointOnCubicBezier(a=0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),u=.01;u<=1;u+=.01)s=this.getPointOnCubicBezier(u,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"Q":for(o=this.getPointOnQuadraticBezier(a=0,t,e,r[0],r[1],r[2],r[3]),u=.01;u<=1;u+=.01)s=this.getPointOnQuadraticBezier(u,t,e,r[0],r[1],r[2],r[3]),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"A":var a=0,l=r[4],c=r[5],h=r[4]+c,f=d/180;if(i(l-h)<f&&(f=i(l-h)),o=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),c<0)for(u=l-f;h<u;u-=f)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(u=l+f;u<h;u+=f)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),a+=this.getLineLength(o.x,o.y,s.x,s.y)}return 0}},{key:"getPointOnLine",value:function(t,e,n,r,i){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:e,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:n,s=(i-n)/(r-e+_n),u=m(t*t/(1+s*s));r<e&&(u*=-1);var l=s*u,c=null;if(r===e)c={x:a,y:o+l};else if((o-n)/(a-e+_n)==s)c={x:a+u,y:o+l};else{var h=0,f=0,g=this.getLineLength(e,n,r,i);if(g<_n)return null;var d=(a-e)*(r-e)+(o-n)*(i-n),n=this.getLineLength(a,o,h=e+(d/=g*g)*(r-e),f=n+d*(i-n)),n=m(t*t-n*n),u=m(n*n/(1+s*s));r<e&&(u*=-1),c={x:h+u,y:f+(l=s*u)}}return c}},{key:"getPointOnPath",value:function(t){var e=this.getPathLength(),n=0,r=null;if(t<-5e-5||e<t-5e-5)return null;var i=this.dataArray,a=!0,o=!1,e=void 0;try{for(var s,u,l=i[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){if(!(u=s.value)||!(u.pathLength<5e-5||n+u.pathLength+5e-5<t)){var c=t-n,h=0;switch(u.command){case"L":r=this.getPointOnLine(c,u.start.x,u.start.y,u.points[0],u.points[1],u.start.x,u.start.y);break;case"A":var f=u.points[4],g=u.points[5],d=u.points[4]+g,h=f+c/u.pathLength*g;if(g<0&&h<d||0<=g&&d<h)break;r=this.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],h,u.points[6]);break;case"C":1<(h=c/u.pathLength)&&(h=1),r=this.getPointOnCubicBezier(h,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);break;case"Q":1<(h=c/u.pathLength)&&(h=1),r=this.getPointOnQuadraticBezier(h,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3])}if(r)return r;break}n+=u.pathLength}}catch(t){o=!0,e=t}finally{try{a||null==l.return||l.return()}finally{if(o)throw e}}return null}},{key:"getLineLength",value:function(t,e,n,r){return m((n-t)*(n-t)+(r-e)*(r-e))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(function(t,e){return 0<e.pathLength?t+e.pathLength:t},0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(t,e,n,r,i,a,o,s,u){return{x:s*C(t)+a*T(t)+r*O(t)+e*V(t),y:u*C(t)+o*T(t)+i*O(t)+n*V(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,n,r,i,a,o){return{x:a*L(t)+r*N(t)+e*R(t),y:o*L(t)+i*N(t)+n*R(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,n,r,i,a){var o=v(a),a=p(a),n=n*v(i),i=r*p(i);return{x:t+(n*o-i*a),y:e+(n*a+i*o)}}},{key:"buildEquidistantCache",value:function(t,e){var n=this.getPathLength(),r=e||.25,i=t||n/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==r){this.equidistantCache={step:i,precision:r,points:[]};for(var a=0,o=0;o<=n;o+=r){var s=this.getPointOnPath(o),u=this.getPointOnPath(o+r);s&&u&&(i<=(a+=this.getLineLength(s.x,s.y,u.x,u.y))&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:o}),a-=i))}}}},{key:"getEquidistantPointOnPath",value:function(t,e,n){if(this.buildEquidistantCache(e,n),t<0||5e-5<t-this.getPathLength())return null;t=r(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[t]||null}}]),Ju),Xr=(_e(Ku,Pi),Ge(Ku,[{key:"loadImage",value:(Ru=_r(Fr.mark(function t(e){var n;return Fr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.createImage(e);case 3:n=t.sent,this.image=n,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error('ERROR: image "'.concat(e,'" not found'),t.t0);case 10:this.loaded=!0;case 11:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return Ru.apply(this,arguments)})},{key:"loadSvg",value:(Nu=_r(Fr.mark(function t(e){var n;return Fr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:n=t.sent,this.image=n,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error('ERROR: image "'.concat(e,'" not found'),t.t0);case 13:this.loaded=!0;case 14:case"end":return t.stop()}},t,this,[[0,10]])})),function(){return Nu.apply(this,arguments)})},{key:"renderChildren",value:function(t){var e=this.document,n=this.image,r=this.loaded,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");r&&n&&o&&s&&(t.save(),this.isSvg?e.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:i,offsetY:a,scaleWidth:o,scaleHeight:s}).render():(n=this.image,t.translate(i,a),e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:n.width,height:s,desiredHeight:n.height}),this.loaded&&(void 0===n.complete||n.complete)&&t.drawImage(n,0,0)),t.restore())}},{key:"getBoundingBox",value:function(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getStyle("width").getPixels("x"),r=this.getStyle("height").getPixels("y");return new vs(t,e,t+n,e+r)}}]),Ku),Ye=(_e(Zu,Pi),Ge(Zu,[{key:"render",value:function(){}}]),Zu),Xu=(Ge(Qu,[{key:"load",value:(Lu=_r(Fr.mark(function t(e,n){var r,i;return Fr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this.document,t.next=4,r.canvg.parser.load(n);case 4:i=t.sent,i=i.getElementsByTagName("font"),Array.from(i).forEach(function(t){t=r.createElement(t);r.definitions[e]=t}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error('ERROR: font "'.concat(n,'" not found'),t.t0);case 12:this.loaded=!0;case 13:case"end":return t.stop()}},t,this,[[0,9]])})),function(){return Lu.apply(this,arguments)})}]),Qu),Uu=(_e(Yu,Qe),Yu);function Yu(i,t,e){return Br(this,Yu),(e=fo(this,wo(Yu).call(this,i,t,e))).type="style",w(Array.from(t.childNodes).map(function(t){return t.data}).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"")).split("}").forEach(function(t){var n,e=t.trim();e&&(e=(t=e.split("{"))[0].split(","),n=t[1].split(";"),e.forEach(function(t){var r,e,t=t.trim();t&&(r=i.styles[t]||{},n.forEach(function(t){var e=t.indexOf(":"),n=t.substr(0,e).trim(),e=t.substr(e+1,t.length-e).trim();n&&e&&(r[n]=new to(i,n,e))}),i.styles[t]=r,i.stylesSpecificity[t]=f(t),"@font-face"===t&&(e=r["font-family"].getString().replace(/"|'/g,""),r.src.getString().split(",").forEach(function(t){0<t.indexOf('format("svg")')&&((t=c(t))&&new Xu(i).load(e,t))})))}))}),e}function Qu(t){Br(this,Qu),this.document=t,this.loaded=!1,t.fonts.push(this)}function Zu(){var t;return Br(this,Zu),(t=fo(this,wo(Zu).apply(this,arguments))).type="symbol",t}function Ku(t,e,n){var r;Br(this,Ku),(r=fo(this,wo(Ku).call(this,t,e,n))).type="image",r.loaded=!1;e=r.getHrefAttribute().getString();if(!e)return fo(r);n=/\.svg$/.test(e);return t.images.push(bo(r)),n?r.loadSvg(e):r.loadImage(e),r.isSvg=n,r}function Ju(t,e,n){Br(this,Ju),(e=fo(this,wo(Ju).call(this,t,e,n))).type="textPath",e.textWidth=0,e.textHeight=0,e.pathLength=-1,e.glyphInfo=null,e.letterSpacingCache=[],e.measuresCache=new Map([["",0]]);n=e.getHrefAttribute().getDefinition();return e.text=e.getTextFromNode(),e.dataArray=e.parsePathData(n),e}function tl(t){var n=Fu[t];ce(Fu,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return(!zu||yt(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return zu&&!yt(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return(!zu||yt(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}function el(t,e,n){Br(this,el),(t=fo(this,wo(el).call(this,t,e,n))).type="a";n=e.childNodes,e=n[0],n=0<n.length&&Array.from(n).every(function(t){return 3===t.nodeType});return t.hasText=n,t.text=n?t.getTextFromNode(e):"",t}function nl(){var t;return Br(this,nl),(t=fo(this,wo(nl).apply(this,arguments))).type="tref",t}function rl(t,e,n){return Br(this,rl),(n=fo(this,wo(rl).call(this,t,e,n))).type="glyph",n.horizAdvX=n.getAttribute("horiz-adv-x").getNumber(),n.unicode=n.getAttribute("unicode").getString(),n.arabicForm=n.getAttribute("arabic-form").getString(),n}function il(){var t;return Br(this,il),(t=fo(this,wo(il).apply(this,arguments))).type="missing-glyph",t.horizAdvX=0,t}function al(t,e,n){return Br(this,al),(n=fo(this,wo(al).call(this,t,e,n))).type="font-face",n.ascent=n.getAttribute("ascent").getNumber(),n.descent=n.getAttribute("descent").getNumber(),n.unitsPerEm=n.getAttribute("units-per-em").getNumber(),n}function ol(t,e,n){var r;Br(this,ol),(r=fo(this,wo(ol).call(this,t,e,n))).type="font",r.glyphs={},r.horizAdvX=r.getAttribute("horiz-adv-x").getNumber();var i=t.definitions,a=bo(r).children,o=!0,e=!1,n=void 0;try{for(var s,u,l=a[Symbol.iterator]();!(o=(s=l.next()).done);o=!0)switch(u=s.value,u.type){case"font-face":var c=(r.fontFace=u).getStyle("font-family");c.hasValue()&&(i[c.getString()]=bo(r));break;case"missing-glyph":r.missingGlyph=u;break;case"glyph":var h=u;h.arabicForm?(r.isRTL=!0,r.isArabic=!0,void 0===r.glyphs[h.unicode]&&(r.glyphs[h.unicode]={}),r.glyphs[h.unicode][h.arabicForm]=h):r.glyphs[h.unicode]=h}}catch(t){e=!0,n=t}finally{try{o||null==l.return||l.return()}finally{if(e)throw n}}return r}Uu.parseExternalUrl=c;var wn=(_e(gl,Pi),Ge(gl,[{key:"setContext",value:function(t){es(wo(gl.prototype),"setContext",this).call(this,t);var e=this.getAttribute("x"),n=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),n.hasValue()&&t.translate(0,n.getPixels("y"))}},{key:"path",value:function(t){var e=this.element;e&&e.path(t)}},{key:"renderChildren",value:function(t){var e,n,r=this.document,i=this.element;i&&("symbol"===(e=i).type&&((e=new Ms(r,null)).attributes.viewBox=new to(r,"viewBox",i.getAttribute("viewBox").getString()),e.attributes.preserveAspectRatio=new to(r,"preserveAspectRatio",i.getAttribute("preserveAspectRatio").getString()),e.attributes.overflow=new to(r,"overflow",i.getAttribute("overflow").getString()),e.children=i.children),"svg"===e.type&&(i=this.getStyle("width",!1,!0),n=this.getStyle("height",!1,!0),i.hasValue()&&(e.attributes.width=new to(r,"width",i.getString())),n.hasValue()&&(e.attributes.height=new to(r,"height",n.getString()))),n=e.parent,e.parent=null,e.render(t),e.parent=n)}},{key:"getBoundingBox",value:function(t){var e=this.element;return e?e.getBoundingBox(t):null}},{key:"elementTransform",value:function(){var t=this.document,e=this.element;return Ss.fromElement(t,e)}},{key:"element",get:function(){return this._element||(this._element=this.getHrefAttribute().getDefinition()),this._element}}]),gl),sl=(_e(fl,Qe),Ge(fl,[{key:"apply",value:function(t,e,n,r,i){for(var a=this.includeOpacity,o=this.matrix,s=t.getImageData(0,0,r,i),u=0;u<i;u++)for(var l=0;l<r;l++){var c=q(s.data,l,u,r,0,0),h=q(s.data,l,u,r,0,1),f=q(s.data,l,u,r,0,2),g=q(s.data,l,u,r,0,3),d=H(o,0,c)+H(o,1,h)+H(o,2,f)+H(o,3,g)+H(o,4,1),p=H(o,5,c)+H(o,6,h)+H(o,7,f)+H(o,8,g)+H(o,9,1),y=H(o,10,c)+H(o,11,h)+H(o,12,f)+H(o,13,g)+H(o,14,1),f=H(o,15,c)+H(o,16,h)+H(o,17,f)+H(o,18,g)+H(o,19,1);a&&(d=p=y=0,f*=g/255),W(s.data,l,u,r,0,0,d),W(s.data,l,u,r,0,1,p),W(s.data,l,u,r,0,2,y),W(s.data,l,u,r,0,3,f)}t.clearRect(0,0,r,i),t.putImageData(s,0,0)}}]),fl),ki=(_e(hl,Qe),Ge(hl,[{key:"apply",value:function(e,t){var n,r=this.document,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");o||s||(n=new vs,this.children.forEach(function(t){n.addBoundingBox(t.getBoundingBox(e))}),i=A(n.x1),a=A(n.y1),o=A(n.width),s=A(n.height));var u=t.getStyle("mask").getString();t.getStyle("mask").setValue("");var l=r.createCanvas(i+o,a+s),c=l.getContext("2d");r.screen.setDefaults(c),this.renderChildren(c),new sl(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(c,0,0,i+o,a+s);var h=r.createCanvas(i+o,a+s),f=h.getContext("2d");r.screen.setDefaults(f),t.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=c.createPattern(l,"no-repeat"),f.fillRect(0,0,i+o,a+s),e.fillStyle=f.createPattern(h,"no-repeat"),e.fillRect(0,0,i+o,a+s),t.getStyle("mask").setValue(u)}},{key:"render",value:function(){}}]),hl),ul=Jt("Reflect","apply"),ll=Function.apply,cl=!tt(function(){ul(function(){})});function hl(){var t;return Br(this,hl),(t=fo(this,wo(hl).apply(this,arguments))).type="mask",t}function fl(t,e,n){Br(this,fl),(n=fo(this,wo(fl).call(this,t,e,n))).type="feColorMatrix";var r=b(n.getAttribute("values").getString());switch(n.getAttribute("type").getString("matrix")){case"saturate":var i=r[0],r=[.213+.787*i,.715-.715*i,.072-.072*i,0,0,.213-.213*i,.715+.285*i,.072-.072*i,0,0,.213-.213*i,.715-.715*i,.072+.928*i,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":i=r[0]*d/180;r=[X(i,.213,.787,-.213),X(i,.715,-.715,-.715),X(i,.072,-.072,.928),0,0,X(i,.213,-.213,.143),X(i,.715,.285,.14),X(i,.072,-.072,-.283),0,0,X(i,.213,-.213,-.787),X(i,.715,-.715,.715),X(i,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}return n.matrix=r,n.includeOpacity=n.getAttribute("includeOpacity").hasValue(),n}function gl(){var t;return Br(this,gl),(t=fo(this,wo(gl).apply(this,arguments))).type="use",t}ie({target:"Reflect",stat:!0,forced:cl},{apply:function(t,e,n){return Oe(t),Et(n),ul?ul(t,e,n):ll.call(t,e,n)}}),ie({target:"Reflect",stat:!0,sham:!Hr},{getPrototypeOf:function(t){return Lo(Et(t))}});function dl(){}var bs=(_e(Vl,Qe),Ge(Vl,[{key:"apply",value:function(n){var r=this.document,i=Reflect.getPrototypeOf(n),t=n.beginPath,a=n.closePath;i&&(i.beginPath=dl,i.closePath=dl),Reflect.apply(t,n,[]),this.children.forEach(function(t){var e;void 0!==t.path&&((e=(e=void 0===t.elementTransform?null:t.elementTransform())||Ss.fromElement(r,t))&&e.apply(n),t.path(n),i&&(i.closePath=a),e&&e.unapply(n))}),Reflect.apply(a,n,[]),n.clip(),i&&(i.beginPath=t,i.closePath=a)}},{key:"render",value:function(){}}]),Vl),pl=(_e(Ol,Qe),Ge(Ol,[{key:"apply",value:function(t,e){var n,r,i,a,o,s,u,l,c=this.document,h=e.getBoundingBox(t);h&&(n=A(h.x1),r=A(h.y1),i=A(h.width),a=A(h.height),o=e.getStyle("filter").getString(),e.getStyle("filter").setValue(""),u=s=0,this.children.forEach(function(t){t=t.extraFilterDistance||0;s=S(s,t),u=S(u,t)}),h=c.createCanvas(i+2*s,a+2*u),l=h.getContext("2d"),c.screen.setDefaults(l),l.translate(-n+s,-r+u),e.render(l),this.children.forEach(function(t){"function"==typeof t.apply&&t.apply(l,0,0,i+2*s,a+2*u)}),t.drawImage(h,0,0,i+2*s,a+2*u,n-s,r-u,i+2*s,a+2*u),e.getStyle("filter",!0).setValue(o))}},{key:"render",value:function(){}}]),Ol),yl=(_e(Tl,Qe),Ge(Tl,[{key:"apply",value:function(){}}]),Tl),vl=(_e(Cl,Qe),Ge(Cl,[{key:"apply",value:function(){}}]),Cl),He=(_e(El,Qe),Ge(El,[{key:"apply",value:function(){}}]),El),ml=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],xl=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],bl=function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},Fe=(_e(Al,Qe),Ge(Al,[{key:"apply",value:function(t,e,n,r,i){var a=this.document,o=this.blurRadius,s=a.window?a.window.document.body:null,t=t.canvas;t.id=a.getUniqueId(),s&&(t.style.display="none",s.appendChild(t)),Y(t,e,n,r,i,o),s&&s.removeChild(t)}}]),Al),cl=(_e(Pl,Qe),Pl),Hr=(_e(Sl,Qe),Sl),wl=(Ge(kl,[{key:"bindCreateImage",value:function(n,r){return"boolean"==typeof r?function(t,e){return n(t,"boolean"==typeof e?e:r)}:n}},{key:"popEmSize",value:function(){this.emSizeStack.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every(function(t){return t.loaded})}},{key:"isFontsLoaded",value:function(){return this.fonts.every(function(t){return t.loaded})}},{key:"createDocumentElement",value:function(t){t=this.createElement(t.documentElement);return t.root=!0,t.addStylesFromStyleDefinition(),this.documentElement=t}},{key:"createElement",value:function(t){var e=t.nodeName.replace(/^[^:]+:/,""),e=kl.elementTypes[e];return new(void 0===e?Yo:e)(this,t)}},{key:"createTextNode",value:function(t){return new Ns(this,t)}},{key:"setViewBox",value:function(t){this.screen.setViewBox(function(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?Q(Object(n),!0).forEach(function(t){$r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}({document:this},t))}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var t=this.emSizeStack;return t[t.length-1]},set:function(t){this.emSizeStack.push(t)}}]),kl);function kl(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.rootEmSize,r=void 0===n?12:n,i=e.emSize,a=void 0===i?12:i,n=e.createCanvas,i=void 0===n?kl.createCanvas:n,n=e.createImage,n=void 0===n?kl.createImage:n,e=e.anonymousCrossOrigin;Br(this,kl),this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=r,this.emSize=a,this.createCanvas=i,this.createImage=this.bindCreateImage(n,e),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}function Sl(){var t;return Br(this,Sl),(t=fo(this,wo(Sl).apply(this,arguments))).type="desc",t}function Pl(){var t;return Br(this,Pl),(t=fo(this,wo(Pl).apply(this,arguments))).type="title",t}function Al(t,e,n){return Br(this,Al),(n=fo(this,wo(Al).call(this,t,e,n))).type="feGaussianBlur",n.blurRadius=A(n.getAttribute("stdDeviation").getNumber()),n.extraFilterDistance=n.blurRadius,n}function El(){var t;return Br(this,El),(t=fo(this,wo(El).apply(this,arguments))).type="feComposite",t}function Cl(){var t;return Br(this,Cl),(t=fo(this,wo(Cl).apply(this,arguments))).type="feMorphology",t}function Tl(t,e,n){return Br(this,Tl),(n=fo(this,wo(Tl).call(this,t,e,n))).type="feDropShadow",n.addStylesFromStyleDefinition(),n}function Ol(){var t;return Br(this,Ol),(t=fo(this,wo(Ol).apply(this,arguments))).type="filter",t}function Vl(){var t;return Br(this,Vl),(t=fo(this,wo(Vl).apply(this,arguments))).type="clipPath",t}wl.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},wl.createImage=function(){return Z.apply(this,arguments)},wl.elementTypes={svg:Ms,rect:Bs,circle:Wt,ellipse:e,line:ge,polyline:va,polygon:bn,path:Zt,pattern:Vt,marker:ke,defs:Me,linearGradient:Be,radialGradient:Yt,stop:Zs,animate:vu,animateColor:Cu,animateTransform:Ue,font:kn,"font-face":de,"missing-glyph":Cn,glyph:Je,text:Ne,tspan:st,tref:rn,a:mi,textPath:tn,image:Xr,g:Qs,symbol:Ye,style:Uu,use:wn,mask:ki,clipPath:bs,filter:pl,feDropShadow:yl,feMorphology:vl,feComposite:He,feColorMatrix:sl,feGaussianBlur:Fe,title:cl,desc:Hr};var Ll,Nl,_e=(Ge(Rl,[{key:"fork",value:function(t,e){return Rl.from(t,e,J({},this.options,{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}))}},{key:"forkString",value:function(t,e){return Rl.fromString(t,e,J({},this.options,{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:(Nl=_r(Fr.mark(function t(){var e,n=arguments;return Fr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]?n[0]:{},this.start(J({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},e)),t.next=4,this.ready();case 4:this.stop();case 5:case"end":return t.stop()}},t,this)})),function(){return Nl.apply(this,arguments)})},{key:"start",value:function(){var t=this.documentElement,e=this.screen,n=this.options;e.start(t,J({enableRedraw:!0},n,{},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(t){this.documentElement.resize(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2])}}],[{key:"from",value:(Ll=_r(Fr.mark(function t(e,n){var r,i,a=arguments;return Fr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new mo(r=2<a.length&&void 0!==a[2]?a[2]:{}),t.next=4,i.parse(n);case 4:return i=t.sent,t.abrupt("return",new Rl(e,i,r));case 6:case"end":return t.stop()}},t)})),function(){return Ll.apply(this,arguments)})},{key:"fromString",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new Rl(t,new mo(n).parseFromString(e),n)}}]),Rl),Ge=Object.freeze({__proto__:null,offscreen:function(){return{window:null,ignoreAnimation:!0,ignoreMouse:!0,createCanvas:function(t,e){return new OffscreenCanvas(t,e)},createImage:(t=_r(Fr.mark(function t(e){var n,r;return Fr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.blob();case 5:return r=t.sent,t.next=8,createImageBitmap(r);case 8:return r=t.sent,t.abrupt("return",r);case 10:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})};var t},node:function(t){var e=t.DOMParser,n=t.canvas;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:t.fetch,createCanvas:n.createCanvas,createImage:n.loadImage}}});function Rl(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Br(this,Rl),this.parser=new mo(n),this.screen=new so(t,n),this.options=n;n=new wl(this,n),e=n.createDocumentElement(e);this.document=n,this.documentElement=e}t.AElement=mi,t.AnimateColorElement=Cu,t.AnimateElement=vu,t.AnimateTransformElement=Ue,t.BoundingBox=vs,t.CB1=C,t.CB2=T,t.CB3=O,t.CB4=V,t.Canvg=_e,t.CircleElement=Wt,t.ClipPathElement=bs,t.DefsElement=Me,t.DescElement=Hr,t.Document=wl,t.Element=Qe,t.EllipseElement=e,t.FeColorMatrixElement=sl,t.FeCompositeElement=He,t.FeDropShadowElement=yl,t.FeGaussianBlurElement=Fe,t.FeMorphologyElement=vl,t.FilterElement=pl,t.Font=ns,t.FontElement=kn,t.FontFaceElement=de,t.GElement=Qs,t.GlyphElement=Je,t.GradientElement=$e,t.ImageElement=Xr,t.LineElement=ge,t.LinearGradientElement=Be,t.MarkerElement=ke,t.MaskElement=ki,t.Matrix=on,t.MissingGlyphElement=Cn,t.Mouse=io,t.PSEUDO_ZERO=_n,t.Parser=mo,t.PathElement=Zt,t.PathParser=zs,t.PatternElement=Vt,t.Point=ro,t.PolygonElement=bn,t.PolylineElement=va,t.Property=to,t.QB1=L,t.QB2=N,t.QB3=R,t.RadialGradientElement=Yt,t.RectElement=Bs,t.RenderedElement=Pi,t.Rotate=it,t.SVGElement=Ms,t.SVGFontLoader=Xu,t.Scale=On,t.Screen=so,t.Skew=ln,t.SkewX=qt,t.SkewY=Gt,t.StopElement=Zs,t.StyleElement=Uu,t.SymbolElement=Ye,t.TRefElement=rn,t.TSpanElement=st,t.TextElement=Ne,t.TextPathElement=tn,t.TitleElement=cl,t.Transform=Ss,t.Translate=ks,t.UnknownElement=Yo,t.UseElement=wn,t.ViewPort=no,t.compressSpaces=w,t.default=_e,t.getSelectorSpecificity=f,t.normalizeAttributeName=l,t.parseExternalUrl=c,t.presets=Ge,t.toNumbers=b,t.trimLeft=s,t.trimRight=u,t.vectorMagnitude=g,t.vectorsAngle=E,t.vectorsRatio=k,Object.defineProperty(t,"__esModule",{value:!0})});